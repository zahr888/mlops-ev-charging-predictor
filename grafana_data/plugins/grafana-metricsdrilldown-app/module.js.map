{"version":3,"file":"module.js","mappings":"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","sources":["webpack://grafana-metricsdrilldown-app/webpack/runtime/create fake namespace object","webpack://grafana-metricsdrilldown-app/webpack/runtime/load script","webpack://grafana-metricsdrilldown-app/external amd \"i18next\"","webpack://grafana-metricsdrilldown-app/external amd \"react-router\"","webpack://grafana-metricsdrilldown-app/external amd \"rxjs\"","webpack://grafana-metricsdrilldown-app/external amd \"module\"","webpack://grafana-metricsdrilldown-app/external amd \"@grafana/ui\"","webpack://grafana-metricsdrilldown-app/external amd \"lodash\"","webpack://grafana-metricsdrilldown-app/./shared/constants/routes.ts","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/prometheus/dist/esm/escaping.mjs","webpack://grafana-metricsdrilldown-app/./extensions/parseMatcher.ts","webpack://grafana-metricsdrilldown-app/./extensions/links.ts","webpack://grafana-metricsdrilldown-app/./shared/utils/utils.datasource.ts","webpack://grafana-metricsdrilldown-app/./shared/logger/getEnvironment.ts","webpack://grafana-metricsdrilldown-app/./version.ts","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/utils/logLevels.js","webpack://grafana-metricsdrilldown-app/external amd \"react\"","webpack://grafana-metricsdrilldown-app/external amd \"@emotion/css\"","webpack://grafana-metricsdrilldown-app/./shared/utils/utils.promql.ts","webpack://grafana-metricsdrilldown-app/../node_modules/ua-parser-js/src/ua-parser.js","webpack://grafana-metricsdrilldown-app/external amd \"@grafana/data\"","webpack://grafana-metricsdrilldown-app/external amd \"react-dom\"","webpack://grafana-metricsdrilldown-app/external amd \"@grafana/runtime\"","webpack://grafana-metricsdrilldown-app/./shared/logger/logger.ts","webpack://grafana-metricsdrilldown-app/./shared/constants/plugin.ts","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/transports/const.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/utils/is.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/utils/json.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/utils/date.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/utils/deepEqual.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/utils/reactive.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/api/userActions/const.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/api/userActions/types.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/globalObject/globalObject.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/sdk/const.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/sdk/registerFaro.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/sdk/internalFaroGlobalObject.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/sdk/faroGlobalObject.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/utils/shortId.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/api/ItemBuffer.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/api/userActions/userAction.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/api/userActions/initialize.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/api/exceptions/const.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/api/exceptions/initialize.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/api/utils.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/api/logs/const.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/api/initialize.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/api/traces/initialize.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/api/meta/initialize.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/api/logs/initialize.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/api/measurements/initialize.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/api/events/initialize.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/utils/noop.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/internalLogger/const.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/unpatchedConsole/const.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/internalLogger/createInternalLogger.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/internalLogger/initialize.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/version.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/transports/batchExecutor.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/transports/initialize.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/unpatchedConsole/initialize.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/initialize.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/metas/initialize.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/instrumentations/initialize.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/metas/registerInitial.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/utils/sourceMaps.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/transports/registerInitial.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/instrumentations/registerInitial.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/config/const.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/consts.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/errors/stackFrames/const.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/errors/stackFrames/buildStackFrame.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/errors/stackFrames/getDataFromSafariExtensions.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/errors/stackFrames/getStackFramesFromError.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/errors/stackFrames/parseStacktrace.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/session/sessionManager/sessionConstants.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/userActions/const.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/consts.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/metas/browser/meta.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/metas/k6/meta.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/metas/page/meta.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/extensions/baseExtension.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/transports/base.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/transports/utils.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/utils/throttle.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/utils/webStorage.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/semantic.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/session/sessionManager/sampling.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/session/sessionManager/sessionManagerUtils.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/session/sessionManager/PersistentSessionsManager.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/session/sessionManager/VolatileSessionManager.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/session/sessionManager/getSessionManagerByConfig.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/transports/fetch/transport.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/utils/promiseBuffer.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/instrumentations/base.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/_internal/monitors/const.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/_internal/monitors/domMutationMonitor.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/utils/url.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/_internal/monitors/httpRequestMonitor.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/instrumentationConstants.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/performance/performanceConstants.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/performance/performanceUtils.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/performance/resource.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/performance/instrumentation.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/performance/navigation.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/_internal/monitors/performanceEntriesMonitor.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/userActions/util.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/userActions/userActionController.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/userActions/processUserActionEventHandler.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/userActions/instrumentation.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/errors/const.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/errors/getErrorDetails.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/errors/getValueAndTypeFromMessage.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/errors/registerOnunhandledrejection.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/errors/instrumentation.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/errors/registerOnerror.js","webpack://grafana-metricsdrilldown-app/../node_modules/web-vitals/dist/web-vitals.attribution.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/webVitals/webVitalsWithAttribution.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/webVitals/instrumentation.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/session/instrumentation.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/metas/session/createSession.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/view/instrumentation.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/_internal/activityWindowTracker.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/_internal/monitors/interactionMonitor.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/_internal/monitors/urlChangeMonitor.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/navigation/instrumentation.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/csp/instrumentation.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/console/instrumentation.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/config/getWebInstrumentations.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/config/makeCoreConfig.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/initialize.js","webpack://grafana-metricsdrilldown-app/./shared/logger/faro/faro-environments.ts","webpack://grafana-metricsdrilldown-app/./shared/logger/faro/faro.ts","webpack://grafana-metricsdrilldown-app/./shared/logger/faro/getFaroEnvironment.ts","webpack://grafana-metricsdrilldown-app/webpack/bootstrap","webpack://grafana-metricsdrilldown-app/webpack/runtime/amd options","webpack://grafana-metricsdrilldown-app/webpack/runtime/compat get default export","webpack://grafana-metricsdrilldown-app/webpack/runtime/define property getters","webpack://grafana-metricsdrilldown-app/webpack/runtime/ensure chunk","webpack://grafana-metricsdrilldown-app/webpack/runtime/get javascript chunk filename","webpack://grafana-metricsdrilldown-app/webpack/runtime/global","webpack://grafana-metricsdrilldown-app/webpack/runtime/hasOwnProperty shorthand","webpack://grafana-metricsdrilldown-app/webpack/runtime/make namespace object","webpack://grafana-metricsdrilldown-app/webpack/runtime/node module decorator","webpack://grafana-metricsdrilldown-app/webpack/runtime/publicPath","webpack://grafana-metricsdrilldown-app/webpack/runtime/compat","webpack://grafana-metricsdrilldown-app/webpack/runtime/jsonp chunk loading","webpack://grafana-metricsdrilldown-app/./node_modules/grafana-public-path.js","webpack://grafana-metricsdrilldown-app/./exposedComponents/LabelBreakdown/LazyLabelBreakdown.tsx","webpack://grafana-metricsdrilldown-app/./exposedComponents/LabelBreakdown/config.ts","webpack://grafana-metricsdrilldown-app/./exposedComponents/components.ts","webpack://grafana-metricsdrilldown-app/./extensions/datasourceConfigLinks.ts","webpack://grafana-metricsdrilldown-app/./module.tsx"],"sourcesContent":["var getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; (typeof current == 'object' || typeof current == 'function') && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));\n\t}\n\tdef['default'] = () => (value);\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","var inProgress = {};\nvar dataWebpackPrefix = \"grafana-metricsdrilldown-app:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t\tif (script.src.indexOf(window.location.origin + '/') !== 0) {\n\t\t\tscript.crossOrigin = \"anonymous\";\n\t\t}\n\t\tscript.integrity = __webpack_require__.sriHashes[chunkId];\n\t\tscript.crossOrigin = \"anonymous\";\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","module.exports = __WEBPACK_EXTERNAL_MODULE__211__;","module.exports = __WEBPACK_EXTERNAL_MODULE__1159__;","module.exports = __WEBPACK_EXTERNAL_MODULE__1269__;","module.exports = __WEBPACK_EXTERNAL_MODULE__1308__;","module.exports = __WEBPACK_EXTERNAL_MODULE__2007__;","module.exports = __WEBPACK_EXTERNAL_MODULE__3241__;","export const ROUTES = {\n  Trail: 'trail',\n  Drilldown: 'drilldown',\n};\n","import { config } from '@grafana/runtime';\n\n\"use strict\";\nfunction interpolateQueryExpr(value = [], variable) {\n  if (!variable.multi && !variable.includeAll) {\n    return prometheusRegularEscape(value);\n  }\n  if (typeof value === \"string\") {\n    return prometheusSpecialRegexEscape(value);\n  }\n  const escapedValues = value.map((val) => prometheusSpecialRegexEscape(val));\n  if (escapedValues.length === 1) {\n    return escapedValues[0];\n  }\n  return \"(\" + escapedValues.join(\"|\") + \")\";\n}\nfunction prometheusRegularEscape(value) {\n  if (typeof value !== \"string\") {\n    return value;\n  }\n  if (config.featureToggles.prometheusSpecialCharsInLabelValues) {\n    if (/^\\w+(=|!=|=~|!~)\".*\"$/.test(value)) {\n      return value;\n    }\n    return value.replace(/\\\\/g, \"\\\\\\\\\").replace(/\"/g, '\\\\\"');\n  }\n  return value.replace(/\\\\/g, \"\\\\\\\\\").replace(/'/g, \"\\\\\\\\'\");\n}\nfunction prometheusSpecialRegexEscape(value) {\n  if (typeof value !== \"string\") {\n    return value;\n  }\n  if (config.featureToggles.prometheusSpecialCharsInLabelValues) {\n    return value.replace(/\\\\/g, \"\\\\\\\\\\\\\\\\\").replace(/\"/g, '\\\\\\\\\\\\\"').replace(/[$^*{}\\[\\]\\'+?.()|]/g, \"\\\\\\\\$&\");\n  }\n  return value.replace(/\\\\/g, \"\\\\\\\\\\\\\\\\\").replace(/[$^*{}\\[\\]+?.()|]/g, \"\\\\\\\\$&\");\n}\nconst RE2_METACHARACTERS = /[*+?()|\\\\.\\[\\]{}^$]/g;\nfunction escapePrometheusRegexp(value) {\n  return value.replace(RE2_METACHARACTERS, \"\\\\$&\");\n}\nfunction escapeLabelValueInExactSelector(labelValue) {\n  return labelValue.replace(/\\\\/g, \"\\\\\\\\\").replace(/\\n/g, \"\\\\n\").replace(/\"/g, '\\\\\"');\n}\nfunction escapeLabelValueInRegexSelector(labelValue) {\n  return escapeLabelValueInExactSelector(escapePrometheusRegexp(labelValue));\n}\n\nexport { escapeLabelValueInExactSelector, escapeLabelValueInRegexSelector, interpolateQueryExpr, prometheusRegularEscape, prometheusSpecialRegexEscape };\n//# sourceMappingURL=escaping.mjs.map\n","type Filter = {\n  key: string;\n  operator: '=' | '!=' | '=~' | '!~' | '<' | '>';\n  value: string;\n};\n\nconst LABEL_REGEX = '[a-zA-Z_]\\\\w*'; // see https://prometheus.io/docs/concepts/data_model/#metric-names-and-labels\nconst OPERATOR_REGEX = '>|<|!~|=~|!=|=';\nconst VALUE_REGEX = '.+';\n\nconst MATCHER_REGEX = new RegExp(`(${LABEL_REGEX})(${OPERATOR_REGEX})(${VALUE_REGEX})`);\n\nexport function parseMatcher(matcher: string): Filter {\n  // eslint-disable-next-line sonarjs/slow-regex\n  const [, rawKey, rawOperator, rawValue] = matcher.match(MATCHER_REGEX) || [, '', '', ''];\n  return {\n    key: rawKey.trim(),\n    value: rawValue.replace(/['\" ]/g, ''),\n    operator: rawOperator.trim() as Filter['operator'],\n  };\n}\n","// CAUTION: Imports in this file will contribute to the module.tsx bundle size\nimport {\n  PluginExtensionPoints,\n  type PluginExtensionAddedLinkConfig,\n  type PluginExtensionPanelContext,\n} from '@grafana/data';\nimport { interpolateQueryExpr } from '@grafana/prometheus';\nimport { getTemplateSrv } from '@grafana/runtime';\nimport { type DataQuery } from '@grafana/schema';\n\nimport { PLUGIN_BASE_URL } from 'shared/constants/plugin';\nimport { ROUTES } from 'shared/constants/routes';\nimport { logger } from 'shared/logger/logger';\n\nimport { parseMatcher } from './parseMatcher';\nimport { processLabelMatcher, type ParsedPromQLQuery, type PromQLLabelMatcher } from '../shared/utils/utils.promql';\n\nconst PRODUCT_NAME = 'Grafana Metrics Drilldown';\nconst title = `Open in ${PRODUCT_NAME}`;\nconst description = `Open current query in the ${PRODUCT_NAME} view`;\nconst category = 'metrics-drilldown';\nconst icon = 'gf-prometheus';\n\nconst ASSISTANT_TARGET_V0 = 'grafana-metricsdrilldown-app/grafana-assistant-app/navigateToDrilldown/v0-alpha';\nconst ASSISTANT_TARGET_V1 = 'grafana-assistant-app/navigateToDrilldown/v1';\n\nconst ADHOC_URL_DELIMITER = '|';\n\nexport const linkConfigs: Array<PluginExtensionAddedLinkConfig<PluginExtensionPanelContext>> = [\n  {\n    title,\n    description,\n    category,\n    icon,\n    path: createAppUrl(ROUTES.Drilldown),\n    targets: [\n      PluginExtensionPoints.DashboardPanelMenu,\n      PluginExtensionPoints.ExploreToolbarAction,\n      // for testing purposes, this will be the target for the alerting rule query editor once the PR in grafana is merged\n      // PluginExtensionPoints.AlertingRuleQueryEditor,\n      'grafana/alerting/alertingrule/queryeditor',\n      ASSISTANT_TARGET_V1,\n    ],\n    configure: configureDrilldownLinkForAsync,\n    onClick: async (_, helpers) => {\n      const context = helpers.context;\n      const url = await buildDrilldownUrlAsync(context);\n      if (url) {\n        window.location.href = url;\n      }\n    },\n  },\n  {\n    targets: [ASSISTANT_TARGET_V0],\n    title: 'Navigate to metrics drilldown',\n    description: 'Build a url path to the metrics drilldown',\n    path: createAppUrl(ROUTES.Drilldown),\n    configure: (context) => {\n      if (typeof context === 'undefined') {\n        return;\n      }\n\n      const { navigateToMetrics, datasource_uid, label_filters, metric, start, end } =\n        context as unknown as GrafanaAssistantMetricsDrilldownContext;\n      // parse the labels to the PromQL format\n      const parsedLabels = parseFiltersToLabelMatchers(label_filters);\n      // create the PromURLObject for building params\n      const promURLObject = createPromURLObject(datasource_uid, parsedLabels, metric, start, end);\n      // build the params for the navigateToMetrics\n      const params = navigateToMetrics ? buildNavigateToMetricsParams(promURLObject) : undefined;\n\n      return {\n        path: createAppUrl(ROUTES.Drilldown, params),\n      };\n    },\n  },\n];\n\n// Simplified configure function for async onClick approach\nexport function configureDrilldownLinkForAsync<T extends PluginExtensionPanelContext>(context?: T) {\n  if (typeof context === 'undefined') {\n    return;\n  }\n\n  if ('pluginId' in context && context.pluginId !== 'timeseries') {\n    return;\n  }\n\n  const queries = context.targets.filter(isPromQuery);\n\n  if (!queries.length) {\n    return;\n  }\n\n  // Just return a basic config - the real URL building happens in onClick\n  return {};\n}\n\n// Async URL building function that uses lazy-loaded lezer parser\nexport async function buildDrilldownUrlAsync<T extends PluginExtensionPanelContext>(\n  context?: T\n): Promise<string | null> {\n  if (typeof context === 'undefined') {\n    return null;\n  }\n\n  if ('pluginId' in context && context.pluginId !== 'timeseries') {\n    return null;\n  }\n\n  const queries = context.targets.filter(isPromQuery);\n\n  if (!queries.length) {\n    return null;\n  }\n\n  const prometheusQuery = queries[0] as PromQuery;\n\n  const templateSrv = getTemplateSrv();\n  const datasourceUid = templateSrv.replace(prometheusQuery.datasource?.uid, context.scopedVars);\n\n  // allow the user to navigate to the drilldown without a query (metrics reducer view)\n  if (!prometheusQuery.expr) {\n    return createAppUrl(ROUTES.Drilldown);\n  }\n\n  const expr = templateSrv.replace(prometheusQuery.expr, context.scopedVars, interpolateQueryExpr);\n\n  try {\n    const { metric, labels, hasErrors, errors } = await parsePromQLQuery(expr);\n\n    if (hasErrors) {\n      logger.warn(`PromQL query has parsing errors: ${errors.join(', ')}`);\n    }\n\n    const timeRange =\n      'timeRange' in context &&\n      typeof context.timeRange === 'object' &&\n      context.timeRange != null &&\n      'from' in context.timeRange &&\n      'to' in context.timeRange\n        ? (context.timeRange as { from: string; to: string })\n        : undefined;\n\n    const promURLObject = createPromURLObject(datasourceUid, labels, metric, timeRange?.from, timeRange?.to);\n\n    const params = buildNavigateToMetricsParams(promURLObject);\n\n    return createAppUrl(ROUTES.Drilldown, params);\n  } catch (error) {\n    logger.error(new Error(`[Metrics Drilldown] Error parsing PromQL query: ${error}`));\n\n    return createAppUrl(ROUTES.Drilldown);\n  }\n}\n\n// Legacy synchronous configure function (kept for compatibility)\n// Note: This doesn't parse PromQL - use the async onClick approach above for full functionality\nexport function configureDrilldownLink<T extends PluginExtensionPanelContext>(context?: T) {\n  if (typeof context === 'undefined') {\n    return;\n  }\n\n  if ('pluginId' in context && context.pluginId !== 'timeseries') {\n    return;\n  }\n\n  const queries = context.targets.filter(isPromQuery);\n\n  if (!queries.length) {\n    return;\n  }\n\n  // Just return a basic path without PromQL parsing\n  return {\n    path: createAppUrl(ROUTES.Drilldown),\n  };\n}\n\n// Async PromQL parser using lazy-loaded lezer parser\n// lazy loading the parser to reduce the initial bundle size by ~52kB\nexport async function parsePromQLQuery(expr: string): Promise<ParsedPromQLQuery> {\n  // Use dynamic import for lazy loading to reduce initial bundle size\n  const { parser } = await import('@prometheus-io/lezer-promql');\n  const tree = parser.parse(expr);\n  let metric = '';\n  const labels: PromQLLabelMatcher[] = [];\n  let hasErrors = false;\n  const errors: string[] = [];\n\n  // Use tree.iterate() - much simpler than manual cursor traversal\n  tree.iterate({\n    enter: (node) => {\n      // Check if this is an error node\n      if (node.type.isError || node.name === '') {\n        hasErrors = true;\n        const errorText = expr.slice(node.from, node.to);\n        const errorMsg = errorText\n          ? `Parse error at position ${node.from}-${node.to}: \"${errorText}\"`\n          : `Parse error at position ${node.from}`;\n        errors.push(errorMsg);\n      }\n\n      // Get the first metric name from any VectorSelector > Identifier\n      if (!metric && node.name === 'Identifier' && node.node.parent?.type.name === 'VectorSelector') {\n        metric = expr.slice(node.from, node.to);\n      }\n\n      // Extract label matchers using helper function\n      const labelData = processLabelMatcher(node, expr);\n      if (labelData) {\n        labels.push(labelData);\n      }\n    },\n  });\n\n  return { metric, labels, hasErrors, errors };\n}\n\n/**\n * Scenes adhoc variable filters requires a | delimiter\n * between the label, operator, and value (see AdHocFiltersVariableUrlSyncHandler.ts in Scenes)\n */\nfunction filterToUrlParameter(filter: PromQLLabelMatcher): [UrlParameterType, string] {\n  return [\n    UrlParameters.Filters,\n    `${filter.label}${ADHOC_URL_DELIMITER}${filter.op}${ADHOC_URL_DELIMITER}${escapeUrlPipeDelimiters(filter.value)}`,\n  ] as [UrlParameterType, string];\n}\n\n// Type for the metrics drilldown context from Grafana Assistant\nexport type GrafanaAssistantMetricsDrilldownContext = {\n  navigateToMetrics: boolean;\n  datasource_uid: string;\n  label_filters?: string[];\n  metric?: string;\n  start?: string;\n  end?: string;\n};\n\ntype PromURLObject = {\n  datasource_uid?: string;\n  label_filters?: PromQLLabelMatcher[];\n  metric?: string;\n  start?: string;\n  end?: string;\n};\n\nexport function createPromURLObject(\n  datasource_uid?: string,\n  label_filters?: PromQLLabelMatcher[],\n  metric?: string,\n  start?: string,\n  end?: string\n): PromURLObject {\n  return {\n    datasource_uid,\n    label_filters: label_filters ?? [],\n    metric,\n    start,\n    end,\n  };\n}\n\nexport function buildNavigateToMetricsParams(promURLObject: PromURLObject): URLSearchParams {\n  const { metric, start, end, datasource_uid, label_filters } = promURLObject;\n\n  const filters = label_filters ?? [];\n\n  // Use the structured context data to build parameters\n  return appendUrlParameters([\n    [UrlParameters.Metric, metric],\n    [UrlParameters.TimeRangeFrom, start],\n    [UrlParameters.TimeRangeTo, end],\n    [UrlParameters.DatasourceId, datasource_uid],\n    ...filters.map(filterToUrlParameter),\n  ]);\n}\n\nexport function parseFiltersToLabelMatchers(label_filters?: string[]): PromQLLabelMatcher[] {\n  if (!label_filters) {\n    return [];\n  }\n\n  return label_filters.map((filter) => {\n    const matcher = parseMatcher(filter);\n    return {\n      label: matcher.key,\n      op: matcher.operator,\n      value: matcher.value,\n    };\n  });\n}\n\nexport function createAppUrl(route: string, urlParams?: URLSearchParams): string {\n  const urlParamsAsString = urlParams ? `?${urlParams.toString()}` : '';\n  return `${PLUGIN_BASE_URL}/${route}${urlParamsAsString}`;\n}\n\n// We can't use `src/shared.ts` vars here because of the impacts of its imports on the module.tsx bundle size\nexport const UrlParameters = {\n  TimeRangeFrom: 'from',\n  TimeRangeTo: 'to',\n  Metric: 'metric',\n  DatasourceId: `var-ds`,\n  Filters: `var-filters`,\n} as const;\n\ntype UrlParameterType = (typeof UrlParameters)[keyof typeof UrlParameters];\n\nexport function appendUrlParameters(\n  params: Array<[UrlParameterType, string | undefined]>,\n  initialParams?: URLSearchParams\n): URLSearchParams {\n  const searchParams = new URLSearchParams(initialParams?.toString());\n\n  params.forEach(([key, value]) => {\n    if (value) {\n      searchParams.append(key, value);\n    }\n  });\n\n  return searchParams;\n}\n\ntype PromQuery = DataQuery & { expr: string };\n\nfunction isPromQuery(query: DataQuery): query is PromQuery {\n  const { datasource } = query;\n  return datasource?.type === 'prometheus';\n}\n\n// Need to export this function from scenes because importing scenesUtils is increasing the bundle entry point size by 522.51kB\nexport function escapeUrlPipeDelimiters(value: string | undefined): string {\n  if (value == null) {\n    return '';\n  }\n\n  // Replace the pipe due to using it as a filter separator\n  return /\\|/g[Symbol.replace](value, '__gfp__');\n}\n","import { type DataSourceInstanceSettings, type DataSourceJsonData } from '@grafana/data';\nimport { type PrometheusDatasource } from '@grafana/prometheus';\nimport { getBackendSrv, getDataSourceSrv } from '@grafana/runtime';\n\nimport { logger } from '../logger/logger';\nexport type DataSource = DataSourceInstanceSettings<DataSourceJsonData>;\n\nconst DS_HEALTH_CHECK_TIMEOUT_MS = 3000;\nexport const DS_HEALTH_CHECK_TIMEOUT_S = (DS_HEALTH_CHECK_TIMEOUT_MS / 1000).toFixed(\n  DS_HEALTH_CHECK_TIMEOUT_MS % 1000 === 0 ? 0 : 1\n);\n\n// This regex matches Grafana developed Prometheus data sources that are compatible with the vanilla Prometheus data source\nconst PROMETHEUS_DATA_SOURCE_REGEX = /^grafana-[0-9a-z]+prometheus-datasource$/;\n\n/**\n * Helper function to determine if a datasource is a Prometheus datasource\n */\nexport function isPrometheusDataSource(input: unknown): input is PrometheusDatasource {\n  return (\n    typeof input === 'object' &&\n    input !== null &&\n    'type' in input &&\n    typeof input.type === 'string' &&\n    (input.type === 'prometheus' || PROMETHEUS_DATA_SOURCE_REGEX.test(input.type)) &&\n    'uid' in input &&\n    typeof input.uid === 'string'\n  );\n}\n\ntype DataSourceType = 'prometheus' | 'loki';\n\n/**\n * Fetches and caches healthy data sources\n */\nexport class DataSourceFetcher {\n  private readonly pendingRequests = new Map<DataSourceType, Promise<DataSource[]>>();\n  private readonly cache = new Map<DataSourceType, DataSource[]>();\n\n  /**\n   * Retrieves healthy data sources of the specified type\n   * Results are cached indefinitely until the `DataSourceFetcher` is destroyed\n   *\n   * @param type - The type of data source to retrieve ('prometheus' or loki)\n   * @returns Array of healthy data sources\n   */\n  public async getHealthyDataSources(type: DataSourceType, limit = 15): Promise<DataSource[]> {\n    // Check if we have cached results\n    const cachedDataSources = this.cache.get(type);\n    if (cachedDataSources?.length) {\n      return cachedDataSources;\n    }\n\n    // If there's already a pending request for this type, wait for it\n    let pendingRequest = this.pendingRequests.get(type);\n    if (!pendingRequest) {\n      pendingRequest = this.fetchHealthyDataSources(type, limit).finally(() => {\n        // Clean up the pending request after it completes\n        this.pendingRequests.delete(type);\n      });\n      this.pendingRequests.set(type, pendingRequest);\n    }\n\n    // Wait for the request to complete and update cache\n    const dataSources = await pendingRequest;\n    this.cache.set(type, dataSources);\n\n    return dataSources;\n  }\n\n  /**\n   * Fetches healthy data sources of the specified type\n   */\n  private async fetchHealthyDataSources(type: DataSourceType, limit: number): Promise<DataSource[]> {\n    const allDataSourcesOfType = [\n      ...getDataSourceSrv().getList({\n        logs: true,\n        type,\n        filter: (ds) => ds.uid !== 'grafana',\n      }),\n    ]\n      .sort((a, b) => {\n        // Default data source should be first in the list\n        if (a.isDefault && !b.isDefault) {\n          return -1;\n        }\n        if (!a.isDefault && b.isDefault) {\n          return 1;\n        }\n        return 0;\n      })\n      .slice(0, limit);\n\n    const healthyDataSources: DataSource[] = [];\n    const unhealthyDataSources: DataSource[] = [];\n\n    await Promise.all(\n      allDataSourcesOfType.map(async (ds) => {\n        try {\n          const health = await this.performHealthCheckWithTimeout(ds.uid);\n\n          if (health?.status === 'OK') {\n            healthyDataSources.push(ds);\n          } else if (\n            // A timeout doesn't necessarily mean the data source is unhealthy\n            health?.status !== 'TIMEOUT'\n          ) {\n            unhealthyDataSources.push(ds);\n          }\n        } catch {\n          unhealthyDataSources.push(ds);\n        }\n      })\n    );\n\n    if (unhealthyDataSources.length > 0) {\n      logger.warn(\n        `Found ${unhealthyDataSources.length} unhealthy ${type} data sources: ${unhealthyDataSources\n          .map((ds) => ds.name)\n          .join(', ')}`\n      );\n    }\n\n    return healthyDataSources;\n  }\n\n  /**\n   * Performs a health check with a 3-second timeout.\n   * Data sources that don't respond within 3 seconds are considered unhealthy.\n   *\n   * @param uid - The data source UID to check\n   * @returns Health check response with status 'OK' or 'TIMEOUT'\n   */\n  private async performHealthCheckWithTimeout(uid: string): Promise<{ status: string }> {\n    const abortController = new AbortController();\n\n    const timeoutId = setTimeout(() => {\n      abortController.abort();\n    }, DS_HEALTH_CHECK_TIMEOUT_MS);\n\n    try {\n      const health = await getBackendSrv().get(`/api/datasources/uid/${uid}/health`, undefined, undefined, {\n        showSuccessAlert: false,\n        showErrorAlert: false,\n        abortSignal: abortController.signal,\n      });\n      clearTimeout(timeoutId);\n      return health;\n    } catch (error) {\n      clearTimeout(timeoutId);\n      // If the request was aborted due to timeout, return TIMEOUT status\n      if (error instanceof DOMException && error.name === 'AbortError') {\n        return { status: 'TIMEOUT' };\n      }\n      // Re-throw other errors to be handled by the caller\n      throw error;\n    }\n  }\n}\n\nlet dataSourceFetcherSingleton: DataSourceFetcher | undefined;\n\nexport function getDataSourceFetcher(): DataSourceFetcher {\n  if (!dataSourceFetcherSingleton) {\n    dataSourceFetcherSingleton = new DataSourceFetcher();\n  }\n\n  return dataSourceFetcherSingleton;\n}\n","export type Environment = 'local' | 'dev' | 'ops' | 'prod';\n\nconst MATCHERS: Array<{ regExp: RegExp; environment: Environment }> = [\n  {\n    regExp: /localhost/,\n    environment: 'local',\n  },\n  {\n    regExp: /grafana-dev\\.net/,\n    environment: 'dev',\n  },\n  {\n    regExp: /grafana-ops\\.net/,\n    environment: 'ops',\n  },\n  {\n    regExp: /grafana\\.net/,\n    environment: 'prod',\n  },\n];\n\nexport function getEnvironment(): Environment | null {\n  if (!window?.location?.host) {\n    return null;\n  }\n\n  const found = MATCHERS.find(({ regExp }) => regExp.test(window.location.host));\n\n  return found ? found.environment : null;\n}\n","export const GIT_COMMIT = '41a4746a9ef1a8656b82d19d933913ae14ffa4b6';\n","export var LogLevel;\n(function (LogLevel) {\n    LogLevel[\"TRACE\"] = \"trace\";\n    LogLevel[\"DEBUG\"] = \"debug\";\n    LogLevel[\"INFO\"] = \"info\";\n    LogLevel[\"LOG\"] = \"log\";\n    LogLevel[\"WARN\"] = \"warn\";\n    LogLevel[\"ERROR\"] = \"error\";\n})(LogLevel || (LogLevel = {}));\nexport const defaultLogLevel = LogLevel.LOG;\nexport const allLogLevels = [\n    LogLevel.TRACE,\n    LogLevel.DEBUG,\n    LogLevel.INFO,\n    LogLevel.LOG,\n    LogLevel.WARN,\n    LogLevel.ERROR,\n];\n//# sourceMappingURL=logLevels.js.map","module.exports = __WEBPACK_EXTERNAL_MODULE__5959__;","module.exports = __WEBPACK_EXTERNAL_MODULE__6089__;","import { type TreeCursor } from '@lezer/common';\nexport interface PromQLLabelMatcher {\n  label: string;\n  op: string;\n  value: string;\n}\n\nexport interface ParsedPromQLQuery {\n  metric: string;\n  labels: PromQLLabelMatcher[];\n  hasErrors: boolean;\n  errors: string[];\n}\n\n/**\n * Extracts all metric names from a PromQL expression\n * @param {string} promqlExpression - The PromQL expression to parse\n * @returns {string[]} An array of unique metric names found in the expression\n */\nexport async function extractMetricNames(promqlExpression: string): Promise<string[]> {\n  const { parser } = await import('@prometheus-io/lezer-promql');\n  const tree = parser.parse(promqlExpression);\n  const metricNames = new Set<string>();\n  const cursor = tree.cursor();\n\n  do {\n    // have we found a VectorSelector? does it have a first child?\n    if (!cursor.type.is('VectorSelector') || !cursor.firstChild()) {\n      continue;\n    }\n\n    do {\n      // if so, let's look for any Identifier node\n      if (cursor.type.is('Identifier')) {\n        processIdentifier(promqlExpression, cursor, metricNames);\n      }\n    } while (cursor.nextSibling());\n\n    cursor.parent();\n  } while (cursor.next());\n\n  return Array.from(metricNames);\n}\n\nfunction processIdentifier(promqlExpression: string, cursor: TreeCursor, metricNames: Set<string>) {\n  const metricName = promqlExpression.slice(cursor.from, cursor.to);\n  if (metricName) {\n    metricNames.add(metricName);\n  }\n}\n\n// Helper function to process label matcher nodes\nexport function processLabelMatcher(node: any, expr: string): PromQLLabelMatcher | null {\n  if (node.name !== 'UnquotedLabelMatcher') {\n    return null;\n  }\n\n  const labelNode = node.node;\n  let labelName = '';\n  let op = '';\n  let value = '';\n\n  // Get children of UnquotedLabelMatcher\n  for (let child = labelNode.firstChild; child; child = child.nextSibling) {\n    if (child.type.name === 'LabelName') {\n      labelName = expr.slice(child.from, child.to);\n    } else if (child.type.name === 'MatchOp') {\n      op = expr.slice(child.from, child.to);\n    } else if (child.type.name === 'StringLiteral') {\n      value = expr.slice(child.from + 1, child.to - 1); // Remove quotes\n    }\n  }\n\n  if (labelName && op) {\n    // Allow empty string values\n    return { label: labelName, op, value };\n  }\n  return null;\n}\n","/////////////////////////////////////////////////////////////////////////////////\n/* UAParser.js v1.0.40\n   Copyright  2012-2024 Faisal Salman <f@faisalman.com>\n   MIT License *//*\n   Detect Browser, Engine, OS, CPU, and Device type/model from User-Agent data.\n   Supports browser & node.js environment. \n   Demo   : https://faisalman.github.io/ua-parser-js\n   Source : https://github.com/faisalman/ua-parser-js */\n/////////////////////////////////////////////////////////////////////////////////\n\n(function (window, undefined) {\n\n    'use strict';\n\n    //////////////\n    // Constants\n    /////////////\n\n\n    var LIBVERSION  = '1.0.40',\n        EMPTY       = '',\n        UNKNOWN     = '?',\n        FUNC_TYPE   = 'function',\n        UNDEF_TYPE  = 'undefined',\n        OBJ_TYPE    = 'object',\n        STR_TYPE    = 'string',\n        MAJOR       = 'major',\n        MODEL       = 'model',\n        NAME        = 'name',\n        TYPE        = 'type',\n        VENDOR      = 'vendor',\n        VERSION     = 'version',\n        ARCHITECTURE= 'architecture',\n        CONSOLE     = 'console',\n        MOBILE      = 'mobile',\n        TABLET      = 'tablet',\n        SMARTTV     = 'smarttv',\n        WEARABLE    = 'wearable',\n        EMBEDDED    = 'embedded',\n        UA_MAX_LENGTH = 500;\n\n    var AMAZON  = 'Amazon',\n        APPLE   = 'Apple',\n        ASUS    = 'ASUS',\n        BLACKBERRY = 'BlackBerry',\n        BROWSER = 'Browser',\n        CHROME  = 'Chrome',\n        EDGE    = 'Edge',\n        FIREFOX = 'Firefox',\n        GOOGLE  = 'Google',\n        HUAWEI  = 'Huawei',\n        LG      = 'LG',\n        MICROSOFT = 'Microsoft',\n        MOTOROLA  = 'Motorola',\n        OPERA   = 'Opera',\n        SAMSUNG = 'Samsung',\n        SHARP   = 'Sharp',\n        SONY    = 'Sony',\n        XIAOMI  = 'Xiaomi',\n        ZEBRA   = 'Zebra',\n        FACEBOOK    = 'Facebook',\n        CHROMIUM_OS = 'Chromium OS',\n        MAC_OS  = 'Mac OS',\n        SUFFIX_BROWSER = ' Browser';\n\n    ///////////\n    // Helper\n    //////////\n\n    var extend = function (regexes, extensions) {\n            var mergedRegexes = {};\n            for (var i in regexes) {\n                if (extensions[i] && extensions[i].length % 2 === 0) {\n                    mergedRegexes[i] = extensions[i].concat(regexes[i]);\n                } else {\n                    mergedRegexes[i] = regexes[i];\n                }\n            }\n            return mergedRegexes;\n        },\n        enumerize = function (arr) {\n            var enums = {};\n            for (var i=0; i<arr.length; i++) {\n                enums[arr[i].toUpperCase()] = arr[i];\n            }\n            return enums;\n        },\n        has = function (str1, str2) {\n            return typeof str1 === STR_TYPE ? lowerize(str2).indexOf(lowerize(str1)) !== -1 : false;\n        },\n        lowerize = function (str) {\n            return str.toLowerCase();\n        },\n        majorize = function (version) {\n            return typeof(version) === STR_TYPE ? version.replace(/[^\\d\\.]/g, EMPTY).split('.')[0] : undefined;\n        },\n        trim = function (str, len) {\n            if (typeof(str) === STR_TYPE) {\n                str = str.replace(/^\\s\\s*/, EMPTY);\n                return typeof(len) === UNDEF_TYPE ? str : str.substring(0, UA_MAX_LENGTH);\n            }\n    };\n\n    ///////////////\n    // Map helper\n    //////////////\n\n    var rgxMapper = function (ua, arrays) {\n\n            var i = 0, j, k, p, q, matches, match;\n\n            // loop through all regexes maps\n            while (i < arrays.length && !matches) {\n\n                var regex = arrays[i],       // even sequence (0,2,4,..)\n                    props = arrays[i + 1];   // odd sequence (1,3,5,..)\n                j = k = 0;\n\n                // try matching uastring with regexes\n                while (j < regex.length && !matches) {\n\n                    if (!regex[j]) { break; }\n                    matches = regex[j++].exec(ua);\n\n                    if (!!matches) {\n                        for (p = 0; p < props.length; p++) {\n                            match = matches[++k];\n                            q = props[p];\n                            // check if given property is actually array\n                            if (typeof q === OBJ_TYPE && q.length > 0) {\n                                if (q.length === 2) {\n                                    if (typeof q[1] == FUNC_TYPE) {\n                                        // assign modified match\n                                        this[q[0]] = q[1].call(this, match);\n                                    } else {\n                                        // assign given value, ignore regex match\n                                        this[q[0]] = q[1];\n                                    }\n                                } else if (q.length === 3) {\n                                    // check whether function or regex\n                                    if (typeof q[1] === FUNC_TYPE && !(q[1].exec && q[1].test)) {\n                                        // call function (usually string mapper)\n                                        this[q[0]] = match ? q[1].call(this, match, q[2]) : undefined;\n                                    } else {\n                                        // sanitize match using given regex\n                                        this[q[0]] = match ? match.replace(q[1], q[2]) : undefined;\n                                    }\n                                } else if (q.length === 4) {\n                                        this[q[0]] = match ? q[3].call(this, match.replace(q[1], q[2])) : undefined;\n                                }\n                            } else {\n                                this[q] = match ? match : undefined;\n                            }\n                        }\n                    }\n                }\n                i += 2;\n            }\n        },\n\n        strMapper = function (str, map) {\n\n            for (var i in map) {\n                // check if current value is array\n                if (typeof map[i] === OBJ_TYPE && map[i].length > 0) {\n                    for (var j = 0; j < map[i].length; j++) {\n                        if (has(map[i][j], str)) {\n                            return (i === UNKNOWN) ? undefined : i;\n                        }\n                    }\n                } else if (has(map[i], str)) {\n                    return (i === UNKNOWN) ? undefined : i;\n                }\n            }\n            return map.hasOwnProperty('*') ? map['*'] : str;\n    };\n\n    ///////////////\n    // String map\n    //////////////\n\n    // Safari < 3.0\n    var oldSafariMap = {\n            '1.0'   : '/8',\n            '1.2'   : '/1',\n            '1.3'   : '/3',\n            '2.0'   : '/412',\n            '2.0.2' : '/416',\n            '2.0.3' : '/417',\n            '2.0.4' : '/419',\n            '?'     : '/'\n        },\n        windowsVersionMap = {\n            'ME'        : '4.90',\n            'NT 3.11'   : 'NT3.51',\n            'NT 4.0'    : 'NT4.0',\n            '2000'      : 'NT 5.0',\n            'XP'        : ['NT 5.1', 'NT 5.2'],\n            'Vista'     : 'NT 6.0',\n            '7'         : 'NT 6.1',\n            '8'         : 'NT 6.2',\n            '8.1'       : 'NT 6.3',\n            '10'        : ['NT 6.4', 'NT 10.0'],\n            'RT'        : 'ARM'\n    };\n\n    //////////////\n    // Regex map\n    /////////////\n\n    var regexes = {\n\n        browser : [[\n\n            /\\b(?:crmo|crios)\\/([\\w\\.]+)/i                                      // Chrome for Android/iOS\n            ], [VERSION, [NAME, 'Chrome']], [\n            /edg(?:e|ios|a)?\\/([\\w\\.]+)/i                                       // Microsoft Edge\n            ], [VERSION, [NAME, 'Edge']], [\n\n            // Presto based\n            /(opera mini)\\/([-\\w\\.]+)/i,                                        // Opera Mini\n            /(opera [mobiletab]{3,6})\\b.+version\\/([-\\w\\.]+)/i,                 // Opera Mobi/Tablet\n            /(opera)(?:.+version\\/|[\\/ ]+)([\\w\\.]+)/i                           // Opera\n            ], [NAME, VERSION], [\n            /opios[\\/ ]+([\\w\\.]+)/i                                             // Opera mini on iphone >= 8.0\n            ], [VERSION, [NAME, OPERA+' Mini']], [\n            /\\bop(?:rg)?x\\/([\\w\\.]+)/i                                          // Opera GX\n            ], [VERSION, [NAME, OPERA+' GX']], [\n            /\\bopr\\/([\\w\\.]+)/i                                                 // Opera Webkit\n            ], [VERSION, [NAME, OPERA]], [\n\n            // Mixed\n            /\\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\\/ ]?([\\w\\.]+)/i            // Baidu\n            ], [VERSION, [NAME, 'Baidu']], [\n            /\\b(?:mxbrowser|mxios|myie2)\\/?([-\\w\\.]*)\\b/i                       // Maxthon\n            ], [VERSION, [NAME, 'Maxthon']], [\n            /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\n            /(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\\/ ]?([\\w\\.]*)/i,      \n                                                                                // Lunascape/Maxthon/Netfront/Jasmine/Blazer/Sleipnir\n            // Trident based\n            /(avant|iemobile|slim(?:browser|boat|jet))[\\/ ]?([\\d\\.]*)/i,        // Avant/IEMobile/SlimBrowser/SlimBoat/Slimjet\n            /(?:ms|\\()(ie) ([\\w\\.]+)/i,                                         // Internet Explorer\n\n            // Blink/Webkit/KHTML based                                         // Flock/RockMelt/Midori/Epiphany/Silk/Skyfire/Bolt/Iron/Iridium/PhantomJS/Bowser/QupZilla/Falkon\n            /(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon)\\/([-\\w\\.]+)/i,\n                                                                                // Rekonq/Puffin/Brave/Whale/QQBrowserLite/QQ//Vivaldi/DuckDuckGo/Klar/Helio/Dragon\n            /(heytap|ovi|115)browser\\/([\\d\\.]+)/i,                              // HeyTap/Ovi/115\n            /(weibo)__([\\d\\.]+)/i                                               // Weibo\n            ], [NAME, VERSION], [\n            /quark(?:pc)?\\/([-\\w\\.]+)/i                                         // Quark\n            ], [VERSION, [NAME, 'Quark']], [\n            /\\bddg\\/([\\w\\.]+)/i                                                 // DuckDuckGo\n            ], [VERSION, [NAME, 'DuckDuckGo']], [\n            /(?:\\buc? ?browser|(?:juc.+)ucweb)[\\/ ]?([\\w\\.]+)/i                 // UCBrowser\n            ], [VERSION, [NAME, 'UC'+BROWSER]], [\n            /microm.+\\bqbcore\\/([\\w\\.]+)/i,                                     // WeChat Desktop for Windows Built-in Browser\n            /\\bqbcore\\/([\\w\\.]+).+microm/i,\n            /micromessenger\\/([\\w\\.]+)/i                                        // WeChat\n            ], [VERSION, [NAME, 'WeChat']], [\n            /konqueror\\/([\\w\\.]+)/i                                             // Konqueror\n            ], [VERSION, [NAME, 'Konqueror']], [\n            /trident.+rv[: ]([\\w\\.]{1,9})\\b.+like gecko/i                       // IE11\n            ], [VERSION, [NAME, 'IE']], [\n            /ya(?:search)?browser\\/([\\w\\.]+)/i                                  // Yandex\n            ], [VERSION, [NAME, 'Yandex']], [\n            /slbrowser\\/([\\w\\.]+)/i                                             // Smart Lenovo Browser\n            ], [VERSION, [NAME, 'Smart Lenovo '+BROWSER]], [\n            /(avast|avg)\\/([\\w\\.]+)/i                                           // Avast/AVG Secure Browser\n            ], [[NAME, /(.+)/, '$1 Secure '+BROWSER], VERSION], [\n            /\\bfocus\\/([\\w\\.]+)/i                                               // Firefox Focus\n            ], [VERSION, [NAME, FIREFOX+' Focus']], [\n            /\\bopt\\/([\\w\\.]+)/i                                                 // Opera Touch\n            ], [VERSION, [NAME, OPERA+' Touch']], [\n            /coc_coc\\w+\\/([\\w\\.]+)/i                                            // Coc Coc Browser\n            ], [VERSION, [NAME, 'Coc Coc']], [\n            /dolfin\\/([\\w\\.]+)/i                                                // Dolphin\n            ], [VERSION, [NAME, 'Dolphin']], [\n            /coast\\/([\\w\\.]+)/i                                                 // Opera Coast\n            ], [VERSION, [NAME, OPERA+' Coast']], [\n            /miuibrowser\\/([\\w\\.]+)/i                                           // MIUI Browser\n            ], [VERSION, [NAME, 'MIUI' + SUFFIX_BROWSER]], [\n            /fxios\\/([\\w\\.-]+)/i                                                // Firefox for iOS\n            ], [VERSION, [NAME, FIREFOX]], [\n            /\\bqihoobrowser\\/?([\\w\\.]*)/i                                       // 360\n            ], [VERSION, [NAME, '360']], [\n            /\\b(qq)\\/([\\w\\.]+)/i                                                // QQ\n            ], [[NAME, /(.+)/, '$1Browser'], VERSION], [\n            /(oculus|sailfish|huawei|vivo|pico)browser\\/([\\w\\.]+)/i\n            ], [[NAME, /(.+)/, '$1' + SUFFIX_BROWSER], VERSION], [              // Oculus/Sailfish/HuaweiBrowser/VivoBrowser/PicoBrowser\n            /samsungbrowser\\/([\\w\\.]+)/i                                        // Samsung Internet\n            ], [VERSION, [NAME, SAMSUNG + ' Internet']], [\n            /metasr[\\/ ]?([\\d\\.]+)/i                                            // Sogou Explorer\n            ], [VERSION, [NAME, 'Sogou Explorer']], [\n            /(sogou)mo\\w+\\/([\\d\\.]+)/i                                          // Sogou Mobile\n            ], [[NAME, 'Sogou Mobile'], VERSION], [\n            /(electron)\\/([\\w\\.]+) safari/i,                                    // Electron-based App\n            /(tesla)(?: qtcarbrowser|\\/(20\\d\\d\\.[-\\w\\.]+))/i,                   // Tesla\n            /m?(qqbrowser|2345(?=browser|chrome|explorer))\\w*[\\/ ]?v?([\\w\\.]+)/i   // QQ/2345\n            ], [NAME, VERSION], [\n            /(lbbrowser|rekonq)/i,                                              // LieBao Browser/Rekonq\n            /\\[(linkedin)app\\]/i                                                // LinkedIn App for iOS & Android\n            ], [NAME], [\n            /ome\\/([\\w\\.]+) \\w* ?(iron) saf/i,                                  // Iron\n            /ome\\/([\\w\\.]+).+qihu (360)[es]e/i                                  // 360\n            ], [VERSION, NAME], [\n\n            // WebView\n            /((?:fban\\/fbios|fb_iab\\/fb4a)(?!.+fbav)|;fbav\\/([\\w\\.]+);)/i       // Facebook App for iOS & Android\n            ], [[NAME, FACEBOOK], VERSION], [\n            /(Klarna)\\/([\\w\\.]+)/i,                                             // Klarna Shopping Browser for iOS & Android\n            /(kakao(?:talk|story))[\\/ ]([\\w\\.]+)/i,                             // Kakao App\n            /(naver)\\(.*?(\\d+\\.[\\w\\.]+).*\\)/i,                                  // Naver InApp\n            /safari (line)\\/([\\w\\.]+)/i,                                        // Line App for iOS\n            /\\b(line)\\/([\\w\\.]+)\\/iab/i,                                        // Line App for Android\n            /(alipay)client\\/([\\w\\.]+)/i,                                       // Alipay\n            /(twitter)(?:and| f.+e\\/([\\w\\.]+))/i,                               // Twitter\n            /(chromium|instagram|snapchat)[\\/ ]([-\\w\\.]+)/i                     // Chromium/Instagram/Snapchat\n            ], [NAME, VERSION], [\n            /\\bgsa\\/([\\w\\.]+) .*safari\\//i                                      // Google Search Appliance on iOS\n            ], [VERSION, [NAME, 'GSA']], [\n            /musical_ly(?:.+app_?version\\/|_)([\\w\\.]+)/i                        // TikTok\n            ], [VERSION, [NAME, 'TikTok']], [\n\n            /headlesschrome(?:\\/([\\w\\.]+)| )/i                                  // Chrome Headless\n            ], [VERSION, [NAME, CHROME+' Headless']], [\n\n            / wv\\).+(chrome)\\/([\\w\\.]+)/i                                       // Chrome WebView\n            ], [[NAME, CHROME+' WebView'], VERSION], [\n\n            /droid.+ version\\/([\\w\\.]+)\\b.+(?:mobile safari|safari)/i           // Android Browser\n            ], [VERSION, [NAME, 'Android '+BROWSER]], [\n\n            /(chrome|omniweb|arora|[tizenoka]{5} ?browser)\\/v?([\\w\\.]+)/i       // Chrome/OmniWeb/Arora/Tizen/Nokia\n            ], [NAME, VERSION], [\n\n            /version\\/([\\w\\.\\,]+) .*mobile\\/\\w+ (safari)/i                      // Mobile Safari\n            ], [VERSION, [NAME, 'Mobile Safari']], [\n            /version\\/([\\w(\\.|\\,)]+) .*(mobile ?safari|safari)/i                // Safari & Safari Mobile\n            ], [VERSION, NAME], [\n            /webkit.+?(mobile ?safari|safari)(\\/[\\w\\.]+)/i                      // Safari < 3.0\n            ], [NAME, [VERSION, strMapper, oldSafariMap]], [\n\n            /(webkit|khtml)\\/([\\w\\.]+)/i\n            ], [NAME, VERSION], [\n\n            // Gecko based\n            /(navigator|netscape\\d?)\\/([-\\w\\.]+)/i                              // Netscape\n            ], [[NAME, 'Netscape'], VERSION], [\n            /(wolvic|librewolf)\\/([\\w\\.]+)/i                                    // Wolvic/LibreWolf\n            ], [NAME, VERSION], [\n            /mobile vr; rv:([\\w\\.]+)\\).+firefox/i                               // Firefox Reality\n            ], [VERSION, [NAME, FIREFOX+' Reality']], [\n            /ekiohf.+(flow)\\/([\\w\\.]+)/i,                                       // Flow\n            /(swiftfox)/i,                                                      // Swiftfox\n            /(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\\/ ]?([\\w\\.\\+]+)/i,\n                                                                                // IceDragon/Iceweasel/Camino/Chimera/Fennec/Maemo/Minimo/Conkeror\n            /(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\\/([-\\w\\.]+)$/i,\n                                                                                // Firefox/SeaMonkey/K-Meleon/IceCat/IceApe/Firebird/Phoenix\n            /(firefox)\\/([\\w\\.]+)/i,                                            // Other Firefox-based\n            /(mozilla)\\/([\\w\\.]+) .+rv\\:.+gecko\\/\\d+/i,                         // Mozilla\n\n            // Other\n            /(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\\. ]?browser)[-\\/ ]?v?([\\w\\.]+)/i,\n                                                                                // Polaris/Lynx/Dillo/iCab/Doris/Amaya/w3m/NetSurf/Obigo/Mosaic/Go/ICE/UP.Browser\n            /(links) \\(([\\w\\.]+)/i                                              // Links\n            ], [NAME, [VERSION, /_/g, '.']], [\n            \n            /(cobalt)\\/([\\w\\.]+)/i                                              // Cobalt\n            ], [NAME, [VERSION, /master.|lts./, \"\"]]\n        ],\n\n        cpu : [[\n\n            /(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\\)]/i                     // AMD64 (x64)\n            ], [[ARCHITECTURE, 'amd64']], [\n\n            /(ia32(?=;))/i                                                      // IA32 (quicktime)\n            ], [[ARCHITECTURE, lowerize]], [\n\n            /((?:i[346]|x)86)[;\\)]/i                                            // IA32 (x86)\n            ], [[ARCHITECTURE, 'ia32']], [\n\n            /\\b(aarch64|arm(v?8e?l?|_?64))\\b/i                                 // ARM64\n            ], [[ARCHITECTURE, 'arm64']], [\n\n            /\\b(arm(?:v[67])?ht?n?[fl]p?)\\b/i                                   // ARMHF\n            ], [[ARCHITECTURE, 'armhf']], [\n\n            // PocketPC mistakenly identified as PowerPC\n            /windows (ce|mobile); ppc;/i\n            ], [[ARCHITECTURE, 'arm']], [\n\n            /((?:ppc|powerpc)(?:64)?)(?: mac|;|\\))/i                            // PowerPC\n            ], [[ARCHITECTURE, /ower/, EMPTY, lowerize]], [\n\n            /(sun4\\w)[;\\)]/i                                                    // SPARC\n            ], [[ARCHITECTURE, 'sparc']], [\n\n            /((?:avr32|ia64(?=;))|68k(?=\\))|\\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\\b|pa-risc)/i\n                                                                                // IA64, 68K, ARM/64, AVR/32, IRIX/64, MIPS/64, SPARC/64, PA-RISC\n            ], [[ARCHITECTURE, lowerize]]\n        ],\n\n        device : [[\n\n            //////////////////////////\n            // MOBILES & TABLETS\n            /////////////////////////\n\n            // Samsung\n            /\\b(sch-i[89]0\\d|shw-m380s|sm-[ptx]\\w{2,4}|gt-[pn]\\d{2,4}|sgh-t8[56]9|nexus 10)/i\n            ], [MODEL, [VENDOR, SAMSUNG], [TYPE, TABLET]], [\n            /\\b((?:s[cgp]h|gt|sm)-(?![lr])\\w+|sc[g-]?[\\d]+a?|galaxy nexus)/i,\n            /samsung[- ]((?!sm-[lr])[-\\w]+)/i,\n            /sec-(sgh\\w+)/i\n            ], [MODEL, [VENDOR, SAMSUNG], [TYPE, MOBILE]], [\n\n            // Apple\n            /(?:\\/|\\()(ip(?:hone|od)[\\w, ]*)(?:\\/|;)/i                          // iPod/iPhone\n            ], [MODEL, [VENDOR, APPLE], [TYPE, MOBILE]], [\n            /\\((ipad);[-\\w\\),; ]+apple/i,                                       // iPad\n            /applecoremedia\\/[\\w\\.]+ \\((ipad)/i,\n            /\\b(ipad)\\d\\d?,\\d\\d?[;\\]].+ios/i\n            ], [MODEL, [VENDOR, APPLE], [TYPE, TABLET]], [\n            /(macintosh);/i\n            ], [MODEL, [VENDOR, APPLE]], [\n\n            // Sharp\n            /\\b(sh-?[altvz]?\\d\\d[a-ekm]?)/i\n            ], [MODEL, [VENDOR, SHARP], [TYPE, MOBILE]], [\n\n            // Honor\n            /(?:honor)([-\\w ]+)[;\\)]/i\n            ], [MODEL, [VENDOR, 'Honor'], [TYPE, MOBILE]], [\n\n            // Huawei\n            /\\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\\d{2})\\b(?!.+d\\/s)/i\n            ], [MODEL, [VENDOR, HUAWEI], [TYPE, TABLET]], [\n            /(?:huawei)([-\\w ]+)[;\\)]/i,\n            /\\b(nexus 6p|\\w{2,4}e?-[atu]?[ln][\\dx][012359c][adn]?)\\b(?!.+d\\/s)/i\n            ], [MODEL, [VENDOR, HUAWEI], [TYPE, MOBILE]], [\n\n            // Xiaomi\n            /\\b(poco[\\w ]+|m2\\d{3}j\\d\\d[a-z]{2})(?: bui|\\))/i,                  // Xiaomi POCO\n            /\\b; (\\w+) build\\/hm\\1/i,                                           // Xiaomi Hongmi 'numeric' models\n            /\\b(hm[-_ ]?note?[_ ]?(?:\\d\\w)?) bui/i,                             // Xiaomi Hongmi\n            /\\b(redmi[\\-_ ]?(?:note|k)?[\\w_ ]+)(?: bui|\\))/i,                   // Xiaomi Redmi\n            /oid[^\\)]+; (m?[12][0-389][01]\\w{3,6}[c-y])( bui|; wv|\\))/i,        // Xiaomi Redmi 'numeric' models\n            /\\b(mi[-_ ]?(?:a\\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\\d?\\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\\))/i // Xiaomi Mi\n            ], [[MODEL, /_/g, ' '], [VENDOR, XIAOMI], [TYPE, MOBILE]], [\n            /oid[^\\)]+; (2\\d{4}(283|rpbf)[cgl])( bui|\\))/i,                     // Redmi Pad\n            /\\b(mi[-_ ]?(?:pad)(?:[\\w_ ]+))(?: bui|\\))/i                        // Mi Pad tablets\n            ],[[MODEL, /_/g, ' '], [VENDOR, XIAOMI], [TYPE, TABLET]], [\n\n            // OPPO\n            /; (\\w+) bui.+ oppo/i,\n            /\\b(cph[12]\\d{3}|p(?:af|c[al]|d\\w|e[ar])[mt]\\d0|x9007|a101op)\\b/i\n            ], [MODEL, [VENDOR, 'OPPO'], [TYPE, MOBILE]], [\n            /\\b(opd2\\d{3}a?) bui/i\n            ], [MODEL, [VENDOR, 'OPPO'], [TYPE, TABLET]], [\n\n            // Vivo\n            /vivo (\\w+)(?: bui|\\))/i,\n            /\\b(v[12]\\d{3}\\w?[at])(?: bui|;)/i\n            ], [MODEL, [VENDOR, 'Vivo'], [TYPE, MOBILE]], [\n\n            // Realme\n            /\\b(rmx[1-3]\\d{3})(?: bui|;|\\))/i\n            ], [MODEL, [VENDOR, 'Realme'], [TYPE, MOBILE]], [\n\n            // Motorola\n            /\\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\\b[\\w ]+build\\//i,\n            /\\bmot(?:orola)?[- ](\\w*)/i,\n            /((?:moto[\\w\\(\\) ]+|xt\\d{3,4}|nexus 6)(?= bui|\\)))/i\n            ], [MODEL, [VENDOR, MOTOROLA], [TYPE, MOBILE]], [\n            /\\b(mz60\\d|xoom[2 ]{0,2}) build\\//i\n            ], [MODEL, [VENDOR, MOTOROLA], [TYPE, TABLET]], [\n\n            // LG\n            /((?=lg)?[vl]k\\-?\\d{3}) bui| 3\\.[-\\w; ]{10}lg?-([06cv9]{3,4})/i\n            ], [MODEL, [VENDOR, LG], [TYPE, TABLET]], [\n            /(lm(?:-?f100[nv]?|-[\\w\\.]+)(?= bui|\\))|nexus [45])/i,\n            /\\blg[-e;\\/ ]+((?!browser|netcast|android tv)\\w+)/i,\n            /\\blg-?([\\d\\w]+) bui/i\n            ], [MODEL, [VENDOR, LG], [TYPE, MOBILE]], [\n\n            // Lenovo\n            /(ideatab[-\\w ]+)/i,\n            /lenovo ?(s[56]000[-\\w]+|tab(?:[\\w ]+)|yt[-\\d\\w]{6}|tb[-\\d\\w]{6})/i\n            ], [MODEL, [VENDOR, 'Lenovo'], [TYPE, TABLET]], [\n\n            // Nokia\n            /(?:maemo|nokia).*(n900|lumia \\d+)/i,\n            /nokia[-_ ]?([-\\w\\.]*)/i\n            ], [[MODEL, /_/g, ' '], [VENDOR, 'Nokia'], [TYPE, MOBILE]], [\n\n            // Google\n            /(pixel c)\\b/i                                                      // Google Pixel C\n            ], [MODEL, [VENDOR, GOOGLE], [TYPE, TABLET]], [\n            /droid.+; (pixel[\\daxl ]{0,6})(?: bui|\\))/i                         // Google Pixel\n            ], [MODEL, [VENDOR, GOOGLE], [TYPE, MOBILE]], [\n\n            // Sony\n            /droid.+; (a?\\d[0-2]{2}so|[c-g]\\d{4}|so[-gl]\\w+|xq-a\\w[4-7][12])(?= bui|\\).+chrome\\/(?![1-6]{0,1}\\d\\.))/i\n            ], [MODEL, [VENDOR, SONY], [TYPE, MOBILE]], [\n            /sony tablet [ps]/i,\n            /\\b(?:sony)?sgp\\w+(?: bui|\\))/i\n            ], [[MODEL, 'Xperia Tablet'], [VENDOR, SONY], [TYPE, TABLET]], [\n\n            // OnePlus\n            / (kb2005|in20[12]5|be20[12][59])\\b/i,\n            /(?:one)?(?:plus)? (a\\d0\\d\\d)(?: b|\\))/i\n            ], [MODEL, [VENDOR, 'OnePlus'], [TYPE, MOBILE]], [\n\n            // Amazon\n            /(alexa)webm/i,\n            /(kf[a-z]{2}wi|aeo(?!bc)\\w\\w)( bui|\\))/i,                           // Kindle Fire without Silk / Echo Show\n            /(kf[a-z]+)( bui|\\)).+silk\\//i                                      // Kindle Fire HD\n            ], [MODEL, [VENDOR, AMAZON], [TYPE, TABLET]], [\n            /((?:sd|kf)[0349hijorstuw]+)( bui|\\)).+silk\\//i                     // Fire Phone\n            ], [[MODEL, /(.+)/g, 'Fire Phone $1'], [VENDOR, AMAZON], [TYPE, MOBILE]], [\n\n            // BlackBerry\n            /(playbook);[-\\w\\),; ]+(rim)/i                                      // BlackBerry PlayBook\n            ], [MODEL, VENDOR, [TYPE, TABLET]], [\n            /\\b((?:bb[a-f]|st[hv])100-\\d)/i,\n            /\\(bb10; (\\w+)/i                                                    // BlackBerry 10\n            ], [MODEL, [VENDOR, BLACKBERRY], [TYPE, MOBILE]], [\n\n            // Asus\n            /(?:\\b|asus_)(transfo[prime ]{4,10} \\w+|eeepc|slider \\w+|nexus 7|padfone|p00[cj])/i\n            ], [MODEL, [VENDOR, ASUS], [TYPE, TABLET]], [\n            / (z[bes]6[027][012][km][ls]|zenfone \\d\\w?)\\b/i\n            ], [MODEL, [VENDOR, ASUS], [TYPE, MOBILE]], [\n\n            // HTC\n            /(nexus 9)/i                                                        // HTC Nexus 9\n            ], [MODEL, [VENDOR, 'HTC'], [TYPE, TABLET]], [\n            /(htc)[-;_ ]{1,2}([\\w ]+(?=\\)| bui)|\\w+)/i,                         // HTC\n\n            // ZTE\n            /(zte)[- ]([\\w ]+?)(?: bui|\\/|\\))/i,\n            /(alcatel|geeksphone|nexian|panasonic(?!(?:;|\\.))|sony(?!-bra))[-_ ]?([-\\w]*)/i         // Alcatel/GeeksPhone/Nexian/Panasonic/Sony\n            ], [VENDOR, [MODEL, /_/g, ' '], [TYPE, MOBILE]], [\n\n            // TCL\n            /droid [\\w\\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\\w*(\\)| bui)/i\n            ], [MODEL, [VENDOR, 'TCL'], [TYPE, TABLET]], [\n\n            // itel\n            /(itel) ((\\w+))/i\n            ], [[VENDOR, lowerize], MODEL, [TYPE, strMapper, { 'tablet' : ['p10001l', 'w7001'], '*' : 'mobile' }]], [\n\n            // Acer\n            /droid.+; ([ab][1-7]-?[0178a]\\d\\d?)/i\n            ], [MODEL, [VENDOR, 'Acer'], [TYPE, TABLET]], [\n\n            // Meizu\n            /droid.+; (m[1-5] note) bui/i,\n            /\\bmz-([-\\w]{2,})/i\n            ], [MODEL, [VENDOR, 'Meizu'], [TYPE, MOBILE]], [\n                \n            // Ulefone\n            /; ((?:power )?armor(?:[\\w ]{0,8}))(?: bui|\\))/i\n            ], [MODEL, [VENDOR, 'Ulefone'], [TYPE, MOBILE]], [\n\n            // Energizer\n            /; (energy ?\\w+)(?: bui|\\))/i,\n            /; energizer ([\\w ]+)(?: bui|\\))/i\n            ], [MODEL, [VENDOR, 'Energizer'], [TYPE, MOBILE]], [\n\n            // Cat\n            /; cat (b35);/i,\n            /; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\\))/i\n            ], [MODEL, [VENDOR, 'Cat'], [TYPE, MOBILE]], [\n\n            // Smartfren\n            /((?:new )?andromax[\\w- ]+)(?: bui|\\))/i\n            ], [MODEL, [VENDOR, 'Smartfren'], [TYPE, MOBILE]], [\n\n            // Nothing\n            /droid.+; (a(?:015|06[35]|142p?))/i\n            ], [MODEL, [VENDOR, 'Nothing'], [TYPE, MOBILE]], [\n\n            // MIXED\n            /(blackberry|benq|palm(?=\\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\\w]*)/i,\n                                                                                // BlackBerry/BenQ/Palm/Sony-Ericsson/Acer/Asus/Dell/Meizu/Motorola/Polytron/Infinix/Tecno/Micromax/Advan\n            /; (imo) ((?!tab)[\\w ]+?)(?: bui|\\))/i,                             // IMO\n            /(hp) ([\\w ]+\\w)/i,                                                 // HP iPAQ\n            /(asus)-?(\\w+)/i,                                                   // Asus\n            /(microsoft); (lumia[\\w ]+)/i,                                      // Microsoft Lumia\n            /(lenovo)[-_ ]?([-\\w]+)/i,                                          // Lenovo\n            /(jolla)/i,                                                         // Jolla\n            /(oppo) ?([\\w ]+) bui/i                                             // OPPO\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n\n            /(imo) (tab \\w+)/i,                                                 // IMO\n            /(kobo)\\s(ereader|touch)/i,                                         // Kobo\n            /(archos) (gamepad2?)/i,                                            // Archos\n            /(hp).+(touchpad(?!.+tablet)|tablet)/i,                             // HP TouchPad\n            /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\n            /(nook)[\\w ]+build\\/(\\w+)/i,                                        // Nook\n            /(dell) (strea[kpr\\d ]*[\\dko])/i,                                   // Dell Streak\n            /(le[- ]+pan)[- ]+(\\w{1,9}) bui/i,                                  // Le Pan Tablets\n            /(trinity)[- ]*(t\\d{3}) bui/i,                                      // Trinity Tablets\n            /(gigaset)[- ]+(q\\w{1,9}) bui/i,                                    // Gigaset Tablets\n            /(vodafone) ([\\w ]+)(?:\\)| bui)/i                                   // Vodafone\n            ], [VENDOR, MODEL, [TYPE, TABLET]], [\n\n            /(surface duo)/i                                                    // Surface Duo\n            ], [MODEL, [VENDOR, MICROSOFT], [TYPE, TABLET]], [\n            /droid [\\d\\.]+; (fp\\du?)(?: b|\\))/i                                 // Fairphone\n            ], [MODEL, [VENDOR, 'Fairphone'], [TYPE, MOBILE]], [\n            /(u304aa)/i                                                         // AT&T\n            ], [MODEL, [VENDOR, 'AT&T'], [TYPE, MOBILE]], [\n            /\\bsie-(\\w*)/i                                                      // Siemens\n            ], [MODEL, [VENDOR, 'Siemens'], [TYPE, MOBILE]], [\n            /\\b(rct\\w+) b/i                                                     // RCA Tablets\n            ], [MODEL, [VENDOR, 'RCA'], [TYPE, TABLET]], [\n            /\\b(venue[\\d ]{2,7}) b/i                                            // Dell Venue Tablets\n            ], [MODEL, [VENDOR, 'Dell'], [TYPE, TABLET]], [\n            /\\b(q(?:mv|ta)\\w+) b/i                                              // Verizon Tablet\n            ], [MODEL, [VENDOR, 'Verizon'], [TYPE, TABLET]], [\n            /\\b(?:barnes[& ]+noble |bn[rt])([\\w\\+ ]*) b/i                       // Barnes & Noble Tablet\n            ], [MODEL, [VENDOR, 'Barnes & Noble'], [TYPE, TABLET]], [\n            /\\b(tm\\d{3}\\w+) b/i\n            ], [MODEL, [VENDOR, 'NuVision'], [TYPE, TABLET]], [\n            /\\b(k88) b/i                                                        // ZTE K Series Tablet\n            ], [MODEL, [VENDOR, 'ZTE'], [TYPE, TABLET]], [\n            /\\b(nx\\d{3}j) b/i                                                   // ZTE Nubia\n            ], [MODEL, [VENDOR, 'ZTE'], [TYPE, MOBILE]], [\n            /\\b(gen\\d{3}) b.+49h/i                                              // Swiss GEN Mobile\n            ], [MODEL, [VENDOR, 'Swiss'], [TYPE, MOBILE]], [\n            /\\b(zur\\d{3}) b/i                                                   // Swiss ZUR Tablet\n            ], [MODEL, [VENDOR, 'Swiss'], [TYPE, TABLET]], [\n            /\\b((zeki)?tb.*\\b) b/i                                              // Zeki Tablets\n            ], [MODEL, [VENDOR, 'Zeki'], [TYPE, TABLET]], [\n            /\\b([yr]\\d{2}) b/i,\n            /\\b(dragon[- ]+touch |dt)(\\w{5}) b/i                                // Dragon Touch Tablet\n            ], [[VENDOR, 'Dragon Touch'], MODEL, [TYPE, TABLET]], [\n            /\\b(ns-?\\w{0,9}) b/i                                                // Insignia Tablets\n            ], [MODEL, [VENDOR, 'Insignia'], [TYPE, TABLET]], [\n            /\\b((nxa|next)-?\\w{0,9}) b/i                                        // NextBook Tablets\n            ], [MODEL, [VENDOR, 'NextBook'], [TYPE, TABLET]], [\n            /\\b(xtreme\\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i                  // Voice Xtreme Phones\n            ], [[VENDOR, 'Voice'], MODEL, [TYPE, MOBILE]], [\n            /\\b(lvtel\\-)?(v1[12]) b/i                                           // LvTel Phones\n            ], [[VENDOR, 'LvTel'], MODEL, [TYPE, MOBILE]], [\n            /\\b(ph-1) /i                                                        // Essential PH-1\n            ], [MODEL, [VENDOR, 'Essential'], [TYPE, MOBILE]], [\n            /\\b(v(100md|700na|7011|917g).*\\b) b/i                               // Envizen Tablets\n            ], [MODEL, [VENDOR, 'Envizen'], [TYPE, TABLET]], [\n            /\\b(trio[-\\w\\. ]+) b/i                                              // MachSpeed Tablets\n            ], [MODEL, [VENDOR, 'MachSpeed'], [TYPE, TABLET]], [\n            /\\btu_(1491) b/i                                                    // Rotor Tablets\n            ], [MODEL, [VENDOR, 'Rotor'], [TYPE, TABLET]], [\n            /(shield[\\w ]+) b/i                                                 // Nvidia Shield Tablets\n            ], [MODEL, [VENDOR, 'Nvidia'], [TYPE, TABLET]], [\n            /(sprint) (\\w+)/i                                                   // Sprint Phones\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n            /(kin\\.[onetw]{3})/i                                                // Microsoft Kin\n            ], [[MODEL, /\\./g, ' '], [VENDOR, MICROSOFT], [TYPE, MOBILE]], [\n            /droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\\)/i             // Zebra\n            ], [MODEL, [VENDOR, ZEBRA], [TYPE, TABLET]], [\n            /droid.+; (ec30|ps20|tc[2-8]\\d[kx])\\)/i\n            ], [MODEL, [VENDOR, ZEBRA], [TYPE, MOBILE]], [\n\n            ///////////////////\n            // SMARTTVS\n            ///////////////////\n\n            /smart-tv.+(samsung)/i                                              // Samsung\n            ], [VENDOR, [TYPE, SMARTTV]], [\n            /hbbtv.+maple;(\\d+)/i\n            ], [[MODEL, /^/, 'SmartTV'], [VENDOR, SAMSUNG], [TYPE, SMARTTV]], [\n            /(nux; netcast.+smarttv|lg (netcast\\.tv-201\\d|android tv))/i        // LG SmartTV\n            ], [[VENDOR, LG], [TYPE, SMARTTV]], [\n            /(apple) ?tv/i                                                      // Apple TV\n            ], [VENDOR, [MODEL, APPLE+' TV'], [TYPE, SMARTTV]], [\n            /crkey/i                                                            // Google Chromecast\n            ], [[MODEL, CHROME+'cast'], [VENDOR, GOOGLE], [TYPE, SMARTTV]], [\n            /droid.+aft(\\w+)( bui|\\))/i                                         // Fire TV\n            ], [MODEL, [VENDOR, AMAZON], [TYPE, SMARTTV]], [\n            /\\(dtv[\\);].+(aquos)/i,\n            /(aquos-tv[\\w ]+)\\)/i                                               // Sharp\n            ], [MODEL, [VENDOR, SHARP], [TYPE, SMARTTV]],[\n            /(bravia[\\w ]+)( bui|\\))/i                                              // Sony\n            ], [MODEL, [VENDOR, SONY], [TYPE, SMARTTV]], [\n            /(mitv-\\w{5}) bui/i                                                 // Xiaomi\n            ], [MODEL, [VENDOR, XIAOMI], [TYPE, SMARTTV]], [\n            /Hbbtv.*(technisat) (.*);/i                                         // TechniSAT\n            ], [VENDOR, MODEL, [TYPE, SMARTTV]], [\n            /\\b(roku)[\\dx]*[\\)\\/]((?:dvp-)?[\\d\\.]*)/i,                          // Roku\n            /hbbtv\\/\\d+\\.\\d+\\.\\d+ +\\([\\w\\+ ]*; *([\\w\\d][^;]*);([^;]*)/i         // HbbTV devices\n            ], [[VENDOR, trim], [MODEL, trim], [TYPE, SMARTTV]], [\n            /\\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\\b/i                   // SmartTV from Unidentified Vendors\n            ], [[TYPE, SMARTTV]], [\n\n            ///////////////////\n            // CONSOLES\n            ///////////////////\n\n            /(ouya)/i,                                                          // Ouya\n            /(nintendo) ([wids3utch]+)/i                                        // Nintendo\n            ], [VENDOR, MODEL, [TYPE, CONSOLE]], [\n            /droid.+; (shield) bui/i                                            // Nvidia\n            ], [MODEL, [VENDOR, 'Nvidia'], [TYPE, CONSOLE]], [\n            /(playstation [345portablevi]+)/i                                   // Playstation\n            ], [MODEL, [VENDOR, SONY], [TYPE, CONSOLE]], [\n            /\\b(xbox(?: one)?(?!; xbox))[\\); ]/i                                // Microsoft Xbox\n            ], [MODEL, [VENDOR, MICROSOFT], [TYPE, CONSOLE]], [\n\n            ///////////////////\n            // WEARABLES\n            ///////////////////\n\n            /\\b(sm-[lr]\\d\\d[05][fnuw]?s?)\\b/i                                   // Samsung Galaxy Watch\n            ], [MODEL, [VENDOR, SAMSUNG], [TYPE, WEARABLE]], [\n            /((pebble))app/i                                                    // Pebble\n            ], [VENDOR, MODEL, [TYPE, WEARABLE]], [\n            /(watch)(?: ?os[,\\/]|\\d,\\d\\/)[\\d\\.]+/i                              // Apple Watch\n            ], [MODEL, [VENDOR, APPLE], [TYPE, WEARABLE]], [\n            /droid.+; (glass) \\d/i                                              // Google Glass\n            ], [MODEL, [VENDOR, GOOGLE], [TYPE, WEARABLE]], [\n            /droid.+; (wt63?0{2,3})\\)/i\n            ], [MODEL, [VENDOR, ZEBRA], [TYPE, WEARABLE]], [\n\n            ///////////////////\n            // XR\n            ///////////////////\n\n            /droid.+; (glass) \\d/i                                              // Google Glass\n            ], [MODEL, [VENDOR, GOOGLE], [TYPE, WEARABLE]], [\n            /(pico) (4|neo3(?: link|pro)?)/i                                    // Pico\n            ], [VENDOR, MODEL, [TYPE, WEARABLE]], [\n            /; (quest( \\d| pro)?)/i                                             // Oculus Quest\n            ], [MODEL, [VENDOR, FACEBOOK], [TYPE, WEARABLE]], [\n\n            ///////////////////\n            // EMBEDDED\n            ///////////////////\n\n            /(tesla)(?: qtcarbrowser|\\/[-\\w\\.]+)/i                              // Tesla\n            ], [VENDOR, [TYPE, EMBEDDED]], [\n            /(aeobc)\\b/i                                                        // Echo Dot\n            ], [MODEL, [VENDOR, AMAZON], [TYPE, EMBEDDED]], [\n\n            ////////////////////\n            // MIXED (GENERIC)\n            ///////////////////\n\n            /droid .+?; ([^;]+?)(?: bui|; wv\\)|\\) applew).+? mobile safari/i    // Android Phones from Unidentified Vendors\n            ], [MODEL, [TYPE, MOBILE]], [\n            /droid .+?; ([^;]+?)(?: bui|\\) applew).+?(?! mobile) safari/i       // Android Tablets from Unidentified Vendors\n            ], [MODEL, [TYPE, TABLET]], [\n            /\\b((tablet|tab)[;\\/]|focus\\/\\d(?!.+mobile))/i                      // Unidentifiable Tablet\n            ], [[TYPE, TABLET]], [\n            /(phone|mobile(?:[;\\/]| [ \\w\\/\\.]*safari)|pda(?=.+windows ce))/i    // Unidentifiable Mobile\n            ], [[TYPE, MOBILE]], [\n            /(android[-\\w\\. ]{0,9});.+buil/i                                    // Generic Android Device\n            ], [MODEL, [VENDOR, 'Generic']]\n        ],\n\n        engine : [[\n\n            /windows.+ edge\\/([\\w\\.]+)/i                                       // EdgeHTML\n            ], [VERSION, [NAME, EDGE+'HTML']], [\n\n            /(arkweb)\\/([\\w\\.]+)/i                                              // ArkWeb\n            ], [NAME, VERSION], [\n\n            /webkit\\/537\\.36.+chrome\\/(?!27)([\\w\\.]+)/i                         // Blink\n            ], [VERSION, [NAME, 'Blink']], [\n\n            /(presto)\\/([\\w\\.]+)/i,                                             // Presto\n            /(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\\/([\\w\\.]+)/i, // WebKit/Trident/NetFront/NetSurf/Amaya/Lynx/w3m/Goanna/Servo\n            /ekioh(flow)\\/([\\w\\.]+)/i,                                          // Flow\n            /(khtml|tasman|links)[\\/ ]\\(?([\\w\\.]+)/i,                           // KHTML/Tasman/Links\n            /(icab)[\\/ ]([23]\\.[\\d\\.]+)/i,                                      // iCab\n            /\\b(libweb)/i\n            ], [NAME, VERSION], [\n\n            /rv\\:([\\w\\.]{1,9})\\b.+(gecko)/i                                     // Gecko\n            ], [VERSION, NAME]\n        ],\n\n        os : [[\n\n            // Windows\n            /microsoft (windows) (vista|xp)/i                                   // Windows (iTunes)\n            ], [NAME, VERSION], [\n            /(windows (?:phone(?: os)?|mobile))[\\/ ]?([\\d\\.\\w ]*)/i             // Windows Phone\n            ], [NAME, [VERSION, strMapper, windowsVersionMap]], [\n            /windows nt 6\\.2; (arm)/i,                                        // Windows RT\n            /windows[\\/ ]?([ntce\\d\\. ]+\\w)(?!.+xbox)/i,\n            /(?:win(?=3|9|n)|win 9x )([nt\\d\\.]+)/i\n            ], [[VERSION, strMapper, windowsVersionMap], [NAME, 'Windows']], [\n\n            // iOS/macOS\n            /ip[honead]{2,4}\\b(?:.*os ([\\w]+) like mac|; opera)/i,              // iOS\n            /(?:ios;fbsv\\/|iphone.+ios[\\/ ])([\\d\\.]+)/i,\n            /cfnetwork\\/.+darwin/i\n            ], [[VERSION, /_/g, '.'], [NAME, 'iOS']], [\n            /(mac os x) ?([\\w\\. ]*)/i,\n            /(macintosh|mac_powerpc\\b)(?!.+haiku)/i                             // Mac OS\n            ], [[NAME, MAC_OS], [VERSION, /_/g, '.']], [\n\n            // Mobile OSes\n            /droid ([\\w\\.]+)\\b.+(android[- ]x86|harmonyos)/i                    // Android-x86/HarmonyOS\n            ], [VERSION, NAME], [                                               // Android/WebOS/QNX/Bada/RIM/Maemo/MeeGo/Sailfish OS/OpenHarmony\n            /(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish|openharmony)[-\\/ ]?([\\w\\.]*)/i,\n            /(blackberry)\\w*\\/([\\w\\.]*)/i,                                      // Blackberry\n            /(tizen|kaios)[\\/ ]([\\w\\.]+)/i,                                     // Tizen/KaiOS\n            /\\((series40);/i                                                    // Series 40\n            ], [NAME, VERSION], [\n            /\\(bb(10);/i                                                        // BlackBerry 10\n            ], [VERSION, [NAME, BLACKBERRY]], [\n            /(?:symbian ?os|symbos|s60(?=;)|series60)[-\\/ ]?([\\w\\.]*)/i         // Symbian\n            ], [VERSION, [NAME, 'Symbian']], [\n            /mozilla\\/[\\d\\.]+ \\((?:mobile|tablet|tv|mobile; [\\w ]+); rv:.+ gecko\\/([\\w\\.]+)/i // Firefox OS\n            ], [VERSION, [NAME, FIREFOX+' OS']], [\n            /web0s;.+rt(tv)/i,\n            /\\b(?:hp)?wos(?:browser)?\\/([\\w\\.]+)/i                              // WebOS\n            ], [VERSION, [NAME, 'webOS']], [\n            /watch(?: ?os[,\\/]|\\d,\\d\\/)([\\d\\.]+)/i                              // watchOS\n            ], [VERSION, [NAME, 'watchOS']], [\n\n            // Google Chromecast\n            /crkey\\/([\\d\\.]+)/i                                                 // Google Chromecast\n            ], [VERSION, [NAME, CHROME+'cast']], [\n            /(cros) [\\w]+(?:\\)| ([\\w\\.]+)\\b)/i                                  // Chromium OS\n            ], [[NAME, CHROMIUM_OS], VERSION],[\n\n            // Smart TVs\n            /panasonic;(viera)/i,                                               // Panasonic Viera\n            /(netrange)mmh/i,                                                   // Netrange\n            /(nettv)\\/(\\d+\\.[\\w\\.]+)/i,                                         // NetTV\n\n            // Console\n            /(nintendo|playstation) ([wids345portablevuch]+)/i,                 // Nintendo/Playstation\n            /(xbox); +xbox ([^\\);]+)/i,                                         // Microsoft Xbox (360, One, X, S, Series X, Series S)\n\n            // Other\n            /\\b(joli|palm)\\b ?(?:os)?\\/?([\\w\\.]*)/i,                            // Joli/Palm\n            /(mint)[\\/\\(\\) ]?(\\w*)/i,                                           // Mint\n            /(mageia|vectorlinux)[; ]/i,                                        // Mageia/VectorLinux\n            /([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\\/ ]?(?!chrom|package)([-\\w\\.]*)/i,\n                                                                                // Ubuntu/Debian/SUSE/Gentoo/Arch/Slackware/Fedora/Mandriva/CentOS/PCLinuxOS/RedHat/Zenwalk/Linpus/Raspbian/Plan9/Minix/RISCOS/Contiki/Deepin/Manjaro/elementary/Sabayon/Linspire\n            /(hurd|linux) ?([\\w\\.]*)/i,                                         // Hurd/Linux\n            /(gnu) ?([\\w\\.]*)/i,                                                // GNU\n            /\\b([-frentopcghs]{0,5}bsd|dragonfly)[\\/ ]?(?!amd|[ix346]{1,2}86)([\\w\\.]*)/i, // FreeBSD/NetBSD/OpenBSD/PC-BSD/GhostBSD/DragonFly\n            /(haiku) (\\w+)/i                                                    // Haiku\n            ], [NAME, VERSION], [\n            /(sunos) ?([\\w\\.\\d]*)/i                                             // Solaris\n            ], [[NAME, 'Solaris'], VERSION], [\n            /((?:open)?solaris)[-\\/ ]?([\\w\\.]*)/i,                              // Solaris\n            /(aix) ((\\d)(?=\\.|\\)| )[\\w\\.])*/i,                                  // AIX\n            /\\b(beos|os\\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i, // BeOS/OS2/AmigaOS/MorphOS/OpenVMS/Fuchsia/HP-UX/SerenityOS\n            /(unix) ?([\\w\\.]*)/i                                                // UNIX\n            ], [NAME, VERSION]\n        ]\n    };\n\n    /////////////////\n    // Constructor\n    ////////////////\n\n    var UAParser = function (ua, extensions) {\n\n        if (typeof ua === OBJ_TYPE) {\n            extensions = ua;\n            ua = undefined;\n        }\n\n        if (!(this instanceof UAParser)) {\n            return new UAParser(ua, extensions).getResult();\n        }\n\n        var _navigator = (typeof window !== UNDEF_TYPE && window.navigator) ? window.navigator : undefined;\n        var _ua = ua || ((_navigator && _navigator.userAgent) ? _navigator.userAgent : EMPTY);\n        var _uach = (_navigator && _navigator.userAgentData) ? _navigator.userAgentData : undefined;\n        var _rgxmap = extensions ? extend(regexes, extensions) : regexes;\n        var _isSelfNav = _navigator && _navigator.userAgent == _ua;\n\n        this.getBrowser = function () {\n            var _browser = {};\n            _browser[NAME] = undefined;\n            _browser[VERSION] = undefined;\n            rgxMapper.call(_browser, _ua, _rgxmap.browser);\n            _browser[MAJOR] = majorize(_browser[VERSION]);\n            // Brave-specific detection\n            if (_isSelfNav && _navigator && _navigator.brave && typeof _navigator.brave.isBrave == FUNC_TYPE) {\n                _browser[NAME] = 'Brave';\n            }\n            return _browser;\n        };\n        this.getCPU = function () {\n            var _cpu = {};\n            _cpu[ARCHITECTURE] = undefined;\n            rgxMapper.call(_cpu, _ua, _rgxmap.cpu);\n            return _cpu;\n        };\n        this.getDevice = function () {\n            var _device = {};\n            _device[VENDOR] = undefined;\n            _device[MODEL] = undefined;\n            _device[TYPE] = undefined;\n            rgxMapper.call(_device, _ua, _rgxmap.device);\n            if (_isSelfNav && !_device[TYPE] && _uach && _uach.mobile) {\n                _device[TYPE] = MOBILE;\n            }\n            // iPadOS-specific detection: identified as Mac, but has some iOS-only properties\n            if (_isSelfNav && _device[MODEL] == 'Macintosh' && _navigator && typeof _navigator.standalone !== UNDEF_TYPE && _navigator.maxTouchPoints && _navigator.maxTouchPoints > 2) {\n                _device[MODEL] = 'iPad';\n                _device[TYPE] = TABLET;\n            }\n            return _device;\n        };\n        this.getEngine = function () {\n            var _engine = {};\n            _engine[NAME] = undefined;\n            _engine[VERSION] = undefined;\n            rgxMapper.call(_engine, _ua, _rgxmap.engine);\n            return _engine;\n        };\n        this.getOS = function () {\n            var _os = {};\n            _os[NAME] = undefined;\n            _os[VERSION] = undefined;\n            rgxMapper.call(_os, _ua, _rgxmap.os);\n            if (_isSelfNav && !_os[NAME] && _uach && _uach.platform && _uach.platform != 'Unknown') {\n                _os[NAME] = _uach.platform  \n                                    .replace(/chrome os/i, CHROMIUM_OS)\n                                    .replace(/macos/i, MAC_OS);           // backward compatibility\n            }\n            return _os;\n        };\n        this.getResult = function () {\n            return {\n                ua      : this.getUA(),\n                browser : this.getBrowser(),\n                engine  : this.getEngine(),\n                os      : this.getOS(),\n                device  : this.getDevice(),\n                cpu     : this.getCPU()\n            };\n        };\n        this.getUA = function () {\n            return _ua;\n        };\n        this.setUA = function (ua) {\n            _ua = (typeof ua === STR_TYPE && ua.length > UA_MAX_LENGTH) ? trim(ua, UA_MAX_LENGTH) : ua;\n            return this;\n        };\n        this.setUA(_ua);\n        return this;\n    };\n\n    UAParser.VERSION = LIBVERSION;\n    UAParser.BROWSER =  enumerize([NAME, VERSION, MAJOR]);\n    UAParser.CPU = enumerize([ARCHITECTURE]);\n    UAParser.DEVICE = enumerize([MODEL, VENDOR, TYPE, CONSOLE, MOBILE, SMARTTV, TABLET, WEARABLE, EMBEDDED]);\n    UAParser.ENGINE = UAParser.OS = enumerize([NAME, VERSION]);\n\n    ///////////\n    // Export\n    //////////\n\n    // check js environment\n    if (typeof(exports) !== UNDEF_TYPE) {\n        // nodejs env\n        if (typeof module !== UNDEF_TYPE && module.exports) {\n            exports = module.exports = UAParser;\n        }\n        exports.UAParser = UAParser;\n    } else {\n        // requirejs env (optional)\n        if (typeof(define) === FUNC_TYPE && define.amd) {\n            define(function () {\n                return UAParser;\n            });\n        } else if (typeof window !== UNDEF_TYPE) {\n            // browser env\n            window.UAParser = UAParser;\n        }\n    }\n\n    // jQuery/Zepto specific (optional)\n    // Note:\n    //   In AMD env the global scope should be kept clean, but jQuery is an exception.\n    //   jQuery always exports to global scope, unless jQuery.noConflict(true) is used,\n    //   and we should catch that.\n    var $ = typeof window !== UNDEF_TYPE && (window.jQuery || window.Zepto);\n    if ($ && !$.ua) {\n        var parser = new UAParser();\n        $.ua = parser.getResult();\n        $.ua.get = function () {\n            return parser.getUA();\n        };\n        $.ua.set = function (ua) {\n            parser.setUA(ua);\n            var result = parser.getResult();\n            for (var prop in result) {\n                $.ua[prop] = result[prop];\n            }\n        };\n    }\n\n})(typeof window === 'object' ? window : this);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__7781__;","module.exports = __WEBPACK_EXTERNAL_MODULE__8398__;","module.exports = __WEBPACK_EXTERNAL_MODULE__8531__;","import { LogLevel } from '@grafana/faro-web-sdk';\n\nimport { getFaro } from './faro/faro';\nimport { getEnvironment, type Environment } from './getEnvironment';\n\nexport type ErrorContext = Record<string, string>;\n\n/**\n * Logger class that handles logging to both console and Grafana Faro.\n *\n * This class provides a unified logging interface that:\n * - Logs to console in non-production environments\n * - Sends logs to Faro for remote monitoring and error tracking\n * - Supports different log levels (trace, debug, info, log, warn, error)\n * - Handles error contexts for better error tracking\n *\n * Used throughout the application for consistent logging and error reporting.\n */\n\nclass Logger {\n  #environment: Environment | null;\n\n  constructor() {\n    this.#environment = getEnvironment();\n  }\n\n  #callConsole(methodName: 'trace' | 'debug' | 'info' | 'log' | 'warn' | 'error', args: any[]) {\n    // silence console in production\n    if (this.#environment !== 'prod') {\n      // eslint-disable-next-line no-console, no-restricted-syntax\n      console[methodName](...args);\n    }\n  }\n\n  trace() {\n    this.#callConsole('trace', []);\n\n    getFaro()?.api.pushLog([], {\n      level: LogLevel.TRACE,\n    });\n  }\n\n  debug(...args: any) {\n    this.#callConsole('debug', args);\n\n    getFaro()?.api.pushLog(args, {\n      level: LogLevel.DEBUG,\n    });\n  }\n\n  info(...args: any) {\n    this.#callConsole('info', args);\n\n    getFaro()?.api.pushLog(args, {\n      level: LogLevel.INFO,\n    });\n  }\n\n  log(...args: any) {\n    this.#callConsole('log', args);\n\n    getFaro()?.api.pushLog(args, {\n      level: LogLevel.LOG,\n    });\n  }\n\n  warn(...args: any) {\n    this.#callConsole('warn', args);\n\n    getFaro()?.api.pushLog(args, {\n      level: LogLevel.WARN,\n    });\n  }\n\n  error(error: Error, context?: ErrorContext) {\n    this.#callConsole('error', [error]);\n\n    if (context) {\n      this.#callConsole('error', ['Error context', context]);\n    }\n\n    // does not report an error, but an exception ;)\n    getFaro()?.api.pushError(error, {\n      context,\n    });\n  }\n}\n\nexport const logger = new Logger();\n","import pluginJson from '../../plugin.json';\n\nexport const PLUGIN_ID = pluginJson.id;\nexport const PLUGIN_BASE_URL = `/a/${pluginJson.id}`;\n","export var TransportItemType;\n(function (TransportItemType) {\n    TransportItemType[\"EXCEPTION\"] = \"exception\";\n    TransportItemType[\"LOG\"] = \"log\";\n    TransportItemType[\"MEASUREMENT\"] = \"measurement\";\n    TransportItemType[\"TRACE\"] = \"trace\";\n    TransportItemType[\"EVENT\"] = \"event\";\n})(TransportItemType || (TransportItemType = {}));\nexport const transportItemTypeToBodyKey = {\n    [TransportItemType.EXCEPTION]: 'exceptions',\n    [TransportItemType.LOG]: 'logs',\n    [TransportItemType.MEASUREMENT]: 'measurements',\n    [TransportItemType.TRACE]: 'traces',\n    [TransportItemType.EVENT]: 'events',\n};\n//# sourceMappingURL=const.js.map","export function isTypeof(value, type) {\n    return typeof value === type;\n}\nexport function isToString(value, type) {\n    return Object.prototype.toString.call(value) === `[object ${type}]`;\n}\nexport function isInstanceOf(value, reference) {\n    try {\n        return value instanceof reference;\n    }\n    catch (_err) {\n        return false;\n    }\n}\nexport const isUndefined = ((value) => isTypeof(value, 'undefined'));\nexport const isNull = ((value) => isTypeof(value, 'null'));\nexport const isString = ((value) => isTypeof(value, 'string'));\nexport const isNumber = ((value) => (isTypeof(value, 'number') && !isNaN(value)) || isTypeof(value, 'bigint'));\nexport const isInt = ((value) => isNumber(value) && Number.isInteger(value));\nexport const isBoolean = ((value) => isTypeof(value, 'boolean'));\nexport const isSymbol = ((value) => isTypeof(value, 'symbol'));\nexport const isObject = ((value) => !isNull(value) && isTypeof(value, 'object'));\nexport const isFunction = ((value) => isTypeof(value, 'function'));\nexport const isArray = ((value) => isToString(value, 'Array'));\nexport const isRegExp = ((value) => isToString(value, 'RegExp'));\nexport const isThenable = ((value) => isFunction(value === null || value === void 0 ? void 0 : value.then));\nexport const isPrimitive = ((value) => !isObject(value) && !isFunction(value));\nexport const isEventDefined = typeof Event !== 'undefined';\nexport const isEvent = ((value) => isEventDefined && isInstanceOf(value, Event));\nexport const isErrorDefined = typeof Error !== 'undefined';\nexport const isError = ((value) => isErrorDefined && isInstanceOf(value, Error));\nexport const isErrorEvent = ((value) => isToString(value, 'ErrorEvent'));\nexport const isDomError = ((value) => isToString(value, 'DOMError'));\nexport const isDomException = ((value) => isToString(value, 'DOMException'));\nexport const isElementDefined = typeof Element !== 'undefined';\nexport const isElement = ((value) => isElementDefined && isInstanceOf(value, Element));\nexport const isMapDefined = typeof Map !== 'undefined';\nexport const isMap = ((value) => isMapDefined && isInstanceOf(value, Map));\nexport const isSyntheticEvent = ((value) => isObject(value) &&\n    'nativeEvent' in value &&\n    'preventDefault' in value &&\n    'stopPropagation' in value);\nexport function isEmpty(value) {\n    if (value == null) {\n        return true;\n    }\n    if (isArray(value) || isString(value)) {\n        return value.length === 0;\n    }\n    if (isObject(value)) {\n        return Object.keys(value).length === 0;\n    }\n    return false;\n}\n//# sourceMappingURL=is.js.map","import { isObject } from './is';\nexport function getCircularDependencyReplacer() {\n    const valueSeen = new WeakSet();\n    return function (_key, value) {\n        if (isObject(value) && value !== null) {\n            if (valueSeen.has(value)) {\n                return null;\n            }\n            valueSeen.add(value);\n        }\n        return value;\n    };\n}\nexport function stringifyExternalJson(json = {}) {\n    return JSON.stringify(json !== null && json !== void 0 ? json : {}, getCircularDependencyReplacer());\n}\nexport function stringifyObjectValues(obj = {}) {\n    const o = {};\n    for (const [key, value] of Object.entries(obj)) {\n        o[key] = isObject(value) && value !== null ? stringifyExternalJson(value) : String(value);\n    }\n    return o;\n}\n//# sourceMappingURL=json.js.map","export function dateNow() {\n    return Date.now();\n}\nexport function getCurrentTimestamp() {\n    return new Date().toISOString();\n}\nexport function timestampToIsoString(value) {\n    return new Date(value).toISOString();\n}\n//# sourceMappingURL=date.js.map","import { isArray, isObject, isTypeof } from './is';\n// This function was inspired by fast-deep-equal\n// fast-deep-equal has issues with Rollup and also it checks for some edge cases that we don't need\nexport function deepEqual(a, b) {\n    if (a === b) {\n        return true;\n    }\n    // Using isTypeOf instead of isNumber as isNumber also checks against NaN\n    if (isTypeof(a, 'number') && isNaN(a)) {\n        return isTypeof(b, 'number') && isNaN(b);\n    }\n    const aIsArray = isArray(a);\n    const bIsArray = isArray(b);\n    if (aIsArray !== bIsArray) {\n        return false;\n    }\n    if (aIsArray && bIsArray) {\n        const length = a.length;\n        if (length !== b.length) {\n            return false;\n        }\n        for (let idx = length; idx-- !== 0;) {\n            if (!deepEqual(a[idx], b[idx])) {\n                return false;\n            }\n        }\n        return true;\n    }\n    const aIsObject = isObject(a);\n    const bIsObject = isObject(b);\n    if (aIsObject !== bIsObject) {\n        return false;\n    }\n    if (a && b && aIsObject && bIsObject) {\n        const aKeys = Object.keys(a);\n        const bKeys = Object.keys(b);\n        const aLength = aKeys.length;\n        const bLength = bKeys.length;\n        if (aLength !== bLength) {\n            return false;\n        }\n        for (let aKey of aKeys) {\n            if (!bKeys.includes(aKey)) {\n                return false;\n            }\n        }\n        for (let aKey of aKeys) {\n            if (!deepEqual(a[aKey], b[aKey])) {\n                return false;\n            }\n        }\n        return true;\n    }\n    return false;\n}\n//# sourceMappingURL=deepEqual.js.map","export class Observable {\n    constructor() {\n        this.subscribers = [];\n    }\n    subscribe(subscriber) {\n        this.subscribers.push(subscriber);\n        return {\n            unsubscribe: () => this.unsubscribe(subscriber),\n        };\n    }\n    unsubscribe(subscriber) {\n        this.subscribers = this.subscribers.filter((sub) => sub !== subscriber);\n    }\n    notify(value) {\n        this.subscribers.forEach((subscriber) => subscriber(value));\n    }\n    first() {\n        const result = new Observable();\n        const internalSubscriber = (data) => {\n            result.notify(data);\n            subscription.unsubscribe();\n        };\n        const subscription = this.subscribe(internalSubscriber);\n        const resultUnsubscribeFn = result.unsubscribe.bind(result);\n        return this.withUnsubscribeOverride(result, resultUnsubscribeFn, internalSubscriber);\n    }\n    takeWhile(predicate) {\n        const result = new Observable();\n        const internalSubscriber = (value) => {\n            if (predicate(value)) {\n                result.notify(value);\n            }\n            else {\n                result.unsubscribe(internalSubscriber);\n            }\n        };\n        this.subscribe(internalSubscriber);\n        const resultUnsubscribeFn = result.unsubscribe.bind(result);\n        return this.withUnsubscribeOverride(result, resultUnsubscribeFn, internalSubscriber);\n    }\n    filter(predicate) {\n        const result = new Observable();\n        const internalSubscriber = (value) => {\n            if (predicate(value)) {\n                result.notify(value);\n            }\n        };\n        this.subscribe(internalSubscriber);\n        const resultUnsubscribeFn = result.unsubscribe.bind(result);\n        return this.withUnsubscribeOverride(result, resultUnsubscribeFn, internalSubscriber);\n    }\n    merge(...observables) {\n        const mergerObservable = new Observable();\n        const subscriptions = [];\n        observables.forEach((observable) => {\n            const subscription = observable.subscribe((value) => {\n                mergerObservable.notify(value);\n            });\n            subscriptions.push(subscription);\n        });\n        const originalUnsubscribeAll = mergerObservable.unsubscribeAll.bind(mergerObservable);\n        mergerObservable.unsubscribe = () => {\n            subscriptions.forEach((subscription) => subscription.unsubscribe());\n            originalUnsubscribeAll();\n        };\n        return mergerObservable;\n    }\n    withUnsubscribeOverride(observable, resultUnsubscribeFn, internalSubscriber) {\n        observable.unsubscribe = (subscriber) => {\n            resultUnsubscribeFn(subscriber);\n            this.unsubscribe(internalSubscriber);\n        };\n        return observable;\n    }\n    unsubscribeAll() {\n        this.subscribers = [];\n    }\n}\n//# sourceMappingURL=reactive.js.map","export const userActionStartByApiCallEventName = 'faroApiCall';\nexport const userActionStart = 'user_action_start';\nexport const UserActionImportance = {\n    Normal: 'normal',\n    Critical: 'critical',\n};\nexport const userActionEventName = 'faro.user.action';\n//# sourceMappingURL=const.js.map","import {} from '../../transports';\nimport { userActionStartByApiCallEventName } from './const';\nexport var UserActionState;\n(function (UserActionState) {\n    UserActionState[UserActionState[\"Started\"] = 0] = \"Started\";\n    UserActionState[UserActionState[\"Halted\"] = 1] = \"Halted\";\n    UserActionState[UserActionState[\"Cancelled\"] = 2] = \"Cancelled\";\n    UserActionState[UserActionState[\"Ended\"] = 3] = \"Ended\";\n})(UserActionState || (UserActionState = {}));\n//# sourceMappingURL=types.js.map","// This does not uses isUndefined method because it will throw an error in non-browser environments\nexport const globalObject = (typeof globalThis !== 'undefined'\n    ? globalThis\n    : typeof global !== 'undefined'\n        ? global\n        : typeof self !== 'undefined'\n            ? self\n            : undefined);\n//# sourceMappingURL=globalObject.js.map","export const internalGlobalObjectKey = '_faroInternal';\n//# sourceMappingURL=const.js.map","import { setFaroOnGlobalObject } from './faroGlobalObject';\nimport { setInternalFaroOnGlobalObject } from './internalFaroGlobalObject';\nexport let faro = {};\nexport function registerFaro(unpatchedConsole, internalLogger, config, metas, transports, api, instrumentations) {\n    internalLogger.debug('Initializing Faro');\n    faro = {\n        api,\n        config,\n        instrumentations,\n        internalLogger,\n        metas,\n        pause: transports.pause,\n        transports,\n        unpatchedConsole,\n        unpause: transports.unpause,\n    };\n    setInternalFaroOnGlobalObject(faro);\n    setFaroOnGlobalObject(faro);\n    return faro;\n}\n//# sourceMappingURL=registerFaro.js.map","import { globalObject } from '../globalObject';\nimport { internalGlobalObjectKey } from './const';\nexport function getInternalFromGlobalObject() {\n    return globalObject[internalGlobalObjectKey];\n}\nexport function setInternalFaroOnGlobalObject(faro) {\n    if (!faro.config.isolate) {\n        faro.internalLogger.debug('Registering internal Faro instance on global object');\n        Object.defineProperty(globalObject, internalGlobalObjectKey, {\n            configurable: false,\n            enumerable: false,\n            writable: false,\n            value: faro,\n        });\n    }\n    else {\n        faro.internalLogger.debug('Skipping registering internal Faro instance on global object');\n    }\n}\nexport function isInternalFaroOnGlobalObject() {\n    return internalGlobalObjectKey in globalObject;\n}\n//# sourceMappingURL=internalFaroGlobalObject.js.map","import { globalObject } from '../globalObject';\nexport function setFaroOnGlobalObject(faro) {\n    if (!faro.config.preventGlobalExposure) {\n        faro.internalLogger.debug(`Registering public faro reference in the global scope using \"${faro.config.globalObjectKey}\" key`);\n        if (faro.config.globalObjectKey in globalObject) {\n            faro.internalLogger.warn(`Skipping global registration due to key \"${faro.config.globalObjectKey}\" being used already. Please set \"globalObjectKey\" to something else or set \"preventGlobalExposure\" to \"true\"`);\n            return;\n        }\n        Object.defineProperty(globalObject, faro.config.globalObjectKey, {\n            configurable: false,\n            writable: false,\n            value: faro,\n        });\n    }\n    else {\n        faro.internalLogger.debug('Skipping registering public Faro instance in the global scope');\n    }\n}\n//# sourceMappingURL=faroGlobalObject.js.map","const alphabet = 'abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ0123456789';\nexport function genShortID(length = 10) {\n    return Array.from(Array(length))\n        .map(() => alphabet[Math.floor(Math.random() * alphabet.length)])\n        .join('');\n}\n//# sourceMappingURL=shortId.js.map","import { isFunction } from '../utils/is';\nexport class ItemBuffer {\n    constructor() {\n        this.buffer = [];\n    }\n    addItem(item) {\n        this.buffer.push(item);\n    }\n    flushBuffer(cb) {\n        if (isFunction(cb)) {\n            for (const item of this.buffer) {\n                cb(item);\n            }\n        }\n        this.buffer.length = 0;\n    }\n    size() {\n        return this.buffer.length;\n    }\n}\n//# sourceMappingURL=ItemBuffer.js.map","import { faro } from '../../sdk/registerFaro';\nimport { TransportItemType } from '../../transports';\nimport { dateNow, genShortID, Observable, stringifyObjectValues } from '../../utils';\nimport { ItemBuffer } from '../ItemBuffer';\nimport {} from '../measurements';\nimport {} from '../types';\nimport { userActionEventName, UserActionImportance } from './const';\nimport { UserActionState } from './types';\nexport default class UserAction extends Observable {\n    constructor({ name, parentId, trigger, transports, attributes, trackUserActionsExcludeItem, importance = UserActionImportance.Normal, }) {\n        super();\n        this.name = name;\n        this.attributes = attributes;\n        this.id = genShortID();\n        this.trigger = trigger;\n        this.parentId = parentId !== null && parentId !== void 0 ? parentId : this.id;\n        this.trackUserActionsExcludeItem = trackUserActionsExcludeItem;\n        this.importance = importance;\n        this._itemBuffer = new ItemBuffer();\n        this._transports = transports;\n        this._state = UserActionState.Started;\n        this._start();\n    }\n    addItem(item) {\n        if (this._state === UserActionState.Started) {\n            this._itemBuffer.addItem(item);\n            return true;\n        }\n        return false;\n    }\n    _start() {\n        this._state = UserActionState.Started;\n        if (this._state === UserActionState.Started) {\n            this.startTime = dateNow();\n        }\n    }\n    halt() {\n        if (this._state !== UserActionState.Started) {\n            return;\n        }\n        this._state = UserActionState.Halted;\n        this.notify(this._state);\n    }\n    cancel() {\n        if (this._state === UserActionState.Started) {\n            // Empty the buffer\n            this._itemBuffer.flushBuffer();\n        }\n        this._state = UserActionState.Cancelled;\n        this.notify(this._state);\n    }\n    end() {\n        if (this._state === UserActionState.Cancelled) {\n            return;\n        }\n        const endTime = dateNow();\n        const duration = endTime - this.startTime;\n        this._state = UserActionState.Ended;\n        this._itemBuffer.flushBuffer((item) => {\n            if (isExcludeFromUserAction(item, this.trackUserActionsExcludeItem)) {\n                this._transports.execute(item);\n                return;\n            }\n            const userActionItem = Object.assign(Object.assign({}, item), { payload: Object.assign(Object.assign({}, item.payload), { action: {\n                        parentId: this.id,\n                        name: this.name,\n                    } }) });\n            this._transports.execute(userActionItem);\n        });\n        this._state = UserActionState.Ended;\n        this.notify(this._state);\n        faro.api.pushEvent(userActionEventName, Object.assign({ userActionName: this.name, userActionStartTime: this.startTime.toString(), userActionEndTime: endTime.toString(), userActionDuration: duration.toString(), userActionTrigger: this.trigger, userActionImportance: this.importance }, stringifyObjectValues(this.attributes)), undefined, {\n            timestampOverwriteMs: this.startTime,\n            customPayloadTransformer: (payload) => {\n                payload.action = {\n                    id: this.id,\n                    name: this.name,\n                };\n                return payload;\n            },\n        });\n    }\n    getState() {\n        return this._state;\n    }\n}\nfunction isExcludeFromUserAction(item, trackUserActionsExcludeItem) {\n    return ((trackUserActionsExcludeItem === null || trackUserActionsExcludeItem === void 0 ? void 0 : trackUserActionsExcludeItem(item)) ||\n        (item.type === TransportItemType.MEASUREMENT && item.payload.type === 'web-vitals'));\n}\n//# sourceMappingURL=userAction.js.map","import {} from '../..';\nimport { Observable } from '../../utils/reactive';\nimport { UserActionImportance, userActionStart, userActionStartByApiCallEventName } from './const';\nimport { UserActionState, } from './types';\nimport UserAction from './userAction';\nexport const userActionsMessageBus = new Observable();\nexport function initializeUserActionsAPI({ transports, internalLogger, config, }) {\n    var _a;\n    const trackUserActionsExcludeItem = (_a = config.userActionsInstrumentation) === null || _a === void 0 ? void 0 : _a.excludeItem;\n    // Currently running user action. It can be in either started or halted\n    // state\n    let activeUserAction;\n    // If there is a an action already running, return undefined to indicate\n    // we were not able to create one.\n    const startUserAction = (name, attributes, options) => {\n        const currentRunningUserAction = getActiveUserAction();\n        if (currentRunningUserAction === undefined) {\n            const userAction = new UserAction({\n                name,\n                transports,\n                attributes,\n                trigger: (options === null || options === void 0 ? void 0 : options.triggerName) || userActionStartByApiCallEventName,\n                importance: (options === null || options === void 0 ? void 0 : options.importance) || UserActionImportance.Normal,\n                trackUserActionsExcludeItem,\n            });\n            userAction\n                .filter((v) => [UserActionState.Ended, UserActionState.Cancelled].includes(v))\n                .first()\n                .subscribe(() => {\n                activeUserAction = undefined;\n            });\n            userActionsMessageBus.notify({\n                type: userActionStart,\n                userAction: userAction,\n            });\n            activeUserAction = userAction;\n            return activeUserAction;\n        }\n        else {\n            internalLogger.error('Attempted to create a new user action while one is already running. This is not possible.');\n            return undefined;\n        }\n    };\n    const getActiveUserAction = () => {\n        return activeUserAction;\n    };\n    const api = {\n        startUserAction,\n        getActiveUserAction,\n    };\n    return api;\n}\n/**\n * Adds an item to the buffer associated with the given UserAction.\n * The item will only be added if the UserAction is in the Started state.\n * @param userAction The UserAction instance\n * @param item The item to add to the buffer\n * @returns {boolean} True if the item was added, false otherwise\n */\nexport function addItemToUserActionBuffer(userAction, item) {\n    if (!userAction) {\n        return false;\n    }\n    const state = userAction === null || userAction === void 0 ? void 0 : userAction.getState();\n    if (state !== UserActionState.Started) {\n        return false;\n    }\n    userAction.addItem(item);\n    return true;\n}\n//# sourceMappingURL=initialize.js.map","import { isObject, stringifyExternalJson } from '../../utils';\nexport const defaultExceptionType = 'Error';\nexport const defaultErrorArgsSerializer = (args) => {\n    return args\n        .map((arg) => {\n        if (isObject(arg)) {\n            return stringifyExternalJson(arg);\n        }\n        return String(arg);\n    })\n        .join(' ');\n};\n//# sourceMappingURL=const.js.map","import { TransportItemType } from '../../transports';\nimport { deepEqual, getCurrentTimestamp, isArray, isEmpty, isError, isNull, isObject, stringifyExternalJson, stringifyObjectValues, } from '../../utils';\nimport { timestampToIsoString } from '../../utils/date';\nimport { addItemToUserActionBuffer } from '../userActions/initialize';\nimport { shouldIgnoreEvent } from '../utils';\nimport { defaultExceptionType } from './const';\nlet stacktraceParser;\nexport function initializeExceptionsAPI({ internalLogger, config, metas, transports, tracesApi, userActionsApi, }) {\n    var _a;\n    internalLogger.debug('Initializing exceptions API');\n    let lastPayload = null;\n    stacktraceParser = (_a = config.parseStacktrace) !== null && _a !== void 0 ? _a : stacktraceParser;\n    const changeStacktraceParser = (newStacktraceParser) => {\n        internalLogger.debug('Changing stacktrace parser');\n        stacktraceParser = newStacktraceParser !== null && newStacktraceParser !== void 0 ? newStacktraceParser : stacktraceParser;\n    };\n    const getStacktraceParser = () => stacktraceParser;\n    const { ignoreErrors = [], preserveOriginalError } = config;\n    const pushError = (error, { skipDedupe, stackFrames, type, context, spanContext, timestampOverwriteMs, originalError } = {}) => {\n        if (isErrorIgnored(ignoreErrors, originalError !== null && originalError !== void 0 ? originalError : error)) {\n            return;\n        }\n        try {\n            const ctx = stringifyObjectValues(Object.assign(Object.assign({}, parseCause(originalError !== null && originalError !== void 0 ? originalError : error)), (context !== null && context !== void 0 ? context : {})));\n            const item = {\n                meta: metas.value,\n                payload: Object.assign(Object.assign({ type: type || error.name || defaultExceptionType, value: error.message, timestamp: timestampOverwriteMs ? timestampToIsoString(timestampOverwriteMs) : getCurrentTimestamp(), trace: spanContext\n                        ? {\n                            trace_id: spanContext.traceId,\n                            span_id: spanContext.spanId,\n                        }\n                        : tracesApi.getTraceContext() }, (isEmpty(ctx) ? {} : { context: ctx })), (preserveOriginalError ? { originalError } : {})),\n                type: TransportItemType.EXCEPTION,\n            };\n            stackFrames = stackFrames !== null && stackFrames !== void 0 ? stackFrames : (error.stack ? stacktraceParser === null || stacktraceParser === void 0 ? void 0 : stacktraceParser(error).frames : undefined);\n            if (stackFrames === null || stackFrames === void 0 ? void 0 : stackFrames.length) {\n                item.payload.stacktrace = {\n                    frames: stackFrames,\n                };\n            }\n            const testingPayload = {\n                type: item.payload.type,\n                value: item.payload.value,\n                stackTrace: item.payload.stacktrace,\n                context: item.payload.context,\n            };\n            if (!skipDedupe && config.dedupe && !isNull(lastPayload) && deepEqual(testingPayload, lastPayload)) {\n                internalLogger.debug('Skipping error push because it is the same as the last one\\n', item.payload);\n                return;\n            }\n            lastPayload = testingPayload;\n            internalLogger.debug('Pushing exception\\n', item);\n            if (!addItemToUserActionBuffer(userActionsApi.getActiveUserAction(), item)) {\n                transports.execute(item);\n            }\n        }\n        catch (err) {\n            internalLogger.error('Error pushing event', err);\n        }\n    };\n    changeStacktraceParser(config.parseStacktrace);\n    return {\n        changeStacktraceParser,\n        getStacktraceParser,\n        pushError,\n    };\n}\nfunction parseCause(error) {\n    let cause = error.cause;\n    if (isError(cause)) {\n        cause = error.cause.toString();\n        // typeof operator on null returns \"object\". This is a well-known quirk in JavaScript and is considered a bug that cannot be fixed due to backward compatibility issues.\n        // MDN: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/typeof#typeof_null\n    }\n    else if (cause !== null && (isObject(error.cause) || isArray(error.cause))) {\n        cause = stringifyExternalJson(error.cause);\n    }\n    else if (cause != null) {\n        cause = error.cause.toString();\n    }\n    return cause == null ? {} : { cause };\n}\nfunction isErrorIgnored(ignoreErrors, error) {\n    const { message, name, stack } = error;\n    return shouldIgnoreEvent(ignoreErrors, message + ' ' + name + ' ' + stack);\n}\n//# sourceMappingURL=initialize.js.map","import { isString } from '../utils/is';\nexport function shouldIgnoreEvent(patterns, msg) {\n    return patterns.some((pattern) => {\n        return isString(pattern) ? msg.includes(pattern) : !!msg.match(pattern);\n    });\n}\n//# sourceMappingURL=utils.js.map","export const defaultLogArgsSerializer = (args) => args\n    .map((arg) => {\n    try {\n        return String(arg);\n    }\n    catch (_err) {\n        return '';\n    }\n})\n    .join(' ');\n//# sourceMappingURL=const.js.map","import { initializeEventsAPI } from './events';\nimport { initializeExceptionsAPI } from './exceptions';\nimport { initializeLogsAPI } from './logs';\nimport { initializeMeasurementsAPI } from './measurements';\nimport { initializeMetaAPI } from './meta';\nimport { initializeTracesAPI } from './traces';\nimport { initializeUserActionsAPI } from './userActions';\nexport function initializeAPI(unpatchedConsole, internalLogger, config, metas, transports) {\n    internalLogger.debug('Initializing API');\n    const userActionsApi = initializeUserActionsAPI({\n        transports,\n        config,\n        internalLogger,\n    });\n    const tracesApi = initializeTracesAPI(unpatchedConsole, internalLogger, config, metas, transports);\n    const props = {\n        unpatchedConsole,\n        internalLogger,\n        userActionsApi,\n        config,\n        metas,\n        transports,\n        tracesApi,\n    };\n    return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({}, tracesApi), initializeExceptionsAPI(props)), initializeMetaAPI(props)), initializeLogsAPI(props)), initializeMeasurementsAPI(props)), initializeEventsAPI(props)), userActionsApi);\n}\n//# sourceMappingURL=initialize.js.map","import { TransportItemType } from '../../transports';\nexport function initializeTracesAPI(_unpatchedConsole, internalLogger, _config, metas, transports) {\n    internalLogger.debug('Initializing traces API');\n    let otel = undefined;\n    const initOTEL = (trace, context) => {\n        internalLogger.debug('Initializing OpenTelemetry');\n        otel = {\n            trace,\n            context,\n        };\n    };\n    const getTraceContext = () => {\n        const ctx = otel === null || otel === void 0 ? void 0 : otel.trace.getSpanContext(otel.context.active());\n        return !ctx\n            ? undefined\n            : {\n                trace_id: ctx.traceId,\n                span_id: ctx.spanId,\n            };\n    };\n    const pushTraces = (payload) => {\n        try {\n            const item = {\n                type: TransportItemType.TRACE,\n                payload,\n                meta: metas.value,\n            };\n            internalLogger.debug('Pushing trace\\n', item);\n            transports.execute(item);\n        }\n        catch (err) {\n            internalLogger.error('Error pushing trace\\n', err);\n        }\n    };\n    const getOTEL = () => otel;\n    const isOTELInitialized = () => !!otel;\n    return {\n        getOTEL,\n        getTraceContext,\n        initOTEL,\n        isOTELInitialized,\n        pushTraces,\n    };\n}\n//# sourceMappingURL=initialize.js.map","import { isEmpty, isString } from '../../utils/is';\nexport function initializeMetaAPI({ internalLogger, metas, }) {\n    internalLogger.debug('Initializing meta API');\n    let metaSession = undefined;\n    let metaUser = undefined;\n    let metaView = undefined;\n    let metaPage = undefined;\n    const setUser = (user) => {\n        if (metaUser) {\n            metas.remove(metaUser);\n        }\n        metaUser = {\n            user,\n        };\n        metas.add(metaUser);\n    };\n    const setSession = (session, options) => {\n        var _a;\n        const newOverrides = options === null || options === void 0 ? void 0 : options.overrides;\n        const overrides = newOverrides\n            ? {\n                overrides: Object.assign(Object.assign({}, (_a = metaSession === null || metaSession === void 0 ? void 0 : metaSession.session) === null || _a === void 0 ? void 0 : _a.overrides), newOverrides),\n            }\n            : {};\n        if (metaSession) {\n            metas.remove(metaSession);\n        }\n        metaSession = {\n            session: Object.assign(Object.assign({}, (isEmpty(session) ? undefined : session)), overrides),\n        };\n        metas.add(metaSession);\n    };\n    const getSession = () => metas.value.session;\n    const setView = (view, options) => {\n        var _a;\n        if (options === null || options === void 0 ? void 0 : options.overrides) {\n            setSession(getSession(), { overrides: options.overrides });\n        }\n        if (((_a = metaView === null || metaView === void 0 ? void 0 : metaView.view) === null || _a === void 0 ? void 0 : _a.name) === (view === null || view === void 0 ? void 0 : view.name)) {\n            return;\n        }\n        const previousView = metaView;\n        metaView = {\n            view,\n        };\n        metas.add(metaView);\n        if (previousView) {\n            metas.remove(previousView);\n        }\n    };\n    const getView = () => metas.value.view;\n    const setPage = (page) => {\n        var _a;\n        const pageMeta = isString(page)\n            ? Object.assign(Object.assign({}, ((_a = metaPage === null || metaPage === void 0 ? void 0 : metaPage.page) !== null && _a !== void 0 ? _a : getPage())), { id: page }) : page;\n        if (metaPage) {\n            metas.remove(metaPage);\n        }\n        metaPage = {\n            page: pageMeta,\n        };\n        metas.add(metaPage);\n    };\n    const getPage = () => metas.value.page;\n    return {\n        setUser,\n        resetUser: setUser,\n        setSession,\n        resetSession: setSession,\n        getSession,\n        setView,\n        getView,\n        setPage,\n        getPage,\n    };\n}\n//# sourceMappingURL=initialize.js.map","import { TransportItemType } from '../../transports';\nimport { deepEqual, defaultLogLevel, getCurrentTimestamp, isEmpty, isNull, stringifyObjectValues } from '../../utils';\nimport { timestampToIsoString } from '../../utils/date';\nimport { addItemToUserActionBuffer } from '../userActions/initialize';\nimport { defaultLogArgsSerializer } from './const';\nexport function initializeLogsAPI({ internalLogger, config, metas, transports, tracesApi, userActionsApi, }) {\n    var _a;\n    internalLogger.debug('Initializing logs API');\n    let lastPayload = null;\n    const logArgsSerializer = (_a = config.logArgsSerializer) !== null && _a !== void 0 ? _a : defaultLogArgsSerializer;\n    const pushLog = (args, { context, level, skipDedupe, spanContext, timestampOverwriteMs } = {}) => {\n        try {\n            const ctx = stringifyObjectValues(context);\n            const item = {\n                type: TransportItemType.LOG,\n                payload: {\n                    message: logArgsSerializer(args),\n                    level: level !== null && level !== void 0 ? level : defaultLogLevel,\n                    context: isEmpty(ctx) ? undefined : ctx,\n                    timestamp: timestampOverwriteMs ? timestampToIsoString(timestampOverwriteMs) : getCurrentTimestamp(),\n                    trace: spanContext\n                        ? {\n                            trace_id: spanContext.traceId,\n                            span_id: spanContext.spanId,\n                        }\n                        : tracesApi.getTraceContext(),\n                },\n                meta: metas.value,\n            };\n            const testingPayload = {\n                message: item.payload.message,\n                level: item.payload.level,\n                context: item.payload.context,\n            };\n            if (!skipDedupe && config.dedupe && !isNull(lastPayload) && deepEqual(testingPayload, lastPayload)) {\n                internalLogger.debug('Skipping log push because it is the same as the last one\\n', item.payload);\n                return;\n            }\n            lastPayload = testingPayload;\n            internalLogger.debug('Pushing log\\n', item);\n            if (!addItemToUserActionBuffer(userActionsApi.getActiveUserAction(), item)) {\n                transports.execute(item);\n            }\n        }\n        catch (err) {\n            internalLogger.error('Error pushing log\\n', err);\n        }\n    };\n    return {\n        pushLog,\n    };\n}\n//# sourceMappingURL=initialize.js.map","import { TransportItemType } from '../../transports';\nimport { deepEqual, getCurrentTimestamp, isEmpty, isNull, stringifyObjectValues } from '../../utils';\nimport { timestampToIsoString } from '../../utils/date';\nimport { addItemToUserActionBuffer } from '../userActions/initialize';\nexport function initializeMeasurementsAPI({ internalLogger, config, metas, transports, tracesApi, userActionsApi, }) {\n    internalLogger.debug('Initializing measurements API');\n    let lastPayload = null;\n    const pushMeasurement = (payload, { skipDedupe, context, spanContext, timestampOverwriteMs } = {}) => {\n        try {\n            const ctx = stringifyObjectValues(context);\n            const item = {\n                type: TransportItemType.MEASUREMENT,\n                payload: Object.assign(Object.assign({}, payload), { trace: spanContext\n                        ? {\n                            trace_id: spanContext.traceId,\n                            span_id: spanContext.spanId,\n                        }\n                        : tracesApi.getTraceContext(), timestamp: timestampOverwriteMs ? timestampToIsoString(timestampOverwriteMs) : getCurrentTimestamp(), context: isEmpty(ctx) ? undefined : ctx }),\n                meta: metas.value,\n            };\n            const testingPayload = {\n                type: item.payload.type,\n                values: item.payload.values,\n                context: item.payload.context,\n            };\n            if (!skipDedupe && config.dedupe && !isNull(lastPayload) && deepEqual(testingPayload, lastPayload)) {\n                internalLogger.debug('Skipping measurement push because it is the same as the last one\\n', item.payload);\n                return;\n            }\n            lastPayload = testingPayload;\n            internalLogger.debug('Pushing measurement\\n', item);\n            if (!addItemToUserActionBuffer(userActionsApi.getActiveUserAction(), item)) {\n                transports.execute(item);\n            }\n        }\n        catch (err) {\n            internalLogger.error('Error pushing measurement\\n', err);\n        }\n    };\n    return {\n        pushMeasurement,\n    };\n}\n//# sourceMappingURL=initialize.js.map","import { TransportItemType } from '../../transports';\nimport { deepEqual, getCurrentTimestamp, isEmpty, isNull, stringifyObjectValues } from '../../utils';\nimport { timestampToIsoString } from '../../utils/date';\nimport { addItemToUserActionBuffer } from '../userActions/initialize';\nexport function initializeEventsAPI({ internalLogger, config, metas, transports, tracesApi, userActionsApi, }) {\n    let lastPayload = null;\n    const pushEvent = (name, attributes, domain, { skipDedupe, spanContext, timestampOverwriteMs, customPayloadTransformer = (payload) => payload } = {}) => {\n        try {\n            const attrs = stringifyObjectValues(attributes);\n            const item = {\n                meta: metas.value,\n                payload: customPayloadTransformer({\n                    name,\n                    domain: domain !== null && domain !== void 0 ? domain : config.eventDomain,\n                    attributes: isEmpty(attrs) ? undefined : attrs,\n                    timestamp: timestampOverwriteMs ? timestampToIsoString(timestampOverwriteMs) : getCurrentTimestamp(),\n                    trace: spanContext\n                        ? {\n                            trace_id: spanContext.traceId,\n                            span_id: spanContext.spanId,\n                        }\n                        : tracesApi.getTraceContext(),\n                }),\n                type: TransportItemType.EVENT,\n            };\n            const testingPayload = {\n                name: item.payload.name,\n                attributes: item.payload.attributes,\n                domain: item.payload.domain,\n            };\n            if (!skipDedupe && config.dedupe && !isNull(lastPayload) && deepEqual(testingPayload, lastPayload)) {\n                internalLogger.debug('Skipping event push because it is the same as the last one\\n', item.payload);\n                return;\n            }\n            lastPayload = testingPayload;\n            internalLogger.debug('Pushing event\\n', item);\n            if (!addItemToUserActionBuffer(userActionsApi.getActiveUserAction(), item)) {\n                transports.execute(item);\n            }\n        }\n        catch (err) {\n            internalLogger.error('Error pushing event', err);\n        }\n    };\n    return {\n        pushEvent,\n    };\n}\n//# sourceMappingURL=initialize.js.map","export function noop() { }\n//# sourceMappingURL=noop.js.map","import { noop } from '../utils';\nexport var InternalLoggerLevel;\n(function (InternalLoggerLevel) {\n    InternalLoggerLevel[InternalLoggerLevel[\"OFF\"] = 0] = \"OFF\";\n    InternalLoggerLevel[InternalLoggerLevel[\"ERROR\"] = 1] = \"ERROR\";\n    InternalLoggerLevel[InternalLoggerLevel[\"WARN\"] = 2] = \"WARN\";\n    InternalLoggerLevel[InternalLoggerLevel[\"INFO\"] = 3] = \"INFO\";\n    InternalLoggerLevel[InternalLoggerLevel[\"VERBOSE\"] = 4] = \"VERBOSE\";\n})(InternalLoggerLevel || (InternalLoggerLevel = {}));\nexport const defaultInternalLoggerPrefix = 'Faro';\nexport const defaultInternalLogger = {\n    debug: noop,\n    error: noop,\n    info: noop,\n    prefix: defaultInternalLoggerPrefix,\n    warn: noop,\n};\nexport const defaultInternalLoggerLevel = InternalLoggerLevel.ERROR;\n//# sourceMappingURL=const.js.map","export const defaultUnpatchedConsole = Object.assign({}, console);\n//# sourceMappingURL=const.js.map","import { defaultUnpatchedConsole } from '../unpatchedConsole';\nimport { noop } from '../utils';\nimport { defaultInternalLogger, defaultInternalLoggerLevel, InternalLoggerLevel } from './const';\nexport function createInternalLogger(unpatchedConsole = defaultUnpatchedConsole, internalLoggerLevel = defaultInternalLoggerLevel) {\n    const internalLogger = defaultInternalLogger;\n    if (internalLoggerLevel > InternalLoggerLevel.OFF) {\n        internalLogger.error =\n            internalLoggerLevel >= InternalLoggerLevel.ERROR\n                ? function (...args) {\n                    unpatchedConsole.error(`${internalLogger.prefix}\\n`, ...args);\n                }\n                : noop;\n        internalLogger.warn =\n            internalLoggerLevel >= InternalLoggerLevel.WARN\n                ? function (...args) {\n                    unpatchedConsole.warn(`${internalLogger.prefix}\\n`, ...args);\n                }\n                : noop;\n        internalLogger.info =\n            internalLoggerLevel >= InternalLoggerLevel.INFO\n                ? function (...args) {\n                    unpatchedConsole.info(`${internalLogger.prefix}\\n`, ...args);\n                }\n                : noop;\n        internalLogger.debug =\n            internalLoggerLevel >= InternalLoggerLevel.VERBOSE\n                ? function (...args) {\n                    unpatchedConsole.debug(`${internalLogger.prefix}\\n`, ...args);\n                }\n                : noop;\n    }\n    return internalLogger;\n}\n//# sourceMappingURL=createInternalLogger.js.map","import { defaultInternalLogger } from './const';\nimport { createInternalLogger } from './createInternalLogger';\nexport let internalLogger = defaultInternalLogger;\nexport function initializeInternalLogger(unpatchedConsole, config) {\n    internalLogger = createInternalLogger(unpatchedConsole, config.internalLoggerLevel);\n    return internalLogger;\n}\n//# sourceMappingURL=initialize.js.map","// auto-generated by bin/genVersion.ts\nexport const VERSION = '2.0.2';\n//# sourceMappingURL=version.js.map","const DEFAULT_SEND_TIMEOUT_MS = 250;\nconst DEFAULT_BATCH_ITEM_LIMIT = 50;\nexport class BatchExecutor {\n    constructor(sendFn, options) {\n        var _a, _b;\n        this.signalBuffer = [];\n        this.itemLimit = (_a = options === null || options === void 0 ? void 0 : options.itemLimit) !== null && _a !== void 0 ? _a : DEFAULT_BATCH_ITEM_LIMIT;\n        this.sendTimeout = (_b = options === null || options === void 0 ? void 0 : options.sendTimeout) !== null && _b !== void 0 ? _b : DEFAULT_SEND_TIMEOUT_MS;\n        this.paused = (options === null || options === void 0 ? void 0 : options.paused) || false;\n        this.sendFn = sendFn;\n        this.flushInterval = -1;\n        if (!this.paused) {\n            this.start();\n        }\n        // Send batched/buffered data when user navigates to new page, switches or closes the tab, minimizes or closes the browser.\n        // If on mobile, it also sends data if user switches from the browser to a different app.\n        document.addEventListener('visibilitychange', () => {\n            if (document.visibilityState === 'hidden') {\n                this.flush();\n            }\n        });\n    }\n    addItem(item) {\n        if (this.paused) {\n            return;\n        }\n        this.signalBuffer.push(item);\n        if (this.signalBuffer.length >= this.itemLimit) {\n            this.flush();\n        }\n    }\n    start() {\n        this.paused = false;\n        if (this.sendTimeout > 0) {\n            this.flushInterval = window.setInterval(() => this.flush(), this.sendTimeout);\n        }\n    }\n    pause() {\n        this.paused = true;\n        clearInterval(this.flushInterval);\n    }\n    groupItems(items) {\n        const itemMap = new Map();\n        items.forEach((item) => {\n            const metaKey = JSON.stringify(item.meta);\n            let currentItems = itemMap.get(metaKey);\n            if (currentItems === undefined) {\n                currentItems = [item];\n            }\n            else {\n                currentItems = [...currentItems, item];\n            }\n            itemMap.set(metaKey, currentItems);\n        });\n        return Array.from(itemMap.values());\n    }\n    flush() {\n        if (this.paused || this.signalBuffer.length === 0) {\n            return;\n        }\n        const itemGroups = this.groupItems(this.signalBuffer);\n        itemGroups.forEach(this.sendFn);\n        this.signalBuffer = [];\n    }\n}\n//# sourceMappingURL=batchExecutor.js.map","import { BatchExecutor } from './batchExecutor';\nimport { TransportItemType } from './const';\nexport function initializeTransports(unpatchedConsole, internalLogger, config, metas) {\n    var _a;\n    internalLogger.debug('Initializing transports');\n    const transports = [];\n    let paused = config.paused;\n    let beforeSendHooks = [];\n    const add = (...newTransports) => {\n        internalLogger.debug('Adding transports');\n        newTransports.forEach((newTransport) => {\n            internalLogger.debug(`Adding \"${newTransport.name}\" transport`);\n            const exists = transports.some((existingTransport) => existingTransport === newTransport);\n            if (exists) {\n                internalLogger.warn(`Transport ${newTransport.name} is already added`);\n                return;\n            }\n            newTransport.unpatchedConsole = unpatchedConsole;\n            newTransport.internalLogger = internalLogger;\n            newTransport.config = config;\n            newTransport.metas = metas;\n            transports.push(newTransport);\n        });\n    };\n    const addBeforeSendHooks = (...newBeforeSendHooks) => {\n        internalLogger.debug('Adding beforeSendHooks\\n', beforeSendHooks);\n        newBeforeSendHooks.forEach((beforeSendHook) => {\n            if (beforeSendHook) {\n                beforeSendHooks.push(beforeSendHook);\n            }\n        });\n    };\n    const applyBeforeSendHooks = (items) => {\n        let filteredItems = items;\n        for (const hook of beforeSendHooks) {\n            const modified = filteredItems.map(hook).filter(Boolean);\n            if (modified.length === 0) {\n                return [];\n            }\n            filteredItems = sanitizeItems(modified, config);\n        }\n        return filteredItems;\n    };\n    const batchedSend = (items) => {\n        const filteredItems = applyBeforeSendHooks(items);\n        if (filteredItems.length === 0) {\n            return;\n        }\n        for (const transport of transports) {\n            internalLogger.debug(`Transporting item using ${transport.name}\\n`, filteredItems);\n            if (transport.isBatched()) {\n                transport.send(filteredItems);\n            }\n        }\n    };\n    const instantSend = (item) => {\n        var _a, _b;\n        // prevent all beforeSend hooks being executed twice if batching is enabled.\n        if (((_a = config.batching) === null || _a === void 0 ? void 0 : _a.enabled) && transports.every((transport) => transport.isBatched())) {\n            return;\n        }\n        const [filteredItem] = applyBeforeSendHooks([item]);\n        if (filteredItem === undefined) {\n            return;\n        }\n        for (const transport of transports) {\n            internalLogger.debug(`Transporting item using ${transport.name}\\n`, filteredItem);\n            if (!transport.isBatched()) {\n                transport.send(filteredItem);\n            }\n            else if (!((_b = config.batching) === null || _b === void 0 ? void 0 : _b.enabled)) {\n                transport.send([filteredItem]);\n            }\n        }\n    };\n    let batchExecutor;\n    if ((_a = config.batching) === null || _a === void 0 ? void 0 : _a.enabled) {\n        batchExecutor = new BatchExecutor(batchedSend, {\n            sendTimeout: config.batching.sendTimeout,\n            itemLimit: config.batching.itemLimit,\n            paused,\n        });\n    }\n    // Send a signal to the appropriate transports\n    //\n    // 1. If SDK is paused, early return\n    // 2. If batching is not enabled send the signal to all transports\n    //    instantly.\n    // 3i. If batching is enabled, enqueue the signal\n    // 3ii. Send the signal instantly to all un-batched transports\n    const execute = (item) => {\n        var _a;\n        if (paused) {\n            return;\n        }\n        if ((_a = config.batching) === null || _a === void 0 ? void 0 : _a.enabled) {\n            batchExecutor === null || batchExecutor === void 0 ? void 0 : batchExecutor.addItem(item);\n        }\n        instantSend(item);\n    };\n    const getBeforeSendHooks = () => [...beforeSendHooks];\n    const isPaused = () => paused;\n    const pause = () => {\n        internalLogger.debug('Pausing transports');\n        batchExecutor === null || batchExecutor === void 0 ? void 0 : batchExecutor.pause();\n        paused = true;\n    };\n    const remove = (...transportsToRemove) => {\n        internalLogger.debug('Removing transports');\n        transportsToRemove.forEach((transportToRemove) => {\n            internalLogger.debug(`Removing \"${transportToRemove.name}\" transport`);\n            const existingTransportIndex = transports.indexOf(transportToRemove);\n            if (existingTransportIndex === -1) {\n                internalLogger.warn(`Transport \"${transportToRemove.name}\" is not added`);\n                return;\n            }\n            transports.splice(existingTransportIndex, 1);\n        });\n    };\n    const removeBeforeSendHooks = (...beforeSendHooksToRemove) => {\n        beforeSendHooks.filter((beforeSendHook) => !beforeSendHooksToRemove.includes(beforeSendHook));\n    };\n    const unpause = () => {\n        internalLogger.debug('Unpausing transports');\n        batchExecutor === null || batchExecutor === void 0 ? void 0 : batchExecutor.start();\n        paused = false;\n    };\n    return {\n        add,\n        addBeforeSendHooks,\n        getBeforeSendHooks,\n        execute,\n        isPaused,\n        pause,\n        remove,\n        removeBeforeSendHooks,\n        get transports() {\n            return [...transports];\n        },\n        unpause,\n    };\n}\n/**\n * Removes the `payload.originalError` property from the provided `TransportItem[]` parameter.\n */\nfunction sanitizeItems(filteredItems, config) {\n    if (config.preserveOriginalError) {\n        for (const item of filteredItems) {\n            if (item.type === TransportItemType.EXCEPTION) {\n                delete item.payload.originalError;\n            }\n        }\n    }\n    return filteredItems;\n}\n//# sourceMappingURL=initialize.js.map","import { defaultUnpatchedConsole } from './const';\nexport let unpatchedConsole = defaultUnpatchedConsole;\nexport function initializeUnpatchedConsole(config) {\n    var _a;\n    unpatchedConsole = (_a = config.unpatchedConsole) !== null && _a !== void 0 ? _a : unpatchedConsole;\n    return unpatchedConsole;\n}\n//# sourceMappingURL=initialize.js.map","import { initializeAPI } from './api';\nimport { initializeInstrumentations, registerInitialInstrumentations } from './instrumentations';\nimport { initializeInternalLogger } from './internalLogger';\nimport { initializeMetas, registerInitialMetas } from './metas';\nimport { isInternalFaroOnGlobalObject, registerFaro } from './sdk';\nimport { initializeTransports, registerInitialTransports } from './transports';\nimport { initializeUnpatchedConsole } from './unpatchedConsole';\nexport function initializeFaro(config) {\n    const unpatchedConsole = initializeUnpatchedConsole(config);\n    const internalLogger = initializeInternalLogger(unpatchedConsole, config);\n    if (isInternalFaroOnGlobalObject() && !config.isolate) {\n        internalLogger.error('Faro is already registered. Either add instrumentations, transports etc. to the global faro instance or use the \"isolate\" property');\n        return undefined;\n    }\n    internalLogger.debug('Initializing');\n    // Initializing the APIs\n    const metas = initializeMetas(unpatchedConsole, internalLogger, config);\n    const transports = initializeTransports(unpatchedConsole, internalLogger, config, metas);\n    const api = initializeAPI(unpatchedConsole, internalLogger, config, metas, transports);\n    const instrumentations = initializeInstrumentations(unpatchedConsole, internalLogger, config, metas, transports, api);\n    const faro = registerFaro(unpatchedConsole, internalLogger, config, metas, transports, api, instrumentations);\n    // make sure Faro is initialized before registering default metas, instrumentations, transports etc.\n    registerInitialMetas(faro);\n    registerInitialTransports(faro);\n    registerInitialInstrumentations(faro);\n    return faro;\n}\n//# sourceMappingURL=initialize.js.map","import { isFunction } from '../utils';\nexport function initializeMetas(_unpatchedConsole, internalLogger, _config) {\n    let items = [];\n    let listeners = [];\n    const getValue = () => items.reduce((acc, item) => Object.assign(acc, isFunction(item) ? item() : item), {});\n    const notifyListeners = () => {\n        if (listeners.length) {\n            const value = getValue();\n            listeners.forEach((listener) => listener(value));\n        }\n    };\n    const add = (...newItems) => {\n        internalLogger.debug('Adding metas\\n', newItems);\n        items.push(...newItems);\n        notifyListeners();\n    };\n    const remove = (...itemsToRemove) => {\n        internalLogger.debug('Removing metas\\n', itemsToRemove);\n        items = items.filter((currentItem) => !itemsToRemove.includes(currentItem));\n        notifyListeners();\n    };\n    const addListener = (listener) => {\n        internalLogger.debug('Adding metas listener\\n', listener);\n        listeners.push(listener);\n    };\n    const removeListener = (listener) => {\n        internalLogger.debug('Removing metas listener\\n', listener);\n        listeners = listeners.filter((currentListener) => currentListener !== listener);\n    };\n    return {\n        add,\n        remove,\n        addListener,\n        removeListener,\n        get value() {\n            return getValue();\n        },\n    };\n}\n//# sourceMappingURL=initialize.js.map","export function initializeInstrumentations(unpatchedConsole, internalLogger, config, metas, transports, api) {\n    internalLogger.debug('Initializing instrumentations');\n    const instrumentations = [];\n    const add = (...newInstrumentations) => {\n        internalLogger.debug('Adding instrumentations');\n        newInstrumentations.forEach((newInstrumentation) => {\n            internalLogger.debug(`Adding \"${newInstrumentation.name}\" instrumentation`);\n            const exists = instrumentations.some((existingInstrumentation) => existingInstrumentation.name === newInstrumentation.name);\n            if (exists) {\n                internalLogger.warn(`Instrumentation ${newInstrumentation.name} is already added`);\n                return;\n            }\n            newInstrumentation.unpatchedConsole = unpatchedConsole;\n            newInstrumentation.internalLogger = internalLogger;\n            newInstrumentation.config = config;\n            newInstrumentation.metas = metas;\n            newInstrumentation.transports = transports;\n            newInstrumentation.api = api;\n            instrumentations.push(newInstrumentation);\n            newInstrumentation.initialize();\n        });\n    };\n    const remove = (...instrumentationsToRemove) => {\n        internalLogger.debug('Removing instrumentations');\n        instrumentationsToRemove.forEach((instrumentationToRemove) => {\n            var _a, _b;\n            internalLogger.debug(`Removing \"${instrumentationToRemove.name}\" instrumentation`);\n            const existingInstrumentationIndex = instrumentations.reduce((acc, existingInstrumentation, existingTransportIndex) => {\n                if (acc === null && existingInstrumentation.name === instrumentationToRemove.name) {\n                    return existingTransportIndex;\n                }\n                return null;\n            }, null);\n            if (existingInstrumentationIndex === null) {\n                internalLogger.warn(`Instrumentation \"${instrumentationToRemove.name}\" is not added`);\n                return;\n            }\n            (_b = (_a = instrumentations[existingInstrumentationIndex]).destroy) === null || _b === void 0 ? void 0 : _b.call(_a);\n            instrumentations.splice(existingInstrumentationIndex, 1);\n        });\n    };\n    return {\n        add,\n        get instrumentations() {\n            return [...instrumentations];\n        },\n        remove,\n    };\n}\n//# sourceMappingURL=initialize.js.map","import { getBundleId } from '../utils/sourceMaps';\nimport { VERSION } from '../version';\nexport function registerInitialMetas(faro) {\n    var _a, _b;\n    const initial = {\n        sdk: {\n            version: VERSION,\n        },\n        app: {\n            bundleId: faro.config.app.name && getBundleId(faro.config.app.name),\n        },\n    };\n    const session = (_a = faro.config.sessionTracking) === null || _a === void 0 ? void 0 : _a.session;\n    if (session) {\n        faro.api.setSession(session);\n    }\n    if (faro.config.app) {\n        initial.app = Object.assign(Object.assign({}, faro.config.app), initial.app);\n    }\n    if (faro.config.user) {\n        initial.user = faro.config.user;\n    }\n    if (faro.config.view) {\n        initial.view = faro.config.view;\n    }\n    faro.metas.add(initial, ...((_b = faro.config.metas) !== null && _b !== void 0 ? _b : []));\n}\n//# sourceMappingURL=registerInitial.js.map","import { globalObject } from '../globalObject';\nexport function getBundleId(appName) {\n    return globalObject === null || globalObject === void 0 ? void 0 : globalObject[`__faroBundleId_${appName}`];\n}\n//# sourceMappingURL=sourceMaps.js.map","export function registerInitialTransports(faro) {\n    faro.transports.add(...faro.config.transports);\n    faro.transports.addBeforeSendHooks(faro.config.beforeSend);\n}\n//# sourceMappingURL=registerInitial.js.map","export function registerInitialInstrumentations(faro) {\n    faro.instrumentations.add(...faro.config.instrumentations);\n}\n//# sourceMappingURL=registerInitial.js.map","export const defaultGlobalObjectKey = 'faro';\nexport const defaultBatchingConfig = {\n    enabled: true,\n    sendTimeout: 250,\n    itemLimit: 50,\n};\n//# sourceMappingURL=const.js.map","export const defaultEventDomain = 'browser';\n//# sourceMappingURL=consts.js.map","export const newLineString = '\\n';\nexport const evalString = 'eval';\nexport const unknownSymbolString = '?';\nexport const atString = '@';\nexport const webkitLineRegex = /^\\s*at (?:(?![a-z]+:\\/\\/)([^(]+?) ?\\((?:address at )?)?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\\/)?.*?)(?::(\\d+))?(?::(\\d+))?\\)?\\s*$/i;\nexport const webkitEvalRegex = /\\((\\S*)(?::(\\d+))(?::(\\d+))\\)/;\nexport const webkitEvalString = 'eval';\nexport const webkitAddressAtString = 'address at ';\nexport const webkitAddressAtStringLength = webkitAddressAtString.length;\nexport const firefoxLineRegex = /^\\s*(.*?)(?:\\((.*?)\\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|safari-extension|safari-web-extension|capacitor)?:\\/.*?|\\[native code]|[^@]*(?:bundle|\\d+\\.js)|\\/[\\w\\-. /=]+)(?::(\\d+))?(?::(\\d+))?\\s*$/i;\nexport const firefoxEvalRegex = /(\\S+) line (\\d+)(?: > eval line \\d+)* > eval/i;\nexport const firefoxEvalString = ' > eval';\nexport const safariExtensionString = 'safari-extension';\nexport const safariWebExtensionString = 'safari-web-extension';\nexport const reactMinifiedRegex = /Minified React error #\\d+;/i;\n//# sourceMappingURL=const.js.map","import { unknownSymbolString } from './const';\nexport function buildStackFrame(filename, func, lineno, colno) {\n    const stackFrame = {\n        filename: filename || document.location.href,\n        function: func || unknownSymbolString,\n    };\n    if (lineno !== undefined) {\n        stackFrame.lineno = lineno;\n    }\n    if (colno !== undefined) {\n        stackFrame.colno = colno;\n    }\n    return stackFrame;\n}\n//# sourceMappingURL=buildStackFrame.js.map","import { atString, safariExtensionString, safariWebExtensionString } from './const';\nexport function getDataFromSafariExtensions(func, filename) {\n    const isSafariExtension = func === null || func === void 0 ? void 0 : func.includes(safariExtensionString);\n    const isSafariWebExtension = !isSafariExtension && (func === null || func === void 0 ? void 0 : func.includes(safariWebExtensionString));\n    if (!isSafariExtension && !isSafariWebExtension) {\n        return [func, filename];\n    }\n    return [\n        (func === null || func === void 0 ? void 0 : func.includes(atString)) ? func.split(atString)[0] : func,\n        isSafariExtension ? `${safariExtensionString}:${filename}` : `${safariWebExtensionString}:${filename}`,\n    ];\n}\n//# sourceMappingURL=getDataFromSafariExtensions.js.map","import { isNumber } from '@grafana/faro-core';\nimport { buildStackFrame } from './buildStackFrame';\nimport { evalString, firefoxEvalRegex, firefoxEvalString, firefoxLineRegex, newLineString, reactMinifiedRegex, webkitAddressAtString, webkitAddressAtStringLength, webkitEvalRegex, webkitEvalString, webkitLineRegex, } from './const';\nimport { getDataFromSafariExtensions } from './getDataFromSafariExtensions';\nexport function getStackFramesFromError(error) {\n    let lines = [];\n    if (error.stacktrace) {\n        lines = error.stacktrace.split(newLineString).filter((_line, idx) => idx % 2 === 0);\n    }\n    else if (error.stack) {\n        lines = error.stack.split(newLineString);\n    }\n    const stackFrames = lines.reduce((acc, line, idx) => {\n        let parts;\n        let func;\n        let filename;\n        let lineno;\n        let colno;\n        if ((parts = webkitLineRegex.exec(line))) {\n            func = parts[1];\n            filename = parts[2];\n            lineno = parts[3];\n            colno = parts[4];\n            if (filename === null || filename === void 0 ? void 0 : filename.startsWith(webkitEvalString)) {\n                const submatch = webkitEvalRegex.exec(filename);\n                if (submatch) {\n                    filename = submatch[1];\n                    lineno = submatch[2];\n                    colno = submatch[3];\n                }\n            }\n            filename = (filename === null || filename === void 0 ? void 0 : filename.startsWith(webkitAddressAtString))\n                ? filename.substring(webkitAddressAtStringLength)\n                : filename;\n            [func, filename] = getDataFromSafariExtensions(func, filename);\n        }\n        else if ((parts = firefoxLineRegex.exec(line))) {\n            func = parts[1];\n            filename = parts[3];\n            lineno = parts[4];\n            colno = parts[5];\n            if (!!filename && filename.includes(firefoxEvalString)) {\n                const submatch = firefoxEvalRegex.exec(filename);\n                if (submatch) {\n                    func = func || evalString;\n                    filename = submatch[1];\n                    lineno = submatch[2];\n                }\n            }\n            else if (idx === 0 && !colno && isNumber(error.columnNumber)) {\n                colno = String(error.columnNumber + 1);\n            }\n            [func, filename] = getDataFromSafariExtensions(func, filename);\n        }\n        if (filename || func) {\n            acc.push(buildStackFrame(filename, func, lineno ? Number(lineno) : undefined, colno ? Number(colno) : undefined));\n        }\n        return acc;\n    }, []);\n    if (reactMinifiedRegex.test(error.message)) {\n        return stackFrames.slice(1);\n    }\n    return stackFrames;\n}\n//# sourceMappingURL=getStackFramesFromError.js.map","import { getStackFramesFromError } from './getStackFramesFromError';\nexport function parseStacktrace(error) {\n    return {\n        frames: getStackFramesFromError(error),\n    };\n}\n//# sourceMappingURL=parseStacktrace.js.map","export const STORAGE_KEY = 'com.grafana.faro.session';\nexport const SESSION_EXPIRATION_TIME = 4 * 60 * 60 * 1000; // hrs\nexport const SESSION_INACTIVITY_TIME = 15 * 60 * 1000; // minutes\nexport const STORAGE_UPDATE_DELAY = 1 * 1000; // seconds\nexport const MAX_SESSION_PERSISTENCE_TIME = SESSION_INACTIVITY_TIME;\nexport const defaultSessionTrackingConfig = {\n    enabled: true,\n    persistent: false,\n    maxSessionPersistenceTime: MAX_SESSION_PERSISTENCE_TIME,\n};\n//# sourceMappingURL=sessionConstants.js.map","export const userActionDataAttributeParsed = 'faroUserActionName';\nexport const userActionDataAttribute = 'data-faro-user-action-name';\nexport { MESSAGE_TYPE_DOM_MUTATION, MESSAGE_TYPE_HTTP_REQUEST_START, MESSAGE_TYPE_HTTP_REQUEST_END, } from '../_internal/monitors/const';\n//# sourceMappingURL=const.js.map","export const unknownString = 'unknown';\n//# sourceMappingURL=consts.js.map","import { UAParser } from 'ua-parser-js';\nimport { unknownString } from '@grafana/faro-core';\nexport const browserMeta = () => {\n    const parser = new UAParser();\n    const { name, version } = parser.getBrowser();\n    const { name: osName, version: osVersion } = parser.getOS();\n    const userAgent = parser.getUA();\n    const language = navigator.language;\n    const mobile = navigator.userAgent.includes('Mobi');\n    const brands = getBrands();\n    return {\n        browser: {\n            name: name !== null && name !== void 0 ? name : unknownString,\n            version: version !== null && version !== void 0 ? version : unknownString,\n            os: `${osName !== null && osName !== void 0 ? osName : unknownString} ${osVersion !== null && osVersion !== void 0 ? osVersion : unknownString}`,\n            userAgent: userAgent !== null && userAgent !== void 0 ? userAgent : unknownString,\n            language: language !== null && language !== void 0 ? language : unknownString,\n            mobile,\n            brands: brands !== null && brands !== void 0 ? brands : unknownString,\n            viewportWidth: `${window.innerWidth}`,\n            viewportHeight: `${window.innerHeight}`,\n        },\n    };\n    function getBrands() {\n        if (!name || !version) {\n            return undefined;\n        }\n        if ('userAgentData' in navigator && navigator.userAgentData) {\n            // userAgentData in experimental (only Chrome supports it) thus TS does not ship the respective type declarations\n            return navigator.userAgentData.brands;\n        }\n        return undefined;\n    }\n};\n//# sourceMappingURL=meta.js.map","export const k6Meta = () => {\n    const k6Properties = window.k6;\n    return {\n        k6: Object.assign({ \n            // we only add the k6 meta if Faro is running inside a k6 environment, so this is always true\n            isK6Browser: true }, ((k6Properties === null || k6Properties === void 0 ? void 0 : k6Properties.testRunId) && { testRunId: k6Properties === null || k6Properties === void 0 ? void 0 : k6Properties.testRunId })),\n    };\n};\n//# sourceMappingURL=meta.js.map","import { isFunction } from '@grafana/faro-core';\nlet currentHref;\nlet pageId;\nexport function createPageMeta({ generatePageId, initialPageMeta } = {}) {\n    const pageMeta = () => {\n        const locationHref = location.href;\n        if (isFunction(generatePageId) && currentHref !== locationHref) {\n            currentHref = locationHref;\n            pageId = generatePageId(location);\n        }\n        return {\n            page: Object.assign(Object.assign({ url: locationHref }, (pageId ? { id: pageId } : {})), initialPageMeta),\n        };\n    };\n    return pageMeta;\n}\n//# sourceMappingURL=meta.js.map","import { defaultInternalLogger } from '../internalLogger';\nimport { defaultUnpatchedConsole } from '../unpatchedConsole';\nexport class BaseExtension {\n    constructor() {\n        this.unpatchedConsole = defaultUnpatchedConsole;\n        this.internalLogger = defaultInternalLogger;\n        this.config = {};\n        this.metas = {};\n    }\n    logDebug(...args) {\n        this.internalLogger.debug(`${this.name}\\n`, ...args);\n    }\n    logInfo(...args) {\n        this.internalLogger.info(`${this.name}\\n`, ...args);\n    }\n    logWarn(...args) {\n        this.internalLogger.warn(`${this.name}\\n`, ...args);\n    }\n    logError(...args) {\n        this.internalLogger.error(`${this.name}\\n`, ...args);\n    }\n}\n//# sourceMappingURL=baseExtension.js.map","import { BaseExtension } from '../extensions';\nexport class BaseTransport extends BaseExtension {\n    isBatched() {\n        return false;\n    }\n    getIgnoreUrls() {\n        return [];\n    }\n}\n//# sourceMappingURL=base.js.map","import { TransportItemType, transportItemTypeToBodyKey } from './const';\nexport function mergeResourceSpans(traces, resourceSpans) {\n    var _a, _b;\n    if (resourceSpans === undefined) {\n        return traces;\n    }\n    if (traces === undefined) {\n        return {\n            resourceSpans,\n        };\n    }\n    const currentResource = (_a = traces.resourceSpans) === null || _a === void 0 ? void 0 : _a[0];\n    if (currentResource === undefined) {\n        return traces;\n    }\n    const currentSpans = (currentResource === null || currentResource === void 0 ? void 0 : currentResource.scopeSpans) || [];\n    const newSpans = ((_b = resourceSpans === null || resourceSpans === void 0 ? void 0 : resourceSpans[0]) === null || _b === void 0 ? void 0 : _b.scopeSpans) || [];\n    return Object.assign(Object.assign({}, traces), { resourceSpans: [\n            Object.assign(Object.assign({}, currentResource), { scopeSpans: [...currentSpans, ...newSpans] }),\n        ] });\n}\nexport function getTransportBody(item) {\n    let body = {\n        meta: {},\n    };\n    if (item[0] !== undefined) {\n        body.meta = item[0].meta;\n    }\n    item.forEach((currentItem) => {\n        switch (currentItem.type) {\n            case TransportItemType.LOG:\n            case TransportItemType.EVENT:\n            case TransportItemType.EXCEPTION:\n            case TransportItemType.MEASUREMENT: {\n                const bk = transportItemTypeToBodyKey[currentItem.type];\n                const signals = body[bk];\n                body = Object.assign(Object.assign({}, body), { [bk]: signals === undefined ? [currentItem.payload] : [...signals, currentItem.payload] });\n                break;\n            }\n            case TransportItemType.TRACE: {\n                body = Object.assign(Object.assign({}, body), { traces: mergeResourceSpans(body.traces, currentItem.payload.resourceSpans) });\n                break;\n            }\n        }\n    });\n    return body;\n}\n//# sourceMappingURL=utils.js.map","/**\n * Tail based throttle which caches the args of the last call and updates\n */\nexport function throttle(callback, delay) {\n    let pause = false;\n    let lastPending;\n    const timeoutBehavior = () => {\n        if (lastPending == null) {\n            pause = false;\n            return;\n        }\n        callback(...lastPending);\n        lastPending = null;\n        setTimeout(timeoutBehavior, delay);\n    };\n    return (...args) => {\n        if (pause) {\n            lastPending = args;\n            return;\n        }\n        callback(...args);\n        pause = true;\n        setTimeout(timeoutBehavior, delay);\n    };\n}\n//# sourceMappingURL=throttle.js.map","import { faro } from '@grafana/faro-core';\nexport const webStorageType = {\n    session: 'sessionStorage',\n    local: 'localStorage',\n};\n/**\n * Check if selected web storage mechanism is available.\n * @param type storage mechanism to test availability for.\n * @returns\n */\nexport function isWebStorageAvailable(type) {\n    var _a;\n    try {\n        let storage;\n        storage = window[type];\n        const testItem = '__faro_storage_test__';\n        storage.setItem(testItem, testItem);\n        storage.removeItem(testItem);\n        return true;\n    }\n    catch (error) {\n        // the above can throw\n        (_a = faro.internalLogger) === null || _a === void 0 ? void 0 : _a.info(`Web storage of type ${type} is not available. Reason: ${error}`);\n        return false;\n    }\n}\n/**\n * Get item from SessionStorage or LocalStorage.\n * @param key: the item key.\n * @param webStorageMechanism: wether the item shall be received form local storage or session storage. Defaults to local storage.\n */\nexport function getItem(key, webStorageMechanism) {\n    if (isWebStorageTypeAvailable(webStorageMechanism)) {\n        return window[webStorageMechanism].getItem(key);\n    }\n    return null;\n}\n/**\n * Store item in SessionStorage or LocalStorage.\n * @param key: the item key.\n * @param value: the item data.\n * @param webStorageMechanism: wether the item shall be received form local storage or session storage. Defaults to local storage.\n */\nexport function setItem(key, value, webStorageMechanism) {\n    if (isWebStorageTypeAvailable(webStorageMechanism)) {\n        try {\n            window[webStorageMechanism].setItem(key, value);\n        }\n        catch (_error) {\n            // do nothing\n        }\n    }\n}\n/**\n * Remove item from SessionStorage or LocalStorage.\n * @param key: the item key.\n * @param webStorageMechanism: wether the item shall be received form local storage or session storage. Defaults to local storage.\n */\nexport function removeItem(key, webStorageMechanism) {\n    if (isWebStorageTypeAvailable(webStorageMechanism)) {\n        window[webStorageMechanism].removeItem(key);\n    }\n}\nexport const isLocalStorageAvailable = isWebStorageAvailable(webStorageType.local);\nexport const isSessionStorageAvailable = isWebStorageAvailable(webStorageType.session);\nfunction isWebStorageTypeAvailable(webStorageMechanism) {\n    if (webStorageMechanism === webStorageType.local) {\n        return isLocalStorageAvailable;\n    }\n    if (webStorageMechanism === webStorageType.session) {\n        return isSessionStorageAvailable;\n    }\n    return false;\n}\n//# sourceMappingURL=webStorage.js.map","export const EVENT_CLICK = 'click';\nexport const EVENT_NAVIGATION = 'navigation';\nexport const EVENT_VIEW_CHANGED = 'view_changed';\nexport const EVENT_SESSION_START = 'session_start';\nexport const EVENT_SESSION_RESUME = 'session_resume';\nexport const EVENT_SESSION_EXTEND = 'session_extend';\nexport const EVENT_OVERRIDES_SERVICE_NAME = 'service_name_override';\nexport const EVENT_ROUTE_CHANGE = 'route_change';\n//# sourceMappingURL=semantic.js.map","import { faro } from '@grafana/faro-core';\nexport function isSampled() {\n    var _a, _b, _c;\n    const sendAllSignals = 1;\n    const sessionTracking = faro.config.sessionTracking;\n    let samplingRate = (_c = (_b = (_a = sessionTracking === null || sessionTracking === void 0 ? void 0 : sessionTracking.sampler) === null || _a === void 0 ? void 0 : _a.call(sessionTracking, { metas: faro.metas.value })) !== null && _b !== void 0 ? _b : sessionTracking === null || sessionTracking === void 0 ? void 0 : sessionTracking.samplingRate) !== null && _c !== void 0 ? _c : sendAllSignals;\n    if (typeof samplingRate !== 'number') {\n        const sendNoSignals = 0;\n        samplingRate = sendNoSignals;\n    }\n    return Math.random() < samplingRate;\n}\n//# sourceMappingURL=sampling.js.map","import { dateNow, deepEqual, EVENT_OVERRIDES_SERVICE_NAME, faro, genShortID, isEmpty } from '@grafana/faro-core';\nimport { isLocalStorageAvailable, isSessionStorageAvailable } from '../../../utils';\nimport { isSampled } from './sampling';\nimport { SESSION_EXPIRATION_TIME, SESSION_INACTIVITY_TIME } from './sessionConstants';\nexport function createUserSessionObject({ sessionId, started, lastActivity, isSampled = true, } = {}) {\n    var _a, _b;\n    const now = dateNow();\n    const generateSessionId = (_b = (_a = faro.config) === null || _a === void 0 ? void 0 : _a.sessionTracking) === null || _b === void 0 ? void 0 : _b.generateSessionId;\n    if (sessionId == null) {\n        sessionId = typeof generateSessionId === 'function' ? generateSessionId() : genShortID();\n    }\n    return {\n        sessionId,\n        lastActivity: lastActivity !== null && lastActivity !== void 0 ? lastActivity : now,\n        started: started !== null && started !== void 0 ? started : now,\n        isSampled: isSampled,\n    };\n}\nexport function isUserSessionValid(session) {\n    if (session == null) {\n        return false;\n    }\n    const now = dateNow();\n    const lifetimeValid = now - session.started < SESSION_EXPIRATION_TIME;\n    if (!lifetimeValid) {\n        return false;\n    }\n    const inactivityPeriodValid = now - session.lastActivity < SESSION_INACTIVITY_TIME;\n    return inactivityPeriodValid;\n}\nexport function getUserSessionUpdater({ fetchUserSession, storeUserSession, }) {\n    return function updateSession({ forceSessionExtend } = { forceSessionExtend: false }) {\n        var _a, _b, _c;\n        if (!fetchUserSession || !storeUserSession) {\n            return;\n        }\n        const sessionTrackingConfig = faro.config.sessionTracking;\n        const isPersistentSessions = sessionTrackingConfig === null || sessionTrackingConfig === void 0 ? void 0 : sessionTrackingConfig.persistent;\n        if ((isPersistentSessions && !isLocalStorageAvailable) || (!isPersistentSessions && !isSessionStorageAvailable)) {\n            return;\n        }\n        const sessionFromStorage = fetchUserSession();\n        if (forceSessionExtend === false && isUserSessionValid(sessionFromStorage)) {\n            storeUserSession(Object.assign(Object.assign({}, sessionFromStorage), { lastActivity: dateNow() }));\n        }\n        else {\n            let newSession = addSessionMetadataToNextSession(createUserSessionObject({ isSampled: isSampled() }), sessionFromStorage);\n            storeUserSession(newSession);\n            (_a = faro.api) === null || _a === void 0 ? void 0 : _a.setSession(newSession.sessionMeta);\n            (_b = sessionTrackingConfig === null || sessionTrackingConfig === void 0 ? void 0 : sessionTrackingConfig.onSessionChange) === null || _b === void 0 ? void 0 : _b.call(sessionTrackingConfig, (_c = sessionFromStorage === null || sessionFromStorage === void 0 ? void 0 : sessionFromStorage.sessionMeta) !== null && _c !== void 0 ? _c : null, newSession.sessionMeta);\n        }\n    };\n}\nexport function addSessionMetadataToNextSession(newSession, previousSession) {\n    var _a, _b, _c, _d, _e, _f, _g;\n    const sessionWithMeta = Object.assign(Object.assign({}, newSession), { sessionMeta: {\n            id: newSession.sessionId,\n            attributes: Object.assign(Object.assign(Object.assign({}, (_b = (_a = faro.config.sessionTracking) === null || _a === void 0 ? void 0 : _a.session) === null || _b === void 0 ? void 0 : _b.attributes), ((_d = (_c = faro.metas.value.session) === null || _c === void 0 ? void 0 : _c.attributes) !== null && _d !== void 0 ? _d : {})), { isSampled: newSession.isSampled.toString() }),\n        } });\n    const overrides = (_f = (_e = faro.metas.value.session) === null || _e === void 0 ? void 0 : _e.overrides) !== null && _f !== void 0 ? _f : (_g = previousSession === null || previousSession === void 0 ? void 0 : previousSession.sessionMeta) === null || _g === void 0 ? void 0 : _g.overrides;\n    if (!isEmpty(overrides)) {\n        sessionWithMeta.sessionMeta.overrides = overrides;\n    }\n    const previousSessionId = previousSession === null || previousSession === void 0 ? void 0 : previousSession.sessionId;\n    if (previousSessionId != null) {\n        sessionWithMeta.sessionMeta.attributes['previousSession'] = previousSessionId;\n    }\n    return sessionWithMeta;\n}\nexport function getSessionMetaUpdateHandler({ fetchUserSession, storeUserSession, }) {\n    return function syncSessionIfChangedExternally(meta) {\n        const session = meta.session;\n        const sessionFromSessionStorage = fetchUserSession();\n        let sessionId = session === null || session === void 0 ? void 0 : session.id;\n        const sessionAttributes = session === null || session === void 0 ? void 0 : session.attributes;\n        const sessionOverrides = session === null || session === void 0 ? void 0 : session.overrides;\n        const storedSessionMeta = sessionFromSessionStorage === null || sessionFromSessionStorage === void 0 ? void 0 : sessionFromSessionStorage.sessionMeta;\n        const storedSessionMetaOverrides = storedSessionMeta === null || storedSessionMeta === void 0 ? void 0 : storedSessionMeta.overrides;\n        const hasSessionOverridesChanged = !!sessionOverrides && !deepEqual(sessionOverrides, storedSessionMetaOverrides);\n        const hasAttributesChanged = !!sessionAttributes && !deepEqual(sessionAttributes, storedSessionMeta === null || storedSessionMeta === void 0 ? void 0 : storedSessionMeta.attributes);\n        const hasSessionIdChanged = !!session && sessionId !== (sessionFromSessionStorage === null || sessionFromSessionStorage === void 0 ? void 0 : sessionFromSessionStorage.sessionId);\n        if (hasSessionIdChanged || hasAttributesChanged || hasSessionOverridesChanged) {\n            const userSession = addSessionMetadataToNextSession(createUserSessionObject({ sessionId, isSampled: isSampled() }), sessionFromSessionStorage);\n            storeUserSession(userSession);\n            sendOverrideEvent(hasSessionOverridesChanged, sessionOverrides, storedSessionMetaOverrides);\n            faro.api.setSession(userSession.sessionMeta);\n        }\n    };\n}\nfunction sendOverrideEvent(hasSessionOverridesChanged, sessionOverrides = {}, storedSessionOverrides = {}) {\n    var _a, _b, _c;\n    if (!hasSessionOverridesChanged) {\n        return;\n    }\n    const serviceName = sessionOverrides.serviceName;\n    const previousServiceName = (_c = (_a = storedSessionOverrides.serviceName) !== null && _a !== void 0 ? _a : (_b = faro.metas.value.app) === null || _b === void 0 ? void 0 : _b.name) !== null && _c !== void 0 ? _c : '';\n    if (serviceName && serviceName !== previousServiceName) {\n        faro.api.pushEvent(EVENT_OVERRIDES_SERVICE_NAME, {\n            serviceName,\n            previousServiceName,\n        });\n    }\n}\n//# sourceMappingURL=sessionManagerUtils.js.map","import { faro, stringifyExternalJson } from '@grafana/faro-core';\nimport { throttle } from '../../../utils';\nimport { getItem, removeItem, setItem, webStorageType } from '../../../utils/webStorage';\nimport { STORAGE_KEY, STORAGE_UPDATE_DELAY } from './sessionConstants';\nimport { getSessionMetaUpdateHandler, getUserSessionUpdater } from './sessionManagerUtils';\nexport class PersistentSessionsManager {\n    constructor() {\n        this.updateSession = throttle(() => this.updateUserSession(), STORAGE_UPDATE_DELAY);\n        this.updateUserSession = getUserSessionUpdater({\n            fetchUserSession: PersistentSessionsManager.fetchUserSession,\n            storeUserSession: PersistentSessionsManager.storeUserSession,\n        });\n        this.init();\n    }\n    static removeUserSession() {\n        removeItem(STORAGE_KEY, PersistentSessionsManager.storageTypeLocal);\n    }\n    static storeUserSession(session) {\n        setItem(STORAGE_KEY, stringifyExternalJson(session), PersistentSessionsManager.storageTypeLocal);\n    }\n    static fetchUserSession() {\n        const storedSession = getItem(STORAGE_KEY, PersistentSessionsManager.storageTypeLocal);\n        if (storedSession) {\n            return JSON.parse(storedSession);\n        }\n        return null;\n    }\n    init() {\n        document.addEventListener('visibilitychange', () => {\n            if (document.visibilityState === 'visible') {\n                this.updateSession();\n            }\n        });\n        // Users can call the setSession() method, so we need to sync this with the local storage session\n        faro.metas.addListener(getSessionMetaUpdateHandler({\n            fetchUserSession: PersistentSessionsManager.fetchUserSession,\n            storeUserSession: PersistentSessionsManager.storeUserSession,\n        }));\n    }\n}\nPersistentSessionsManager.storageTypeLocal = webStorageType.local;\n//# sourceMappingURL=PersistentSessionsManager.js.map","import { faro, stringifyExternalJson } from '@grafana/faro-core';\nimport { throttle } from '../../../utils';\nimport { getItem, removeItem, setItem, webStorageType } from '../../../utils/webStorage';\nimport { STORAGE_KEY, STORAGE_UPDATE_DELAY } from './sessionConstants';\nimport { getSessionMetaUpdateHandler, getUserSessionUpdater } from './sessionManagerUtils';\nexport class VolatileSessionsManager {\n    constructor() {\n        this.updateSession = throttle(() => this.updateUserSession(), STORAGE_UPDATE_DELAY);\n        this.updateUserSession = getUserSessionUpdater({\n            fetchUserSession: VolatileSessionsManager.fetchUserSession,\n            storeUserSession: VolatileSessionsManager.storeUserSession,\n        });\n        this.init();\n    }\n    static removeUserSession() {\n        removeItem(STORAGE_KEY, VolatileSessionsManager.storageTypeSession);\n    }\n    static storeUserSession(session) {\n        setItem(STORAGE_KEY, stringifyExternalJson(session), VolatileSessionsManager.storageTypeSession);\n    }\n    static fetchUserSession() {\n        const storedSession = getItem(STORAGE_KEY, VolatileSessionsManager.storageTypeSession);\n        if (storedSession) {\n            return JSON.parse(storedSession);\n        }\n        return null;\n    }\n    init() {\n        document.addEventListener('visibilitychange', () => {\n            if (document.visibilityState === 'visible') {\n                this.updateSession();\n            }\n        });\n        // Users can call the setSession() method, so we need to sync this with the local storage session\n        faro.metas.addListener(getSessionMetaUpdateHandler({\n            fetchUserSession: VolatileSessionsManager.fetchUserSession,\n            storeUserSession: VolatileSessionsManager.storeUserSession,\n        }));\n    }\n}\nVolatileSessionsManager.storageTypeSession = webStorageType.session;\n//# sourceMappingURL=VolatileSessionManager.js.map","import { PersistentSessionsManager } from './PersistentSessionsManager';\nimport { VolatileSessionsManager } from './VolatileSessionManager';\nexport function getSessionManagerByConfig(sessionTrackingConfig) {\n    return (sessionTrackingConfig === null || sessionTrackingConfig === void 0 ? void 0 : sessionTrackingConfig.persistent) ? PersistentSessionsManager : VolatileSessionsManager;\n}\n//# sourceMappingURL=getSessionManagerByConfig.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { BaseExtension, BaseTransport, createPromiseBuffer, getTransportBody, noop, VERSION } from '@grafana/faro-core';\nimport { getSessionManagerByConfig } from '../../instrumentations/session/sessionManager';\nimport { getUserSessionUpdater } from '../../instrumentations/session/sessionManager/sessionManagerUtils';\nconst DEFAULT_BUFFER_SIZE = 30;\nconst DEFAULT_CONCURRENCY = 5; // chrome supports 10 total, firefox 17\nconst DEFAULT_RATE_LIMIT_BACKOFF_MS = 5000;\nconst BEACON_BODY_SIZE_LIMIT = 60000;\nconst TOO_MANY_REQUESTS = 429;\nconst ACCEPTED = 202;\nexport class FetchTransport extends BaseTransport {\n    constructor(options) {\n        var _a, _b, _c, _d;\n        super();\n        this.options = options;\n        this.name = '@grafana/faro-web-sdk:transport-fetch';\n        this.version = VERSION;\n        this.disabledUntil = new Date();\n        this.rateLimitBackoffMs = (_a = options.defaultRateLimitBackoffMs) !== null && _a !== void 0 ? _a : DEFAULT_RATE_LIMIT_BACKOFF_MS;\n        this.getNow = (_b = options.getNow) !== null && _b !== void 0 ? _b : (() => Date.now());\n        this.promiseBuffer = createPromiseBuffer({\n            size: (_c = options.bufferSize) !== null && _c !== void 0 ? _c : DEFAULT_BUFFER_SIZE,\n            concurrency: (_d = options.concurrency) !== null && _d !== void 0 ? _d : DEFAULT_CONCURRENCY,\n        });\n    }\n    send(items) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                if (this.disabledUntil > new Date(this.getNow())) {\n                    this.logWarn(`Dropping transport item due to too many requests. Backoff until ${this.disabledUntil}`);\n                    return Promise.resolve();\n                }\n                yield this.promiseBuffer.add(() => {\n                    const body = JSON.stringify(getTransportBody(items));\n                    const { url, requestOptions, apiKey } = this.options;\n                    const _a = requestOptions !== null && requestOptions !== void 0 ? requestOptions : {}, { headers } = _a, restOfRequestOptions = __rest(_a, [\"headers\"]);\n                    let sessionId;\n                    const sessionMeta = this.metas.value.session;\n                    if (sessionMeta != null) {\n                        sessionId = sessionMeta.id;\n                    }\n                    return fetch(url, Object.assign({ method: 'POST', headers: Object.assign(Object.assign(Object.assign({ 'Content-Type': 'application/json' }, (headers !== null && headers !== void 0 ? headers : {})), (apiKey ? { 'x-api-key': apiKey } : {})), (sessionId ? { 'x-faro-session-id': sessionId } : {})), body, keepalive: body.length <= BEACON_BODY_SIZE_LIMIT }, (restOfRequestOptions !== null && restOfRequestOptions !== void 0 ? restOfRequestOptions : {})))\n                        .then((response) => __awaiter(this, void 0, void 0, function* () {\n                        if (response.status === ACCEPTED) {\n                            const sessionExpired = response.headers.get('X-Faro-Session-Status') === 'invalid';\n                            if (sessionExpired) {\n                                this.extendFaroSession(this.config, this.logDebug);\n                            }\n                        }\n                        if (response.status === TOO_MANY_REQUESTS) {\n                            this.disabledUntil = this.getRetryAfterDate(response);\n                            this.logWarn(`Too many requests, backing off until ${this.disabledUntil}`);\n                        }\n                        // read the body so the connection can be closed\n                        response.text().catch(noop);\n                        return response;\n                    }))\n                        .catch((err) => {\n                        this.logError('Failed sending payload to the receiver\\n', JSON.parse(body), err);\n                    });\n                });\n            }\n            catch (err) {\n                this.logError(err);\n            }\n        });\n    }\n    getIgnoreUrls() {\n        var _a;\n        return [this.options.url].concat((_a = this.config.ignoreUrls) !== null && _a !== void 0 ? _a : []);\n    }\n    isBatched() {\n        return true;\n    }\n    getRetryAfterDate(response) {\n        const now = this.getNow();\n        const retryAfterHeader = response.headers.get('Retry-After');\n        if (retryAfterHeader) {\n            const delay = Number(retryAfterHeader);\n            if (!isNaN(delay)) {\n                return new Date(delay * 1000 + now);\n            }\n            const date = Date.parse(retryAfterHeader);\n            if (!isNaN(date)) {\n                return new Date(date);\n            }\n        }\n        return new Date(now + this.rateLimitBackoffMs);\n    }\n    extendFaroSession(config, logDebug) {\n        const SessionExpiredString = `Session expired`;\n        const sessionTrackingConfig = config.sessionTracking;\n        if (sessionTrackingConfig === null || sessionTrackingConfig === void 0 ? void 0 : sessionTrackingConfig.enabled) {\n            const { fetchUserSession, storeUserSession } = getSessionManagerByConfig(sessionTrackingConfig);\n            getUserSessionUpdater({ fetchUserSession, storeUserSession })({ forceSessionExtend: true });\n            logDebug(`${SessionExpiredString} created new session.`);\n        }\n        else {\n            logDebug(`${SessionExpiredString}.`);\n        }\n    }\n}\n//# sourceMappingURL=transport.js.map","export function createPromiseBuffer(options) {\n    const { size, concurrency } = options;\n    const buffer = []; // pending, not-yet-started tasks\n    let inProgress = 0; // counter for tasks currently in progress\n    const work = () => {\n        // if there's space for a task and buffer is not empty,\n        // take one task from buffer and run it\n        if (inProgress < concurrency && buffer.length) {\n            const { producer, resolve, reject } = buffer.shift();\n            inProgress++;\n            producer().then((result) => {\n                inProgress--;\n                work();\n                resolve(result);\n            }, (reason) => {\n                inProgress--;\n                work();\n                reject(reason);\n            });\n        }\n    };\n    const add = (promiseProducer) => {\n        if (buffer.length + inProgress >= size) {\n            throw new Error('Task buffer full');\n        }\n        return new Promise((resolve, reject) => {\n            buffer.push({\n                producer: promiseProducer,\n                resolve,\n                reject,\n            });\n            work();\n        });\n    };\n    return {\n        add,\n    };\n}\n//# sourceMappingURL=promiseBuffer.js.map","import { BaseExtension } from '../extensions';\nexport class BaseInstrumentation extends BaseExtension {\n    constructor() {\n        super(...arguments);\n        this.api = {};\n        this.transports = {};\n    }\n}\n//# sourceMappingURL=base.js.map","export const MESSAGE_TYPE_RESOURCE_ENTRY = 'resource-entry';\nexport const MESSAGE_TYPE_HTTP_REQUEST_START = 'http-request-start';\nexport const MESSAGE_TYPE_HTTP_REQUEST_END = 'http-request-end';\nexport const MESSAGE_TYPE_DOM_MUTATION = 'dom-mutation';\n//# sourceMappingURL=const.js.map","import { Observable } from '@grafana/faro-core';\nimport { MESSAGE_TYPE_DOM_MUTATION } from './const';\nlet domMutationObservable;\nlet domMutationObserver;\nexport function monitorDomMutations() {\n    if (!domMutationObservable) {\n        domMutationObservable = new Observable();\n    }\n    if (!domMutationObserver) {\n        domMutationObserver = new MutationObserver((_mutationsList, _observer) => {\n            domMutationObservable.notify({ type: MESSAGE_TYPE_DOM_MUTATION });\n        });\n        domMutationObserver.observe(document, {\n            attributes: true,\n            childList: true,\n            subtree: true,\n            characterData: true,\n        });\n    }\n    return domMutationObservable;\n}\n// Test-only utility to reset state between tests\nexport function __resetDomMutationMonitorForTests() {\n    if (domMutationObserver) {\n        domMutationObserver.disconnect();\n    }\n    domMutationObserver = undefined;\n    domMutationObservable = undefined;\n}\n//# sourceMappingURL=domMutationMonitor.js.map","import { faro, isEmpty, isFunction, isString } from '@grafana/faro-core';\n/**\n * Retrieves a list of URLs to be ignored by aggregating the ignore URLs from all transports.\n *\n * @returns {string[]} An array of URLs to be ignored.\n */\nexport function getIgnoreUrls() {\n    return faro.transports.transports.flatMap((transport) => transport.getIgnoreUrls());\n}\n/**\n * Checks if the given URL should be ignored based on a list of ignored URLs.\n *\n * @param url - The URL to check.\n * @returns `true` if the URL is in the list of ignored URLs, `false` otherwise.\n */\nexport function isUrlIgnored(url = '') {\n    return getIgnoreUrls().some((ignoredUrl) => url && url.match(ignoredUrl) != null);\n}\n/**\n * Extracts a URL string from the given resource.\n *\n * @param resource - The input resource which can be a string, a URL object, or an object with a `toString` method.\n * @returns The URL as a string if the resource is a valid URL-like object, or `undefined` if the resource is not valid.\n *\n */\nexport function getUrlFromResource(resource) {\n    if (isString(resource)) {\n        return resource;\n    }\n    if (resource instanceof URL) {\n        return resource.href;\n    }\n    if (!isEmpty(resource) && isFunction(resource === null || resource === void 0 ? void 0 : resource.toString)) {\n        return resource.toString();\n    }\n    return undefined;\n}\n//# sourceMappingURL=url.js.map","import { genShortID, Observable } from '@grafana/faro-core';\nimport { getUrlFromResource, isUrlIgnored } from '../../../utils/url';\nimport { MESSAGE_TYPE_HTTP_REQUEST_END, MESSAGE_TYPE_HTTP_REQUEST_START } from './const';\nconst apiTypeFetch = 'fetch';\nconst apiTypeXhr = 'xhr';\n/**\n * Monitors if any http requests are in progress.\n */\nlet httpRequestObservable;\nlet isInstrumented = false;\nlet originalXhrOpen;\nlet originalFetchFn;\nexport function monitorHttpRequests() {\n    if (httpRequestObservable) {\n        return httpRequestObservable;\n    }\n    httpRequestObservable = new Observable();\n    function emitStartMessage(requestProps) {\n        httpRequestObservable.notify({\n            type: MESSAGE_TYPE_HTTP_REQUEST_START,\n            request: requestProps,\n        });\n    }\n    function emitEndMessage(requestProps) {\n        httpRequestObservable.notify({\n            type: MESSAGE_TYPE_HTTP_REQUEST_END,\n            request: requestProps,\n        });\n    }\n    if (!isInstrumented) {\n        monitorFetch({\n            onRequestStart: emitStartMessage,\n            onRequestEnd: emitEndMessage,\n        });\n        monitorXhr({\n            onRequestStart: emitStartMessage,\n            onRequestEnd: emitEndMessage,\n        });\n        isInstrumented = true;\n    }\n    return httpRequestObservable;\n}\nfunction monitorXhr({ onRequestStart, onRequestEnd, }) {\n    if (!originalXhrOpen) {\n        originalXhrOpen = XMLHttpRequest.prototype.open;\n    }\n    XMLHttpRequest.prototype.open = function () {\n        const url = arguments[1];\n        const isIgnoredUrl = isUrlIgnored(url);\n        const method = arguments[0];\n        const requestId = genShortID();\n        // request has started to load data.\n        this.addEventListener('loadstart', function () {\n            if (!isIgnoredUrl) {\n                onRequestStart({ url, method, requestId, apiType: apiTypeXhr });\n            }\n        });\n        // transaction completes successfully.\n        this.addEventListener('load', function () {\n            if (!isIgnoredUrl) {\n                onRequestEnd({ url, method, requestId, apiType: apiTypeXhr });\n            }\n        });\n        this.addEventListener('error', function () {\n            if (!isIgnoredUrl) {\n                onRequestEnd({ url, method, requestId, apiType: apiTypeXhr });\n            }\n        });\n        this.addEventListener('abort', function () {\n            if (!isIgnoredUrl) {\n                onRequestEnd({ url, method, requestId, apiType: apiTypeXhr });\n            }\n        });\n        originalXhrOpen.apply(this, arguments);\n    };\n}\nfunction monitorFetch({ onRequestEnd, onRequestStart, }) {\n    if (!originalFetchFn) {\n        originalFetchFn = window.fetch;\n    }\n    window.fetch = function () {\n        var _a, _b;\n        const url = (_a = getUrlFromResource(arguments[0])) !== null && _a !== void 0 ? _a : '';\n        const isIgnoredUrl = isUrlIgnored(url);\n        const method = ((_b = arguments[1]) !== null && _b !== void 0 ? _b : {}).method;\n        const requestId = genShortID();\n        if (!isIgnoredUrl) {\n            onRequestStart({ url, method, requestId, apiType: apiTypeFetch });\n        }\n        return originalFetchFn\n            .apply(this, arguments)\n            .then((response) => {\n            if (!isIgnoredUrl) {\n                onRequestEnd({ url, method, requestId, apiType: apiTypeFetch });\n            }\n            return response;\n        })\n            .catch((error) => {\n            if (!isIgnoredUrl) {\n                onRequestEnd({ url, method, requestId, apiType: apiTypeFetch });\n            }\n            throw error;\n        });\n    };\n}\n// Test-only utility to reset instrumentation and singleton between tests\nexport function __resetHttpRequestMonitorForTests() {\n    if (originalXhrOpen) {\n        XMLHttpRequest.prototype.open = originalXhrOpen;\n    }\n    if (originalFetchFn) {\n        window.fetch = originalFetchFn;\n    }\n    httpRequestObservable = undefined;\n    isInstrumented = false;\n    originalXhrOpen = undefined;\n    originalFetchFn = undefined;\n}\n//# sourceMappingURL=httpRequestMonitor.js.map","export const NAVIGATION_ID_STORAGE_KEY = 'com.grafana.faro.lastNavigationId';\n//# sourceMappingURL=instrumentationConstants.js.map","export const NAVIGATION_ENTRY = 'navigation';\nexport const RESOURCE_ENTRY = 'resource';\n//# sourceMappingURL=performanceConstants.js.map","import { isArray, unknownString } from '@grafana/faro-core';\nconst w3cTraceparentFormat = /^00-[a-f0-9]{32}-[a-f0-9]{16}-[0-9]{1,2}$/;\n// Extract traceparent from serverTiming, if present\nexport function getSpanContextFromServerTiming(serverTimings = []) {\n    for (const serverEntry of serverTimings) {\n        if (serverEntry.name === 'traceparent') {\n            if (!w3cTraceparentFormat.test(serverEntry.description)) {\n                continue;\n            }\n            const [, traceId, spanId] = serverEntry.description.split('-');\n            if (traceId != null && spanId != null) {\n                return { traceId, spanId };\n            }\n            break;\n        }\n    }\n    return undefined;\n}\nexport function performanceObserverSupported() {\n    return 'PerformanceObserver' in window;\n}\nexport function onDocumentReady(handleReady) {\n    if (document.readyState === 'complete') {\n        handleReady();\n    }\n    else {\n        const readyStateCompleteHandler = () => {\n            if (document.readyState === 'complete') {\n                handleReady();\n                document.removeEventListener('readystatechange', readyStateCompleteHandler);\n            }\n        };\n        document.addEventListener('readystatechange', readyStateCompleteHandler);\n    }\n}\nexport function includePerformanceEntry(performanceEntryJSON, allowProps = {}) {\n    for (const [allowPropKey, allowPropValue] of Object.entries(allowProps)) {\n        const perfEntryPropVal = performanceEntryJSON[allowPropKey];\n        if (perfEntryPropVal == null) {\n            return false;\n        }\n        if (isArray(allowPropValue)) {\n            return allowPropValue.includes(perfEntryPropVal);\n        }\n        return perfEntryPropVal === allowPropValue;\n    }\n    // empty object allows all\n    return true;\n}\nexport function createFaroResourceTiming(resourceEntryRaw) {\n    const { connectEnd, connectStart, decodedBodySize, domainLookupEnd, domainLookupStart, duration, encodedBodySize, fetchStart, initiatorType, name, nextHopProtocol, redirectEnd, redirectStart, \n    // @ts-expect-error the renderBlockingStatus property is not available in all browsers\n    renderBlockingStatus: rbs, requestStart, responseEnd, responseStart, responseStatus, secureConnectionStart, transferSize, workerStart, } = resourceEntryRaw;\n    return {\n        name: name,\n        duration: toFaroPerformanceTimingString(duration),\n        tcpHandshakeTime: toFaroPerformanceTimingString(connectEnd - connectStart),\n        dnsLookupTime: toFaroPerformanceTimingString(domainLookupEnd - domainLookupStart),\n        tlsNegotiationTime: toFaroPerformanceTimingString(connectEnd - secureConnectionStart),\n        responseStatus: toFaroPerformanceTimingString(responseStatus),\n        redirectTime: toFaroPerformanceTimingString(redirectEnd - redirectStart),\n        requestTime: toFaroPerformanceTimingString(responseStart - requestStart),\n        responseTime: toFaroPerformanceTimingString(responseEnd - responseStart),\n        fetchTime: toFaroPerformanceTimingString(responseEnd - fetchStart),\n        serviceWorkerTime: toFaroPerformanceTimingString(fetchStart - workerStart),\n        decodedBodySize: toFaroPerformanceTimingString(decodedBodySize),\n        encodedBodySize: toFaroPerformanceTimingString(encodedBodySize),\n        cacheHitStatus: getCacheType(),\n        renderBlockingStatus: toFaroPerformanceTimingString(rbs),\n        protocol: nextHopProtocol,\n        initiatorType: initiatorType,\n        visibilityState: document.visibilityState,\n        ttfb: toFaroPerformanceTimingString(responseStart - requestStart),\n        transferSize: toFaroPerformanceTimingString(transferSize),\n        // TODO: add in future iteration, ideally after nested objects are supported by the collector.\n        // serverTiming: resourceEntryRaw.serverTiming,\n    };\n    function getCacheType() {\n        let cacheType = 'fullLoad';\n        if (transferSize === 0) {\n            if (decodedBodySize > 0) {\n                cacheType = 'cache';\n            }\n        }\n        else {\n            if (responseStatus != null) {\n                if (responseStatus === 304) {\n                    cacheType = 'conditionalFetch';\n                }\n            }\n            else if (encodedBodySize > 0 && transferSize < encodedBodySize) {\n                cacheType = 'conditionalFetch';\n            }\n        }\n        return cacheType;\n    }\n}\nexport function createFaroNavigationTiming(navigationEntryRaw) {\n    const { activationStart, domComplete, domContentLoadedEventEnd, domContentLoadedEventStart, domInteractive, fetchStart, loadEventEnd, loadEventStart, responseStart, type, } = navigationEntryRaw;\n    const parserStart = getDocumentParsingTime();\n    return Object.assign(Object.assign({}, createFaroResourceTiming(navigationEntryRaw)), { pageLoadTime: toFaroPerformanceTimingString(domComplete - fetchStart), documentParsingTime: toFaroPerformanceTimingString(parserStart ? domInteractive - parserStart : null), domProcessingTime: toFaroPerformanceTimingString(domComplete - domInteractive), domContentLoadHandlerTime: toFaroPerformanceTimingString(domContentLoadedEventEnd - domContentLoadedEventStart), onLoadTime: toFaroPerformanceTimingString(loadEventEnd - loadEventStart), \n        // For navigation entries we can calculate the TTFB based on activationStart. We overwrite the TTFB value coming with the resource entry.\n        // For more accuracy on prerendered pages page we calculate relative top the activationStart instead of the start of the navigation.\n        // clamp to 0 if activationStart occurs after first byte is received.\n        ttfb: toFaroPerformanceTimingString(Math.max(responseStart - (activationStart !== null && activationStart !== void 0 ? activationStart : 0), 0)), type: type });\n}\nfunction getDocumentParsingTime() {\n    var _a;\n    if (((_a = performance.timing) === null || _a === void 0 ? void 0 : _a.domLoading) != null) {\n        // the browser is about to start parsing the first received bytes of the HTML document.\n        // This property is deprecated but there isn't a really good alternative atm.\n        // For now we stick with domLoading and keep researching a better alternative.\n        return performance.timing.domLoading - performance.timeOrigin;\n    }\n    return null;\n}\nfunction toFaroPerformanceTimingString(v) {\n    if (v == null) {\n        return unknownString;\n    }\n    if (typeof v === 'number') {\n        return Math.round(v > 0 ? v : 0).toString();\n    }\n    return v.toString();\n}\n//# sourceMappingURL=performanceUtils.js.map","import { faro, genShortID } from '@grafana/faro-core';\nimport { isUrlIgnored } from '../../utils/url';\nimport { RESOURCE_ENTRY } from './performanceConstants';\nimport { createFaroResourceTiming, getSpanContextFromServerTiming, includePerformanceEntry } from './performanceUtils';\nconst DEFAULT_TRACK_RESOURCES = { initiatorType: ['xmlhttprequest', 'fetch'] };\nexport function observeResourceTimings(faroNavigationId, pushEvent, observable) {\n    const trackResources = faro.config.trackResources;\n    const observer = new PerformanceObserver((observedEntries) => {\n        const entries = observedEntries.getEntries();\n        for (const resourceEntryRaw of entries) {\n            if (isUrlIgnored(resourceEntryRaw.name)) {\n                continue;\n            }\n            observable === null || observable === void 0 ? void 0 : observable.notify({\n                type: RESOURCE_ENTRY,\n            });\n            const resourceEntryJson = resourceEntryRaw.toJSON();\n            let spanContext = getSpanContextFromServerTiming(resourceEntryJson === null || resourceEntryJson === void 0 ? void 0 : resourceEntryJson.serverTiming);\n            if ((trackResources == null && includePerformanceEntry(resourceEntryJson, DEFAULT_TRACK_RESOURCES)) ||\n                trackResources) {\n                const faroResourceEntry = Object.assign(Object.assign({}, createFaroResourceTiming(resourceEntryJson)), { faroNavigationId, faroResourceId: genShortID() });\n                pushEvent('faro.performance.resource', faroResourceEntry, undefined, {\n                    spanContext,\n                    timestampOverwriteMs: performance.timeOrigin + resourceEntryJson.startTime,\n                });\n            }\n        }\n    });\n    observer.observe({\n        type: RESOURCE_ENTRY,\n        buffered: true,\n    });\n}\n//# sourceMappingURL=resource.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { BaseInstrumentation, Observable, VERSION } from '@grafana/faro-core';\nimport { getNavigationTimings } from './navigation';\nimport { onDocumentReady, performanceObserverSupported } from './performanceUtils';\nimport { observeResourceTimings } from './resource';\nexport const performanceEntriesSubscription = new Observable();\nexport class PerformanceInstrumentation extends BaseInstrumentation {\n    constructor() {\n        super(...arguments);\n        this.name = '@grafana/faro-web-sdk:instrumentation-performance';\n        this.version = VERSION;\n    }\n    initialize() {\n        if (!performanceObserverSupported()) {\n            this.logDebug('performance observer not supported. Disable performance instrumentation.');\n            return;\n        }\n        onDocumentReady(() => __awaiter(this, void 0, void 0, function* () {\n            const pushEvent = this.api.pushEvent;\n            const { faroNavigationId } = yield getNavigationTimings(pushEvent);\n            if (faroNavigationId != null) {\n                observeResourceTimings(faroNavigationId, pushEvent, performanceEntriesSubscription);\n            }\n        }));\n    }\n}\n//# sourceMappingURL=instrumentation.js.map","import { genShortID, unknownString } from '@grafana/faro-core';\nimport { getItem, setItem, webStorageType } from '../../utils';\nimport { isUrlIgnored } from '../../utils/url';\nimport { NAVIGATION_ID_STORAGE_KEY } from '../instrumentationConstants';\nimport { NAVIGATION_ENTRY } from './performanceConstants';\nimport { createFaroNavigationTiming, getSpanContextFromServerTiming } from './performanceUtils';\nexport function getNavigationTimings(pushEvent) {\n    let faroNavigationEntryResolve;\n    const faroNavigationEntryPromise = new Promise((resolve) => {\n        faroNavigationEntryResolve = resolve;\n    });\n    const observer = new PerformanceObserver((observedEntries) => {\n        var _a;\n        const [navigationEntryRaw] = observedEntries.getEntries();\n        if (navigationEntryRaw == null || isUrlIgnored(navigationEntryRaw.name)) {\n            return;\n        }\n        const navEntryJson = navigationEntryRaw.toJSON();\n        let spanContext = getSpanContextFromServerTiming(navEntryJson === null || navEntryJson === void 0 ? void 0 : navEntryJson.serverTiming);\n        const faroPreviousNavigationId = (_a = getItem(NAVIGATION_ID_STORAGE_KEY, webStorageType.session)) !== null && _a !== void 0 ? _a : unknownString;\n        const faroNavigationEntry = Object.assign(Object.assign({}, createFaroNavigationTiming(navEntryJson)), { faroNavigationId: genShortID(), faroPreviousNavigationId });\n        setItem(NAVIGATION_ID_STORAGE_KEY, faroNavigationEntry.faroNavigationId, webStorageType.session);\n        pushEvent('faro.performance.navigation', faroNavigationEntry, undefined, {\n            spanContext,\n            timestampOverwriteMs: performance.timeOrigin + navEntryJson.startTime,\n        });\n        faroNavigationEntryResolve(faroNavigationEntry);\n    });\n    observer.observe({\n        type: NAVIGATION_ENTRY,\n        buffered: true,\n    });\n    return faroNavigationEntryPromise;\n}\n//# sourceMappingURL=navigation.js.map","import { Observable } from '@grafana/faro-core';\nimport { performanceEntriesSubscription } from '../../performance/instrumentation';\nimport { RESOURCE_ENTRY } from '../../performance/performanceConstants';\nimport { MESSAGE_TYPE_RESOURCE_ENTRY } from './const';\nlet performanceObservable;\nlet isSubscribed = false;\nlet subscription;\nexport function monitorPerformanceEntries() {\n    if (!performanceObservable) {\n        performanceObservable = new Observable();\n    }\n    if (!isSubscribed) {\n        subscription = performanceEntriesSubscription.subscribe((data) => {\n            if (data.type === RESOURCE_ENTRY) {\n                performanceObservable.notify({ type: MESSAGE_TYPE_RESOURCE_ENTRY });\n            }\n        });\n        isSubscribed = true;\n    }\n    return performanceObservable;\n}\n// Test-only utility to reset state between tests\nexport function __resetPerformanceEntriesMonitorForTests() {\n    if (subscription) {\n        subscription.unsubscribe();\n    }\n    subscription = undefined;\n    isSubscribed = false;\n    performanceObservable = undefined;\n}\n//# sourceMappingURL=performanceEntriesMonitor.js.map","import { MESSAGE_TYPE_HTTP_REQUEST_END, MESSAGE_TYPE_HTTP_REQUEST_START } from './const';\n/**\n * Parses the action attribute name by removing the 'data-' prefix and converting\n * the remaining string to camelCase.\n *\n * This is needed because the browser will remove the 'data-' prefix and the dashes from\n * data attributes and make then camelCase.\n */\nexport function convertDataAttributeName(userActionDataAttribute) {\n    const withoutData = userActionDataAttribute.split('data-')[1];\n    const withUpperCase = withoutData === null || withoutData === void 0 ? void 0 : withoutData.replace(/-(.)/g, (_, char) => char.toUpperCase());\n    return withUpperCase === null || withUpperCase === void 0 ? void 0 : withUpperCase.replace(/-/g, '');\n}\nexport function startTimeout(timeoutId, cb, delay) {\n    if (timeoutId) {\n        clearTimeout(timeoutId);\n    }\n    //@ts-expect-error for some reason vscode is using the node types\n    timeoutId = setTimeout(() => {\n        cb();\n    }, delay);\n    return timeoutId;\n}\nexport function isRequestStartMessage(msg) {\n    return msg.type === MESSAGE_TYPE_HTTP_REQUEST_START;\n}\nexport function isRequestEndMessage(msg) {\n    return msg.type === MESSAGE_TYPE_HTTP_REQUEST_END;\n}\n//# sourceMappingURL=util.js.map","// packages/web-sdk/src/instrumentations/userActions/userActionController.ts\nimport { Observable, UserActionState } from '@grafana/faro-core';\nimport { monitorDomMutations } from '../_internal/monitors/domMutationMonitor';\nimport { monitorHttpRequests } from '../_internal/monitors/httpRequestMonitor';\nimport { monitorPerformanceEntries } from '../_internal/monitors/performanceEntriesMonitor';\nimport { isRequestEndMessage, isRequestStartMessage, startTimeout } from './util';\nconst defaultFollowUpActionTimeRange = 100;\nconst defaultHaltTimeout = 10 * 1000;\nexport class UserActionController {\n    constructor(userAction) {\n        this.userAction = userAction;\n        this.http = monitorHttpRequests();\n        this.dom = monitorDomMutations();\n        this.perf = monitorPerformanceEntries();\n        this.isValid = false;\n        this.runningRequests = new Map();\n    }\n    attach() {\n        // Subscribe to monitors while action is active/halting\n        this.allMonitorsSub = new Observable()\n            .merge(this.http, this.dom, this.perf)\n            .takeWhile(() => [UserActionState.Started, UserActionState.Halted].includes(this.userAction.getState()))\n            .filter((msg) => {\n            // If the user action is in halt state, we only keep listening to ended http requests\n            if (this.userAction.getState() === UserActionState.Halted &&\n                !(isRequestEndMessage(msg) && this.runningRequests.has(msg.request.requestId))) {\n                return false;\n            }\n            return true;\n        })\n            .subscribe((msg) => {\n            if (isRequestStartMessage(msg)) {\n                // An action is on halt if it has pending items, like pending HTTP requests.\n                // In this case we start a separate timeout to wait for the requests to finish\n                // If in the halt state, we stop adding Faro signals to the action's buffer (see userActionLifecycleHandler.ts)\n                // But we are still subscribed to\n                this.runningRequests.set(msg.request.requestId, msg.request);\n            }\n            if (isRequestEndMessage(msg)) {\n                this.runningRequests.delete(msg.request.requestId);\n            }\n            if (!isRequestEndMessage(msg)) {\n                if (!this.isValid) {\n                    this.isValid = true;\n                }\n                this.scheduleFollowUp();\n            }\n            else if (this.userAction.getState() === UserActionState.Halted && this.runningRequests.size === 0) {\n                this.endAction();\n            }\n        });\n        // When UA ends or cancels, cleanup timers/subscriptions\n        this.stateSub = this.userAction\n            .filter((s) => [UserActionState.Ended, UserActionState.Cancelled].includes(s))\n            .first()\n            .subscribe(() => this.cleanup());\n        // initial follow-up window in case nothing else happens\n        this.scheduleFollowUp();\n    }\n    scheduleFollowUp() {\n        this.clearTimer(this.followUpTid);\n        this.followUpTid = setTimeout(() => {\n            // If action just started and there's pending work, go to halted\n            if (this.userAction.getState() === UserActionState.Started && this.runningRequests.size > 0) {\n                this.haltAction();\n                return;\n            }\n            // If we saw any relevant activity in the window, finish as ended\n            if (this.isValid) {\n                this.endAction();\n                return;\n            }\n            // Otherwise, no signals => cancel\n            this.cancelAction();\n        }, defaultFollowUpActionTimeRange);\n    }\n    haltAction() {\n        if (this.userAction.getState() !== UserActionState.Started) {\n            return;\n        }\n        this.userAction.halt();\n        this.startHaltTimeout();\n    }\n    startHaltTimeout() {\n        this.clearTimer(this.haltTid);\n        this.haltTid = startTimeout(this.haltTid, () => {\n            // If still halted after timeout, end\n            if (this.userAction.getState() === UserActionState.Halted) {\n                this.endAction();\n            }\n        }, defaultHaltTimeout);\n    }\n    endAction() {\n        this.userAction.end();\n        this.cleanup();\n    }\n    cancelAction() {\n        this.userAction.cancel();\n        this.cleanup();\n    }\n    cleanup() {\n        var _a, _b;\n        this.clearTimer(this.followUpTid);\n        this.clearTimer(this.haltTid);\n        (_a = this.allMonitorsSub) === null || _a === void 0 ? void 0 : _a.unsubscribe();\n        (_b = this.stateSub) === null || _b === void 0 ? void 0 : _b.unsubscribe();\n        this.allMonitorsSub = undefined;\n        this.stateSub = undefined;\n        this.runningRequests.clear();\n    }\n    clearTimer(id) {\n        if (id) {\n            clearTimeout(id);\n        }\n    }\n}\n//# sourceMappingURL=userActionController.js.map","import { userActionDataAttributeParsed as userActionDataAttribute } from './const';\nimport { UserActionController } from './userActionController';\nimport { convertDataAttributeName } from './util';\nexport function getUserEventHandler(faro) {\n    const { api, config } = faro;\n    function processUserEvent(event) {\n        var _a, _b;\n        const userActionName = getUserActionNameFromElement(event.target, (_b = (_a = config.userActionsInstrumentation) === null || _a === void 0 ? void 0 : _a.dataAttributeName) !== null && _b !== void 0 ? _b : userActionDataAttribute);\n        // We don't have a data attribute\n        if (!userActionName) {\n            return;\n        }\n        const userAction = api.startUserAction(userActionName, {}, { triggerName: event.type });\n        if (userAction) {\n            processUserActionStarted(userAction);\n        }\n    }\n    function processUserActionStarted(userAction) {\n        const internalUserAction = userAction;\n        new UserActionController(internalUserAction).attach();\n    }\n    return { processUserEvent, processUserActionStarted };\n}\nexport function getUserActionNameFromElement(element, dataAttributeName) {\n    const parsedDataAttributeName = convertDataAttributeName(dataAttributeName);\n    const dataset = element.dataset;\n    for (const key in dataset) {\n        if (key === parsedDataAttributeName) {\n            return dataset[key];\n        }\n    }\n    return undefined;\n}\nexport function unsubscribeAllMonitors(allMonitorsSub) {\n    allMonitorsSub === null || allMonitorsSub === void 0 ? void 0 : allMonitorsSub.unsubscribe();\n    allMonitorsSub = undefined;\n}\n//# sourceMappingURL=processUserActionEventHandler.js.map","import { BaseInstrumentation, faro, userActionsMessageBus, VERSION } from '@grafana/faro-core';\nimport { getUserEventHandler } from './processUserActionEventHandler';\nexport class UserActionInstrumentation extends BaseInstrumentation {\n    constructor() {\n        super(...arguments);\n        this.name = '@grafana/faro-web-sdk:instrumentation-user-action';\n        this.version = VERSION;\n    }\n    initialize() {\n        const { processUserEvent, processUserActionStarted } = getUserEventHandler(faro);\n        window.addEventListener('pointerdown', processUserEvent);\n        window.addEventListener('keydown', (ev) => {\n            if ([' ', 'Enter'].includes(ev.key)) {\n                processUserEvent(ev);\n            }\n        });\n        this._userActionSub = userActionsMessageBus.subscribe(({ type, userAction }) => {\n            if (type === 'user_action_start') {\n                processUserActionStarted(userAction);\n            }\n        });\n    }\n    destroy() {\n        var _a;\n        (_a = this._userActionSub) === null || _a === void 0 ? void 0 : _a.unsubscribe();\n    }\n}\n//# sourceMappingURL=instrumentation.js.map","export const primitiveUnhandledValue = 'Non-Error promise rejection captured with value:';\nexport const primitiveUnhandledType = 'UnhandledRejection';\nexport const domErrorType = 'DOMError';\nexport const domExceptionType = 'DOMException';\nexport const objectEventValue = 'Non-Error exception captured with keys:';\nexport const unknownSymbolString = '?';\nexport const valueTypeRegex = /^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;\n//# sourceMappingURL=const.js.map","import { isDomError, isDomException, isError, isErrorEvent, isEvent, isObject, isString } from '@grafana/faro-core';\nimport { domErrorType, domExceptionType, objectEventValue, unknownSymbolString } from './const';\nimport { getValueAndTypeFromMessage } from './getValueAndTypeFromMessage';\nimport { buildStackFrame, getStackFramesFromError } from './stackFrames';\nexport function getErrorDetails(evt) {\n    let value;\n    let type;\n    let stackFrames = [];\n    let isDomErrorRes;\n    let isEventRes;\n    if (isErrorEvent(evt) && evt.error) {\n        value = evt.error.message;\n        type = evt.error.name;\n        stackFrames = getStackFramesFromError(evt.error);\n    }\n    else if ((isDomErrorRes = isDomError(evt)) || isDomException(evt)) {\n        const { name, message } = evt;\n        type = name !== null && name !== void 0 ? name : (isDomErrorRes ? domErrorType : domExceptionType);\n        value = message ? `${type}: ${message}` : type;\n    }\n    else if (isError(evt)) {\n        value = evt.message;\n        stackFrames = getStackFramesFromError(evt);\n    }\n    else if (isObject(evt) || (isEventRes = isEvent(evt))) {\n        type = isEventRes ? evt.constructor.name : undefined;\n        value = `${objectEventValue} ${Object.keys(evt)}`;\n    }\n    return [value, type, stackFrames];\n}\nexport function getDetailsFromErrorArgs(args) {\n    const [evt, source, lineno, colno, error] = args;\n    let value;\n    let type;\n    let stackFrames = [];\n    const eventIsString = isString(evt);\n    const initialStackFrame = buildStackFrame(source, unknownSymbolString, lineno, colno);\n    if (error || !eventIsString) {\n        [value, type, stackFrames] = getErrorDetails((error !== null && error !== void 0 ? error : evt));\n        if (stackFrames.length === 0) {\n            stackFrames = [initialStackFrame];\n        }\n    }\n    else if (eventIsString) {\n        [value, type] = getValueAndTypeFromMessage(evt);\n        stackFrames = [initialStackFrame];\n    }\n    return { value, type, stackFrames };\n}\nexport function getDetailsFromConsoleErrorArgs(args, serializer) {\n    if (isError(args[0])) {\n        return getDetailsFromErrorArgs(args);\n    }\n    else {\n        return { value: serializer(args) };\n    }\n}\n//# sourceMappingURL=getErrorDetails.js.map","import { defaultExceptionType } from '@grafana/faro-core';\nimport { valueTypeRegex } from './const';\nexport function getValueAndTypeFromMessage(message) {\n    var _a, _b;\n    const groups = message.match(valueTypeRegex);\n    const type = (_a = groups === null || groups === void 0 ? void 0 : groups[1]) !== null && _a !== void 0 ? _a : defaultExceptionType;\n    const value = (_b = groups === null || groups === void 0 ? void 0 : groups[2]) !== null && _b !== void 0 ? _b : message;\n    return [value, type];\n}\n//# sourceMappingURL=getValueAndTypeFromMessage.js.map","import { isPrimitive } from '@grafana/faro-core';\nimport { primitiveUnhandledType, primitiveUnhandledValue } from './const';\nimport { getErrorDetails } from './getErrorDetails';\nexport function registerOnunhandledrejection(api) {\n    window.addEventListener('unhandledrejection', (evt) => {\n        var _a, _b;\n        let error = evt;\n        if (error.reason) {\n            error = evt.reason;\n        }\n        else if ((_a = evt.detail) === null || _a === void 0 ? void 0 : _a.reason) {\n            error = (_b = evt.detail) === null || _b === void 0 ? void 0 : _b.reason;\n        }\n        let value;\n        let type;\n        let stackFrames = [];\n        if (isPrimitive(error)) {\n            value = `${primitiveUnhandledValue} ${String(error)}`;\n            type = primitiveUnhandledType;\n        }\n        else {\n            [value, type, stackFrames] = getErrorDetails(error);\n        }\n        if (value) {\n            api.pushError(new Error(value), { type, stackFrames });\n        }\n    });\n}\n//# sourceMappingURL=registerOnunhandledrejection.js.map","import { BaseInstrumentation, VERSION } from '@grafana/faro-core';\nimport { registerOnerror } from './registerOnerror';\nimport { registerOnunhandledrejection } from './registerOnunhandledrejection';\nexport class ErrorsInstrumentation extends BaseInstrumentation {\n    constructor() {\n        super(...arguments);\n        this.name = '@grafana/faro-web-sdk:instrumentation-errors';\n        this.version = VERSION;\n    }\n    initialize() {\n        this.logDebug('Initializing');\n        registerOnerror(this.api);\n        registerOnunhandledrejection(this.api);\n    }\n}\n//# sourceMappingURL=instrumentation.js.map","import { getDetailsFromErrorArgs } from './getErrorDetails';\nexport function registerOnerror(api) {\n    const oldOnerror = window.onerror;\n    window.onerror = (...args) => {\n        try {\n            const { value, type, stackFrames } = getDetailsFromErrorArgs(args);\n            const originalError = args[4];\n            if (value) {\n                const options = { type, stackFrames };\n                if (originalError != null) {\n                    options.originalError = originalError;\n                }\n                api.pushError(new Error(value), options);\n            }\n        }\n        finally {\n            oldOnerror === null || oldOnerror === void 0 ? void 0 : oldOnerror.apply(window, args);\n        }\n    };\n}\n//# sourceMappingURL=registerOnerror.js.map","class t{t;o=0;i=[];u(t){if(t.hadRecentInput)return;const e=this.i[0],n=this.i.at(-1);this.o&&e&&n&&t.startTime-n.startTime<1e3&&t.startTime-e.startTime<5e3?(this.o+=t.value,this.i.push(t)):(this.o=t.value,this.i=[t]),this.t?.(t)}}const e=()=>{const t=performance.getEntriesByType(\"navigation\")[0];if(t&&t.responseStart>0&&t.responseStart<performance.now())return t},n=t=>{if(\"loading\"===document.readyState)return\"loading\";{const n=e();if(n){if(t<n.domInteractive)return\"loading\";if(0===n.domContentLoadedEventStart||t<n.domContentLoadedEventStart)return\"dom-interactive\";if(0===n.domComplete||t<n.domComplete)return\"dom-content-loaded\"}}return\"complete\"},o=t=>{const e=t.nodeName;return 1===t.nodeType?e.toLowerCase():e.toUpperCase().replace(/^#/,\"\")},i=t=>{let e=\"\";try{for(;9!==t?.nodeType;){const n=t,i=n.id?\"#\"+n.id:[o(n),...Array.from(n.classList).sort()].join(\".\");if(e.length+i.length>99)return e||i;if(e=e?i+\">\"+e:i,n.id)break;t=n.parentNode}}catch{}return e},r=new WeakMap;function s(t,e){return r.get(t)||r.set(t,new e),r.get(t)}let a=-1;const c=()=>a,f=t=>{addEventListener(\"pageshow\",(e=>{e.persisted&&(a=e.timeStamp,t(e))}),!0)},u=(t,e,n,o)=>{let i,r;return s=>{e.value>=0&&(s||o)&&(r=e.value-(i??0),(r||void 0===i)&&(i=e.value,e.delta=r,e.rating=((t,e)=>t>e[1]?\"poor\":t>e[0]?\"needs-improvement\":\"good\")(e.value,n),t(e)))}},d=t=>{requestAnimationFrame((()=>requestAnimationFrame((()=>t()))))},l=()=>{const t=e();return t?.activationStart??0},h=(t,n=-1)=>{const o=e();let i=\"navigate\";c()>=0?i=\"back-forward-cache\":o&&(document.prerendering||l()>0?i=\"prerender\":document.wasDiscarded?i=\"restore\":o.type&&(i=o.type.replace(/_/g,\"-\")));return{name:t,value:n,rating:\"good\",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:i}},m=(t,e,n={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(t)){const o=new PerformanceObserver((t=>{Promise.resolve().then((()=>{e(t.getEntries())}))}));return o.observe({type:t,buffered:!0,...n}),o}}catch{}},p=t=>{let e=!1;return()=>{e||(t(),e=!0)}};let g=-1;const y=new Set,v=()=>\"hidden\"!==document.visibilityState||document.prerendering?1/0:0,b=t=>{if(\"hidden\"===document.visibilityState){if(\"visibilitychange\"===t.type)for(const t of y)t();isFinite(g)||(g=\"visibilitychange\"===t.type?t.timeStamp:0,removeEventListener(\"prerenderingchange\",b,!0))}},M=()=>{if(g<0){const t=l(),e=document.prerendering?void 0:globalThis.performance.getEntriesByType(\"visibility-state\").filter((e=>\"hidden\"===e.name&&e.startTime>t))[0]?.startTime;g=e??v(),addEventListener(\"visibilitychange\",b,!0),addEventListener(\"prerenderingchange\",b,!0),f((()=>{setTimeout((()=>{g=v()}))}))}return{get firstHiddenTime(){return g},onHidden(t){y.add(t)}}},T=t=>{document.prerendering?addEventListener(\"prerenderingchange\",(()=>t()),!0):t()},E=[1800,3e3],D=(t,e={})=>{T((()=>{const n=M();let o,i=h(\"FCP\");const r=m(\"paint\",(t=>{for(const e of t)\"first-contentful-paint\"===e.name&&(r.disconnect(),e.startTime<n.firstHiddenTime&&(i.value=Math.max(e.startTime-l(),0),i.entries.push(e),o(!0)))}));r&&(o=u(t,i,E,e.reportAllChanges),f((n=>{i=h(\"FCP\"),o=u(t,i,E,e.reportAllChanges),d((()=>{i.value=performance.now()-n.timeStamp,o(!0)}))})))}))},L=[.1,.25],P=t=>t.find((t=>1===t.node?.nodeType))||t[0],S=(e,o={})=>{const r=s(o=Object.assign({},o),t),a=new WeakMap;r.t=t=>{if(t?.sources?.length){const e=P(t.sources),n=e?.node;if(n){const t=o.generateTarget?.(n)??i(n);a.set(e,t)}}};((e,n={})=>{const o=M();D(p((()=>{let i,r=h(\"CLS\",0);const a=s(n,t),c=t=>{for(const e of t)a.u(e);a.o>r.value&&(r.value=a.o,r.entries=a.i,i())},l=m(\"layout-shift\",c);l&&(i=u(e,r,L,n.reportAllChanges),o.onHidden((()=>{c(l.takeRecords()),i(!0)})),f((()=>{a.o=0,r=h(\"CLS\",0),i=u(e,r,L,n.reportAllChanges),d((()=>i()))})),setTimeout(i))})))})((t=>{const o=(t=>{let e={};if(t.entries.length){const o=t.entries.reduce(((t,e)=>t.value>e.value?t:e));if(o?.sources?.length){const t=P(o.sources);t&&(e={largestShiftTarget:a.get(t),largestShiftTime:o.startTime,largestShiftValue:o.value,largestShiftSource:t,largestShiftEntry:o,loadState:n(o.startTime)})}}return Object.assign(t,{attribution:e})})(t);e(o)}),o)},w=(t,o={})=>{D((o=>{const i=(t=>{let o={timeToFirstByte:0,firstByteToFCP:t.value,loadState:n(c())};if(t.entries.length){const i=e(),r=t.entries.at(-1);if(i){const e=i.activationStart||0,s=Math.max(0,i.responseStart-e);o={timeToFirstByte:s,firstByteToFCP:t.value-s,loadState:n(t.entries[0].startTime),navigationEntry:i,fcpEntry:r}}}return Object.assign(t,{attribution:o})})(o);t(i)}),o)};let _=0,F=1/0,k=0;const B=t=>{for(const e of t)e.interactionId&&(F=Math.min(F,e.interactionId),k=Math.max(k,e.interactionId),_=k?(k-F)/7+1:0)};let C;const O=()=>C?_:performance.interactionCount??0,j=()=>{\"interactionCount\"in performance||C||(C=m(\"event\",B,{type:\"event\",buffered:!0,durationThreshold:0}))};let I=0;class A{l=[];h=new Map;m;p;v(){I=O(),this.l.length=0,this.h.clear()}M(){const t=Math.min(this.l.length-1,Math.floor((O()-I)/50));return this.l[t]}u(t){if(this.m?.(t),!t.interactionId&&\"first-input\"!==t.entryType)return;const e=this.l.at(-1);let n=this.h.get(t.interactionId);if(n||this.l.length<10||t.duration>e.T){if(n?t.duration>n.T?(n.entries=[t],n.T=t.duration):t.duration===n.T&&t.startTime===n.entries[0].startTime&&n.entries.push(t):(n={id:t.interactionId,entries:[t],T:t.duration},this.h.set(n.id,n),this.l.push(n)),this.l.sort(((t,e)=>e.T-t.T)),this.l.length>10){const t=this.l.splice(10);for(const e of t)this.h.delete(e.id)}this.p?.(n)}}}const W=t=>{const e=globalThis.requestIdleCallback||setTimeout;\"hidden\"===document.visibilityState?t():(t=p(t),addEventListener(\"visibilitychange\",t,{once:!0,capture:!0}),e((()=>{t(),removeEventListener(\"visibilitychange\",t,{capture:!0})})))},q=[200,500],x=(t,e={})=>{const o=s(e=Object.assign({},e),A);let r=[],a=[],c=0;const d=new WeakMap,l=new WeakMap;let p=!1;const g=()=>{p||(W(y),p=!0)},y=()=>{const t=o.l.map((t=>d.get(t.entries[0]))),e=a.length-50;a=a.filter(((n,o)=>o>=e||t.includes(n)));const n=new Set;for(const t of a){const e=v(t.startTime,t.processingEnd);for(const t of e)n.add(t)}const i=r.length-1-50;r=r.filter(((t,e)=>t.startTime>c&&e>i||n.has(t))),p=!1};o.m=t=>{const e=t.startTime+t.duration;let n;c=Math.max(c,t.processingEnd);for(let o=a.length-1;o>=0;o--){const i=a[o];if(Math.abs(e-i.renderTime)<=8){n=i,n.startTime=Math.min(t.startTime,n.startTime),n.processingStart=Math.min(t.processingStart,n.processingStart),n.processingEnd=Math.max(t.processingEnd,n.processingEnd),n.entries.push(t);break}}n||(n={startTime:t.startTime,processingStart:t.processingStart,processingEnd:t.processingEnd,renderTime:e,entries:[t]},a.push(n)),(t.interactionId||\"first-input\"===t.entryType)&&d.set(t,n),g()},o.p=t=>{if(!l.get(t)){const n=t.entries[0].target;if(n){const o=e.generateTarget?.(n)??i(n);l.set(t,o)}}};const v=(t,e)=>{const n=[];for(const o of r)if(!(o.startTime+o.duration<t)){if(o.startTime>e)break;n.push(o)}return n},b=t=>{const e=t.entries[0],i=d.get(e),r=e.processingStart,s=Math.max(e.startTime+e.duration,r),a=Math.min(i.processingEnd,s),c=i.entries.sort(((t,e)=>t.processingStart-e.processingStart)),f=v(e.startTime,a),u=o.h.get(e.interactionId),h={interactionTarget:l.get(u),interactionType:e.name.startsWith(\"key\")?\"keyboard\":\"pointer\",interactionTime:e.startTime,nextPaintTime:s,processedEventEntries:c,longAnimationFrameEntries:f,inputDelay:r-e.startTime,processingDuration:a-r,presentationDelay:s-a,loadState:n(e.startTime),longestScript:void 0,totalScriptDuration:void 0,totalStyleAndLayoutDuration:void 0,totalPaintDuration:void 0,totalUnattributedDuration:void 0};(t=>{if(!t.longAnimationFrameEntries?.length)return;const e=t.interactionTime,n=t.inputDelay,o=t.processingDuration;let i,r,s=0,a=0,c=0,f=0;for(const c of t.longAnimationFrameEntries){a=a+c.startTime+c.duration-c.styleAndLayoutStart;for(const t of c.scripts){const c=t.startTime+t.duration;if(c<e)continue;const u=c-Math.max(e,t.startTime),d=t.duration?u/t.duration*t.forcedStyleAndLayoutDuration:0;s+=u-d,a+=d,u>f&&(r=t.startTime<e+n?\"input-delay\":t.startTime>=e+n+o?\"presentation-delay\":\"processing-duration\",i=t,f=u)}}const u=t.longAnimationFrameEntries.at(-1),d=u?u.startTime+u.duration:0;d>=e+n+o&&(c=t.nextPaintTime-d),i&&r&&(t.longestScript={entry:i,subpart:r,intersectingDuration:f}),t.totalScriptDuration=s,t.totalStyleAndLayoutDuration=a,t.totalPaintDuration=c,t.totalUnattributedDuration=t.nextPaintTime-e-s-a-c})(h);return Object.assign(t,{attribution:h})};m(\"long-animation-frame\",(t=>{r=r.concat(t),g()})),((t,e={})=>{if(!globalThis.PerformanceEventTiming||!(\"interactionId\"in PerformanceEventTiming.prototype))return;const n=M();T((()=>{j();let o,i=h(\"INP\");const r=s(e,A),a=t=>{W((()=>{for(const e of t)r.u(e);const e=r.M();e&&e.T!==i.value&&(i.value=e.T,i.entries=e.entries,o())}))},c=m(\"event\",a,{durationThreshold:e.durationThreshold??40});o=u(t,i,q,e.reportAllChanges),c&&(c.observe({type:\"first-input\",buffered:!0}),n.onHidden((()=>{a(c.takeRecords()),o(!0)})),f((()=>{r.v(),i=h(\"INP\"),o=u(t,i,q,e.reportAllChanges)})))}))})((e=>{const n=b(e);t(n)}),e)};class N{m;u(t){this.m?.(t)}}const H=[2500,4e3],R=(t,n={})=>{const o=s(n=Object.assign({},n),N),r=new WeakMap;o.m=t=>{const e=t.element;if(e){const o=n.generateTarget?.(e)??i(e);r.set(t,o)}};((t,e={})=>{T((()=>{const n=M();let o,i=h(\"LCP\");const r=s(e,N),a=t=>{e.reportAllChanges||(t=t.slice(-1));for(const e of t)r.u(e),e.startTime<n.firstHiddenTime&&(i.value=Math.max(e.startTime-l(),0),i.entries=[e],o())},c=m(\"largest-contentful-paint\",a);if(c){o=u(t,i,H,e.reportAllChanges);const n=p((()=>{a(c.takeRecords()),c.disconnect(),o(!0)})),r=t=>{t.isTrusted&&(W(n),removeEventListener(t.type,r,{capture:!0}))};for(const t of[\"keydown\",\"click\",\"visibilitychange\"])addEventListener(t,r,{capture:!0});f((n=>{i=h(\"LCP\"),o=u(t,i,H,e.reportAllChanges),d((()=>{i.value=performance.now()-n.timeStamp,o(!0)}))}))}}))})((n=>{const o=(t=>{let n={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadDuration:0,elementRenderDelay:t.value};if(t.entries.length){const o=e();if(o){const e=o.activationStart||0,i=t.entries.at(-1),s=i.url&&performance.getEntriesByType(\"resource\").filter((t=>t.name===i.url))[0],a=Math.max(0,o.responseStart-e),c=Math.max(a,s?(s.requestStart||s.startTime)-e:0),f=Math.min(t.value,Math.max(c,s?s.responseEnd-e:0));n={target:r.get(i),timeToFirstByte:a,resourceLoadDelay:c-a,resourceLoadDuration:f-c,elementRenderDelay:t.value-f,navigationEntry:o,lcpEntry:i},i.url&&(n.url=i.url),s&&(n.lcpResourceEntry=s)}}return Object.assign(t,{attribution:n})})(n);t(o)}),n)},U=[800,1800],V=t=>{document.prerendering?T((()=>V(t))):\"complete\"!==document.readyState?addEventListener(\"load\",(()=>V(t)),!0):setTimeout(t)},$=(t,n={})=>{((t,n={})=>{let o=h(\"TTFB\"),i=u(t,o,U,n.reportAllChanges);V((()=>{const r=e();r&&(o.value=Math.max(r.responseStart-l(),0),o.entries=[r],i(!0),f((()=>{o=h(\"TTFB\",0),i=u(t,o,U,n.reportAllChanges),i(!0)})))}))})((e=>{const n=(t=>{let e={waitingDuration:0,cacheDuration:0,dnsDuration:0,connectionDuration:0,requestDuration:0};if(t.entries.length){const n=t.entries[0],o=n.activationStart||0,i=Math.max((n.workerStart||n.fetchStart)-o,0),r=Math.max(n.domainLookupStart-o,0),s=Math.max(n.connectStart-o,0),a=Math.max(n.connectEnd-o,0);e={waitingDuration:i,cacheDuration:r-i,dnsDuration:s-r,connectionDuration:a-s,requestDuration:t.value-a,navigationEntry:n}}return Object.assign(t,{attribution:e})})(e);t(n)}),n)};export{L as CLSThresholds,E as FCPThresholds,q as INPThresholds,H as LCPThresholds,U as TTFBThresholds,S as onCLS,w as onFCP,x as onINP,R as onLCP,$ as onTTFB};\n","import { onCLS, onFCP, onINP, onLCP, onTTFB } from 'web-vitals/attribution';\nimport { unknownString } from '@grafana/faro-core';\nimport { getItem, webStorageType } from '../../utils';\nimport { NAVIGATION_ID_STORAGE_KEY } from '../instrumentationConstants';\n// duplicate keys saved in variables to save bundle size\n// refs: https://github.com/grafana/faro-web-sdk/pull/595#discussion_r1615833968\nconst loadStateKey = 'load_state';\nconst timeToFirstByteKey = 'time_to_first_byte';\nexport class WebVitalsWithAttribution {\n    constructor(corePushMeasurement, webVitalConfig) {\n        this.corePushMeasurement = corePushMeasurement;\n        this.webVitalConfig = webVitalConfig;\n    }\n    initialize() {\n        this.measureCLS();\n        this.measureFCP();\n        this.measureINP();\n        this.measureLCP();\n        this.measureTTFB();\n    }\n    measureCLS() {\n        var _a;\n        onCLS((metric) => {\n            const { loadState, largestShiftValue, largestShiftTime, largestShiftTarget } = metric.attribution;\n            const values = this.buildInitialValues(metric);\n            this.addIfPresent(values, 'largest_shift_value', largestShiftValue);\n            this.addIfPresent(values, 'largest_shift_time', largestShiftTime);\n            const context = this.buildInitialContext(metric);\n            this.addIfPresent(context, loadStateKey, loadState);\n            this.addIfPresent(context, 'largest_shift_target', largestShiftTarget);\n            this.pushMeasurement(values, context);\n        }, { reportAllChanges: (_a = this.webVitalConfig) === null || _a === void 0 ? void 0 : _a.reportAllChanges });\n    }\n    measureFCP() {\n        var _a;\n        onFCP((metric) => {\n            const { firstByteToFCP, timeToFirstByte, loadState } = metric.attribution;\n            const values = this.buildInitialValues(metric);\n            this.addIfPresent(values, 'first_byte_to_fcp', firstByteToFCP);\n            this.addIfPresent(values, timeToFirstByteKey, timeToFirstByte);\n            const context = this.buildInitialContext(metric);\n            this.addIfPresent(context, loadStateKey, loadState);\n            this.pushMeasurement(values, context);\n        }, { reportAllChanges: (_a = this.webVitalConfig) === null || _a === void 0 ? void 0 : _a.reportAllChanges });\n    }\n    measureINP() {\n        var _a;\n        onINP((metric) => {\n            const { interactionTime, presentationDelay, inputDelay, processingDuration, nextPaintTime, loadState, interactionTarget, interactionType, } = metric.attribution;\n            const values = this.buildInitialValues(metric);\n            this.addIfPresent(values, 'interaction_time', interactionTime);\n            this.addIfPresent(values, 'presentation_delay', presentationDelay);\n            this.addIfPresent(values, 'input_delay', inputDelay);\n            this.addIfPresent(values, 'processing_duration', processingDuration);\n            this.addIfPresent(values, 'next_paint_time', nextPaintTime);\n            const context = this.buildInitialContext(metric);\n            this.addIfPresent(context, loadStateKey, loadState);\n            this.addIfPresent(context, 'interaction_target', interactionTarget);\n            this.addIfPresent(context, 'interaction_type', interactionType);\n            this.pushMeasurement(values, context);\n        }, { reportAllChanges: (_a = this.webVitalConfig) === null || _a === void 0 ? void 0 : _a.reportAllChanges });\n    }\n    measureLCP() {\n        var _a;\n        onLCP((metric) => {\n            const { elementRenderDelay, resourceLoadDelay, resourceLoadDuration, timeToFirstByte, target } = metric.attribution;\n            const values = this.buildInitialValues(metric);\n            this.addIfPresent(values, 'element_render_delay', elementRenderDelay);\n            this.addIfPresent(values, 'resource_load_delay', resourceLoadDelay);\n            this.addIfPresent(values, 'resource_load_duration', resourceLoadDuration);\n            this.addIfPresent(values, timeToFirstByteKey, timeToFirstByte);\n            const context = this.buildInitialContext(metric);\n            this.addIfPresent(context, 'element', target);\n            this.pushMeasurement(values, context);\n        }, { reportAllChanges: (_a = this.webVitalConfig) === null || _a === void 0 ? void 0 : _a.reportAllChanges });\n    }\n    measureTTFB() {\n        var _a;\n        onTTFB((metric) => {\n            const { dnsDuration, connectionDuration, requestDuration, waitingDuration, cacheDuration } = metric.attribution;\n            const values = this.buildInitialValues(metric);\n            this.addIfPresent(values, 'dns_duration', dnsDuration);\n            this.addIfPresent(values, 'connection_duration', connectionDuration);\n            this.addIfPresent(values, 'request_duration', requestDuration);\n            this.addIfPresent(values, 'waiting_duration', waitingDuration);\n            this.addIfPresent(values, 'cache_duration', cacheDuration);\n            const context = this.buildInitialContext(metric);\n            this.pushMeasurement(values, context);\n        }, { reportAllChanges: (_a = this.webVitalConfig) === null || _a === void 0 ? void 0 : _a.reportAllChanges });\n    }\n    buildInitialValues(metric) {\n        const indicator = metric.name.toLowerCase();\n        return {\n            [indicator]: metric.value,\n            delta: metric.delta,\n        };\n    }\n    buildInitialContext(metric) {\n        var _a;\n        const navigationEntryId = (_a = getItem(NAVIGATION_ID_STORAGE_KEY, webStorageType.session)) !== null && _a !== void 0 ? _a : unknownString;\n        return {\n            id: metric.id,\n            rating: metric.rating,\n            navigation_type: metric.navigationType,\n            navigation_entry_id: navigationEntryId,\n        };\n    }\n    pushMeasurement(values, context) {\n        const type = 'web-vitals';\n        this.corePushMeasurement({ type, values }, { context });\n    }\n    addIfPresent(source, key, metric) {\n        if (metric) {\n            source[key] = metric;\n        }\n    }\n}\n//# sourceMappingURL=webVitalsWithAttribution.js.map","import { BaseInstrumentation, VERSION } from '@grafana/faro-core';\nimport { WebVitalsWithAttribution } from './webVitalsWithAttribution';\nexport class WebVitalsInstrumentation extends BaseInstrumentation {\n    constructor() {\n        super(...arguments);\n        this.name = '@grafana/faro-web-sdk:instrumentation-web-vitals';\n        this.version = VERSION;\n    }\n    initialize() {\n        this.logDebug('Initializing');\n        const webVitals = new WebVitalsWithAttribution(this.api.pushMeasurement, this.config.webVitalsInstrumentation);\n        webVitals.initialize();\n    }\n}\n//# sourceMappingURL=instrumentation.js.map","import { BaseInstrumentation, dateNow, EVENT_SESSION_EXTEND, EVENT_SESSION_RESUME, EVENT_SESSION_START, VERSION, } from '@grafana/faro-core';\nimport { createSession } from '../../metas';\nimport { getSessionManagerByConfig, isSampled } from './sessionManager';\nimport { PersistentSessionsManager } from './sessionManager/PersistentSessionsManager';\nimport { createUserSessionObject, isUserSessionValid } from './sessionManager/sessionManagerUtils';\nexport class SessionInstrumentation extends BaseInstrumentation {\n    constructor() {\n        super(...arguments);\n        this.name = '@grafana/faro-web-sdk:instrumentation-session';\n        this.version = VERSION;\n    }\n    sendSessionStartEvent(meta) {\n        var _a, _b;\n        const session = meta.session;\n        if (session && session.id !== ((_a = this.notifiedSession) === null || _a === void 0 ? void 0 : _a.id)) {\n            if (this.notifiedSession && this.notifiedSession.id === ((_b = session.attributes) === null || _b === void 0 ? void 0 : _b['previousSession'])) {\n                this.api.pushEvent(EVENT_SESSION_EXTEND, {}, undefined, { skipDedupe: true });\n                this.notifiedSession = session;\n                return;\n            }\n            this.notifiedSession = session;\n            // no need to add attributes and session id, they are included as part of meta\n            // automatically\n            this.api.pushEvent(EVENT_SESSION_START, {}, undefined, { skipDedupe: true });\n        }\n    }\n    createInitialSession(SessionManager, sessionsConfig) {\n        var _a, _b, _c, _d, _e, _f;\n        let storedUserSession = SessionManager.fetchUserSession();\n        if (sessionsConfig.persistent && sessionsConfig.maxSessionPersistenceTime && storedUserSession) {\n            const now = dateNow();\n            const shouldClearPersistentSession = storedUserSession.lastActivity < now - sessionsConfig.maxSessionPersistenceTime;\n            if (shouldClearPersistentSession) {\n                PersistentSessionsManager.removeUserSession();\n                storedUserSession = null;\n            }\n        }\n        let lifecycleType;\n        let initialSession;\n        if (isUserSessionValid(storedUserSession)) {\n            const sessionId = storedUserSession === null || storedUserSession === void 0 ? void 0 : storedUserSession.sessionId;\n            initialSession = createUserSessionObject({\n                sessionId,\n                isSampled: storedUserSession.isSampled || false,\n                started: storedUserSession === null || storedUserSession === void 0 ? void 0 : storedUserSession.started,\n            });\n            const storedUserSessionMeta = storedUserSession === null || storedUserSession === void 0 ? void 0 : storedUserSession.sessionMeta;\n            // For resumed sessions we want to merge the previous overrides with the configured ones.\n            // If the same key is present in both, the new one will override the old one.\n            const overrides = Object.assign(Object.assign({}, (_a = sessionsConfig.session) === null || _a === void 0 ? void 0 : _a.overrides), storedUserSessionMeta === null || storedUserSessionMeta === void 0 ? void 0 : storedUserSessionMeta.overrides);\n            initialSession.sessionMeta = Object.assign(Object.assign({}, sessionsConfig.session), { id: sessionId, attributes: Object.assign(Object.assign(Object.assign({}, (_b = sessionsConfig.session) === null || _b === void 0 ? void 0 : _b.attributes), storedUserSessionMeta === null || storedUserSessionMeta === void 0 ? void 0 : storedUserSessionMeta.attributes), { \n                    // For valid resumed sessions we do not want to recalculate the sampling decision on each init phase.\n                    isSampled: initialSession.isSampled.toString() }), overrides });\n            lifecycleType = EVENT_SESSION_RESUME;\n        }\n        else {\n            const sessionId = (_d = (_c = sessionsConfig.session) === null || _c === void 0 ? void 0 : _c.id) !== null && _d !== void 0 ? _d : createSession().id;\n            initialSession = createUserSessionObject({\n                sessionId,\n                isSampled: isSampled(),\n            });\n            const overrides = (_e = sessionsConfig.session) === null || _e === void 0 ? void 0 : _e.overrides;\n            initialSession.sessionMeta = Object.assign({ id: sessionId, attributes: Object.assign({ isSampled: initialSession.isSampled.toString() }, (_f = sessionsConfig.session) === null || _f === void 0 ? void 0 : _f.attributes) }, (overrides ? { overrides } : {}));\n            lifecycleType = EVENT_SESSION_START;\n        }\n        return { initialSession, lifecycleType };\n    }\n    registerBeforeSendHook(SessionManager) {\n        var _a;\n        const { updateSession } = new SessionManager();\n        (_a = this.transports) === null || _a === void 0 ? void 0 : _a.addBeforeSendHooks((item) => {\n            var _a, _b, _c;\n            updateSession();\n            const attributes = (_a = item.meta.session) === null || _a === void 0 ? void 0 : _a.attributes;\n            if (attributes && (attributes === null || attributes === void 0 ? void 0 : attributes['isSampled']) === 'true') {\n                let newItem = JSON.parse(JSON.stringify(item));\n                const newAttributes = (_b = newItem.meta.session) === null || _b === void 0 ? void 0 : _b.attributes;\n                newAttributes === null || newAttributes === void 0 ? true : delete newAttributes['isSampled'];\n                if (Object.keys(newAttributes !== null && newAttributes !== void 0 ? newAttributes : {}).length === 0) {\n                    (_c = newItem.meta.session) === null || _c === void 0 ? true : delete _c.attributes;\n                }\n                return newItem;\n            }\n            return null;\n        });\n    }\n    initialize() {\n        this.logDebug('init session instrumentation');\n        const sessionTrackingConfig = this.config.sessionTracking;\n        if (sessionTrackingConfig === null || sessionTrackingConfig === void 0 ? void 0 : sessionTrackingConfig.enabled) {\n            const SessionManager = getSessionManagerByConfig(sessionTrackingConfig);\n            this.registerBeforeSendHook(SessionManager);\n            const { initialSession, lifecycleType } = this.createInitialSession(SessionManager, sessionTrackingConfig);\n            SessionManager.storeUserSession(initialSession);\n            const initialSessionMeta = initialSession.sessionMeta;\n            this.notifiedSession = initialSessionMeta;\n            this.api.setSession(initialSessionMeta);\n            if (lifecycleType === EVENT_SESSION_START) {\n                this.api.pushEvent(EVENT_SESSION_START, {}, undefined, { skipDedupe: true });\n            }\n            if (lifecycleType === EVENT_SESSION_RESUME) {\n                this.api.pushEvent(EVENT_SESSION_RESUME, {}, undefined, { skipDedupe: true });\n            }\n        }\n        this.metas.addListener(this.sendSessionStartEvent.bind(this));\n    }\n}\n//# sourceMappingURL=instrumentation.js.map","import { faro, genShortID } from '@grafana/faro-core';\nexport function createSession(attributes) {\n    var _a, _b, _c, _d;\n    return {\n        id: (_d = (_c = (_b = (_a = faro.config) === null || _a === void 0 ? void 0 : _a.sessionTracking) === null || _b === void 0 ? void 0 : _b.generateSessionId) === null || _c === void 0 ? void 0 : _c.call(_b)) !== null && _d !== void 0 ? _d : genShortID(),\n        attributes,\n    };\n}\n//# sourceMappingURL=createSession.js.map","import { BaseInstrumentation, EVENT_VIEW_CHANGED, unknownString, VERSION } from '@grafana/faro-core';\n// all this does is send VIEW_CHANGED event\nexport class ViewInstrumentation extends BaseInstrumentation {\n    constructor() {\n        super(...arguments);\n        this.name = '@grafana/faro-web-sdk:instrumentation-view';\n        this.version = VERSION;\n    }\n    sendViewChangedEvent(meta) {\n        var _a, _b, _c, _d;\n        const view = meta.view;\n        if (view && view.name !== ((_a = this.notifiedView) === null || _a === void 0 ? void 0 : _a.name)) {\n            this.api.pushEvent(EVENT_VIEW_CHANGED, {\n                fromView: (_c = (_b = this.notifiedView) === null || _b === void 0 ? void 0 : _b.name) !== null && _c !== void 0 ? _c : unknownString,\n                toView: (_d = view.name) !== null && _d !== void 0 ? _d : unknownString,\n            }, undefined, { skipDedupe: true });\n            this.notifiedView = view;\n        }\n    }\n    initialize() {\n        this.metas.addListener(this.sendViewChangedEvent.bind(this));\n    }\n}\n//# sourceMappingURL=instrumentation.js.map","import { Observable } from '@grafana/faro-core';\nimport { MESSAGE_TYPE_HTTP_REQUEST_END, MESSAGE_TYPE_HTTP_REQUEST_START } from './monitors/const';\nexport function isRequestStartMessage(msg) {\n    return msg.type === MESSAGE_TYPE_HTTP_REQUEST_START;\n}\nexport function isRequestEndMessage(msg) {\n    return msg.type === MESSAGE_TYPE_HTTP_REQUEST_END;\n}\n/**\n * Tracks events in a timeboxed activity window. When the window goes quiet for `inactivityMs`,\n * it enters a draining phase: new short events are ignored; only active operations are awaited\n * until they end or `drainTimeoutMs` elapses.\n */\nexport class ActivityWindowTracker extends Observable {\n    constructor(eventsObservable, options) {\n        var _a, _b, _c, _d;\n        super();\n        this._tracking = false;\n        this.eventsObservable = eventsObservable;\n        this._options = {\n            inactivityMs: (_a = options === null || options === void 0 ? void 0 : options.inactivityMs) !== null && _a !== void 0 ? _a : 100,\n            drainTimeoutMs: (_b = options === null || options === void 0 ? void 0 : options.drainTimeoutMs) !== null && _b !== void 0 ? _b : 10 * 1000,\n            isOperationStart: (_c = options === null || options === void 0 ? void 0 : options.isOperationStart) !== null && _c !== void 0 ? _c : (() => undefined),\n            isOperationEnd: (_d = options === null || options === void 0 ? void 0 : options.isOperationEnd) !== null && _d !== void 0 ? _d : (() => undefined),\n        };\n        this._initialize();\n    }\n    _initialize() {\n        this.eventsObservable\n            .filter(() => {\n            return this._tracking;\n        })\n            .subscribe((event) => {\n            var _a, _b, _c;\n            this._lastEventTime = Date.now();\n            (_a = this._currentEvents) === null || _a === void 0 ? void 0 : _a.push(event);\n            const startKey = this._options.isOperationStart(event);\n            if (startKey) {\n                (_b = this._activeOperations) === null || _b === void 0 ? void 0 : _b.set(startKey, true);\n            }\n            const endKey = this._options.isOperationEnd(event);\n            if (endKey) {\n                (_c = this._activeOperations) === null || _c === void 0 ? void 0 : _c.delete(endKey);\n            }\n            this._scheduleInactivityCheck();\n        });\n    }\n    startTracking() {\n        if (this._tracking) {\n            return;\n        }\n        this._tracking = true;\n        this._startTime = Date.now();\n        this._lastEventTime = Date.now();\n        this.notify({\n            message: 'tracking-started',\n        });\n        this._currentEvents = [];\n        this._activeOperations = new Map();\n        this._scheduleInactivityCheck();\n    }\n    stopTracking() {\n        this._tracking = false;\n        this._clearTimer(this._inactivityTid);\n        this._clearTimer(this._drainTid);\n        let duration = 0;\n        if (this.hasActiveOperations()) {\n            duration = Date.now() - this._startTime;\n        }\n        else {\n            duration = this._lastEventTime ? this._lastEventTime - this._startTime : 0;\n        }\n        this.notify({\n            message: 'tracking-ended',\n            events: this._currentEvents,\n            duration: duration,\n        });\n    }\n    _scheduleInactivityCheck() {\n        this._inactivityTid = startTimeout(this._inactivityTid, () => {\n            if (this.hasActiveOperations()) {\n                this._startDrainTimeout();\n            }\n            else {\n                this.stopTracking();\n            }\n        }, this._options.inactivityMs);\n    }\n    _startDrainTimeout() {\n        this._drainTid = startTimeout(this._drainTid, () => {\n            this.stopTracking();\n        }, this._options.drainTimeoutMs);\n    }\n    hasActiveOperations() {\n        return !!this._activeOperations && this._activeOperations.size > 0;\n    }\n    _clearTimer(id) {\n        if (id) {\n            clearTimeout(id);\n        }\n    }\n}\nfunction startTimeout(timeoutId, cb, delay) {\n    if (timeoutId) {\n        clearTimeout(timeoutId);\n    }\n    //@ts-expect-error for some reason vscode is using the node types\n    timeoutId = setTimeout(() => {\n        cb();\n    }, delay);\n    return timeoutId;\n}\n//# sourceMappingURL=activityWindowTracker.js.map","import { Observable } from '@grafana/faro-core';\nexport const MESSAGE_TYPE_INTERACTION = 'interaction';\nlet interactionObservable;\nconst registeredEventNames = new Set();\nconst eventNameToHandler = new Map();\nexport function monitorInteractions(eventNames) {\n    if (!interactionObservable) {\n        interactionObservable = new Observable();\n    }\n    eventNames.forEach((eventName) => {\n        if (!registeredEventNames.has(eventName)) {\n            const handler = () => {\n                interactionObservable.notify({ type: MESSAGE_TYPE_INTERACTION, name: eventName });\n            };\n            window.addEventListener(eventName, handler);\n            registeredEventNames.add(eventName);\n            eventNameToHandler.set(eventName, handler);\n        }\n    });\n    return interactionObservable;\n}\n// Test-only utility to reset state between tests\nexport function __resetInteractionMonitorForTests() {\n    eventNameToHandler.forEach((handler, eventName) => {\n        window.removeEventListener(eventName, handler);\n    });\n    eventNameToHandler.clear();\n    registeredEventNames.clear();\n    interactionObservable = undefined;\n}\n//# sourceMappingURL=interactionMonitor.js.map","import { Observable } from '@grafana/faro-core';\nexport const MESSAGE_TYPE_URL_CHANGE = 'url-change';\nlet urlChangeObservable;\nlet isInstrumented = false;\nlet lastHref;\nlet originalPushState;\nlet originalReplaceState;\nlet onPopStateHandler;\nlet onHashChangeHandler;\nlet onNavigateHandler;\nlet originalNavigateEventIntercept;\nexport function monitorUrlChanges() {\n    if (!urlChangeObservable) {\n        urlChangeObservable = new Observable();\n        lastHref = location.href;\n    }\n    function emit(trigger, toOverride) {\n        const next = toOverride !== null && toOverride !== void 0 ? toOverride : location.href;\n        if (next !== lastHref) {\n            urlChangeObservable.notify({ type: MESSAGE_TYPE_URL_CHANGE, from: lastHref, to: next, trigger });\n            lastHref = next;\n        }\n    }\n    if (!isInstrumented) {\n        const hasNavigation = 'navigation' in window && 'NavigateEvent' in window;\n        if (hasNavigation) {\n            // Prefer Navigation API when supported: do not patch history or add popstate/hashchange listeners\n            onNavigateHandler = (e) => {\n                try {\n                    const destination = e === null || e === void 0 ? void 0 : e.destination;\n                    if ((destination === null || destination === void 0 ? void 0 : destination.sameDocument) && typeof destination.url === 'string') {\n                        emit('navigate', destination.url);\n                    }\n                }\n                catch (_err) {\n                    // Swallow to avoid impacting host app\n                }\n            };\n            window.navigation.addEventListener('navigate', onNavigateHandler);\n            const NavigateEventConstructor = window.NavigateEvent;\n            if (NavigateEventConstructor &&\n                NavigateEventConstructor.prototype &&\n                typeof NavigateEventConstructor.prototype.intercept === 'function') {\n                if (!originalNavigateEventIntercept) {\n                    originalNavigateEventIntercept = NavigateEventConstructor.prototype.intercept;\n                }\n                // Wrap intercept to detect soft navigations (cross-document turned same-document)\n                NavigateEventConstructor.prototype.intercept = function (options) {\n                    try {\n                        const canIntercept = !!(this === null || this === void 0 ? void 0 : this.canIntercept);\n                        const destination = this === null || this === void 0 ? void 0 : this.destination;\n                        if (canIntercept &&\n                            destination &&\n                            destination.sameDocument === false &&\n                            typeof destination.url === 'string') {\n                            emit('navigate-intercept', destination.url);\n                        }\n                    }\n                    catch (_err) {\n                        // ignore\n                    }\n                    return originalNavigateEventIntercept.call(this, options);\n                };\n            }\n            isInstrumented = true;\n        }\n        else {\n            // Fallback: history API patching + popstate/hashchange\n            if (!originalPushState) {\n                originalPushState = window.history.pushState;\n            }\n            window.history.pushState = function (...args) {\n                const result = originalPushState.apply(window.history, args);\n                emit('pushState');\n                return result;\n            };\n            if (!originalReplaceState) {\n                originalReplaceState = window.history.replaceState;\n            }\n            window.history.replaceState = function (...args) {\n                const result = originalReplaceState.apply(window.history, args);\n                emit('replaceState');\n                return result;\n            };\n            onPopStateHandler = () => emit('popstate');\n            onHashChangeHandler = () => emit('hashchange');\n            window.addEventListener('popstate', onPopStateHandler);\n            window.addEventListener('hashchange', onHashChangeHandler);\n            isInstrumented = true;\n        }\n    }\n    return urlChangeObservable;\n}\n// Test-only utility to reset state between tests\nexport function __resetUrlChangeMonitorForTests() {\n    var _a, _b;\n    if (onPopStateHandler) {\n        window.removeEventListener('popstate', onPopStateHandler);\n    }\n    if (onHashChangeHandler) {\n        window.removeEventListener('hashchange', onHashChangeHandler);\n    }\n    if (onNavigateHandler && ((_a = window.navigation) === null || _a === void 0 ? void 0 : _a.removeEventListener)) {\n        window.navigation.removeEventListener('navigate', onNavigateHandler);\n    }\n    if (originalPushState) {\n        window.history.pushState = originalPushState;\n    }\n    if (originalReplaceState) {\n        window.history.replaceState = originalReplaceState;\n    }\n    if (originalNavigateEventIntercept && ((_b = window.NavigateEvent) === null || _b === void 0 ? void 0 : _b.prototype)) {\n        window.NavigateEvent.prototype.intercept = originalNavigateEventIntercept;\n    }\n    urlChangeObservable = undefined;\n    isInstrumented = false;\n    lastHref = undefined;\n    onPopStateHandler = undefined;\n    onHashChangeHandler = undefined;\n    onNavigateHandler = undefined;\n    originalPushState = undefined;\n    originalReplaceState = undefined;\n    originalNavigateEventIntercept = undefined;\n}\n//# sourceMappingURL=urlChangeMonitor.js.map","import { BaseInstrumentation, faro, Observable, VERSION } from '@grafana/faro-core';\nimport { ActivityWindowTracker, isRequestEndMessage, isRequestStartMessage } from '../_internal/activityWindowTracker';\nimport { monitorDomMutations } from '../_internal/monitors/domMutationMonitor';\nimport { monitorHttpRequests } from '../_internal/monitors/httpRequestMonitor';\nimport { monitorInteractions } from '../_internal/monitors/interactionMonitor';\nimport { monitorUrlChanges } from '../_internal/monitors/urlChangeMonitor';\nexport class NavigationInstrumentation extends BaseInstrumentation {\n    constructor() {\n        super(...arguments);\n        this.name = '@grafana/faro-web-sdk:instrumentation-navigation';\n        this.version = VERSION;\n    }\n    initialize() {\n        const httpMonitor = monitorHttpRequests();\n        const domMutationsMonitor = monitorDomMutations();\n        const urlMonitor = monitorUrlChanges();\n        const interactionMonitor = monitorInteractions(['pointerdown', 'keydown']);\n        const activityWindowTracker = new ActivityWindowTracker(new Observable().merge(httpMonitor, domMutationsMonitor, urlMonitor), {\n            inactivityMs: 100,\n            drainTimeoutMs: 10 * 1000,\n            isOperationStart: (msg) => (isRequestStartMessage(msg) ? msg.request.requestId : undefined),\n            isOperationEnd: (msg) => (isRequestEndMessage(msg) ? msg.request.requestId : undefined),\n        });\n        activityWindowTracker\n            .filter((msg) => {\n            return msg.message === 'tracking-ended';\n        })\n            .subscribe((msg) => {\n            var _a, _b, _c;\n            if (((_a = msg.events) === null || _a === void 0 ? void 0 : _a.some((e) => e.type === 'url-change')) &&\n                ((_b = msg.events) === null || _b === void 0 ? void 0 : _b.some((e) => e.type === 'dom-mutation'))) {\n                const urlChange = (_c = msg.events) === null || _c === void 0 ? void 0 : _c.find((e) => e.type === 'url-change');\n                faro.api.pushEvent('faro.navigation', {\n                    fromUrl: urlChange === null || urlChange === void 0 ? void 0 : urlChange.from,\n                    toUrl: urlChange === null || urlChange === void 0 ? void 0 : urlChange.to,\n                    sameDocument: String(true),\n                    duration: msg.duration,\n                });\n            }\n        });\n        interactionMonitor.subscribe(() => {\n            activityWindowTracker.startTracking();\n        });\n    }\n}\n//# sourceMappingURL=instrumentation.js.map","import { BaseInstrumentation, stringifyObjectValues, VERSION } from '@grafana/faro-core';\nexport class CSPInstrumentation extends BaseInstrumentation {\n    constructor() {\n        super();\n        this.name = '@grafana/faro-web-sdk:instrumentation-csp';\n        this.version = VERSION;\n    }\n    initialize() {\n        document.addEventListener('securitypolicyviolation', this.securitypolicyviolationHandler.bind(this));\n    }\n    destroy() {\n        document.removeEventListener('securitypolicyviolation', this.securitypolicyviolationHandler);\n    }\n    securitypolicyviolationHandler(ev) {\n        this.api.pushEvent('securitypolicyviolation', stringifyObjectValues(ev));\n    }\n}\n//# sourceMappingURL=instrumentation.js.map","import { allLogLevels, BaseInstrumentation, defaultErrorArgsSerializer, defaultLogArgsSerializer, LogLevel, VERSION, } from '@grafana/faro-core';\nimport { getDetailsFromConsoleErrorArgs } from '../errors/getErrorDetails';\nexport class ConsoleInstrumentation extends BaseInstrumentation {\n    constructor() {\n        super(...arguments);\n        this.name = '@grafana/faro-web-sdk:instrumentation-console';\n        this.version = VERSION;\n        this.errorSerializer = defaultLogArgsSerializer;\n    }\n    initialize() {\n        var _a;\n        const instrumentationOptions = this.config.consoleInstrumentation;\n        const serializeErrors = (instrumentationOptions === null || instrumentationOptions === void 0 ? void 0 : instrumentationOptions.serializeErrors) || !!(instrumentationOptions === null || instrumentationOptions === void 0 ? void 0 : instrumentationOptions.errorSerializer);\n        this.errorSerializer = serializeErrors\n            ? ((_a = instrumentationOptions === null || instrumentationOptions === void 0 ? void 0 : instrumentationOptions.errorSerializer) !== null && _a !== void 0 ? _a : defaultErrorArgsSerializer)\n            : defaultLogArgsSerializer;\n        allLogLevels\n            .filter((level) => { var _a; return !((_a = instrumentationOptions === null || instrumentationOptions === void 0 ? void 0 : instrumentationOptions.disabledLevels) !== null && _a !== void 0 ? _a : ConsoleInstrumentation.defaultDisabledLevels).includes(level); })\n            .forEach((level) => {\n            /* eslint-disable-next-line no-console */\n            console[level] = (...args) => {\n                try {\n                    if (level === LogLevel.ERROR && !(instrumentationOptions === null || instrumentationOptions === void 0 ? void 0 : instrumentationOptions.consoleErrorAsLog)) {\n                        const { value, type, stackFrames } = getDetailsFromConsoleErrorArgs(args, this.errorSerializer);\n                        if (value && !type && !stackFrames) {\n                            this.api.pushError(new Error(ConsoleInstrumentation.consoleErrorPrefix + value));\n                            return;\n                        }\n                        this.api.pushError(new Error(ConsoleInstrumentation.consoleErrorPrefix + value), { type, stackFrames });\n                    }\n                    else if (level === LogLevel.ERROR && (instrumentationOptions === null || instrumentationOptions === void 0 ? void 0 : instrumentationOptions.consoleErrorAsLog)) {\n                        const { value, type, stackFrames } = getDetailsFromConsoleErrorArgs(args, this.errorSerializer);\n                        this.api.pushLog(value ? [ConsoleInstrumentation.consoleErrorPrefix + value] : args, {\n                            level,\n                            context: {\n                                value: value !== null && value !== void 0 ? value : '',\n                                type: type !== null && type !== void 0 ? type : '',\n                                stackFrames: (stackFrames === null || stackFrames === void 0 ? void 0 : stackFrames.length) ? defaultErrorArgsSerializer(stackFrames) : '',\n                            },\n                        });\n                    }\n                    else {\n                        this.api.pushLog(args, { level });\n                    }\n                }\n                catch (err) {\n                    this.logError(err);\n                }\n                finally {\n                    this.unpatchedConsole[level](...args);\n                }\n            };\n        });\n    }\n}\nConsoleInstrumentation.defaultDisabledLevels = [LogLevel.DEBUG, LogLevel.TRACE, LogLevel.LOG];\nConsoleInstrumentation.consoleErrorPrefix = 'console.error: ';\n//# sourceMappingURL=instrumentation.js.map","import { ConsoleInstrumentation, CSPInstrumentation, ErrorsInstrumentation, NavigationInstrumentation, PerformanceInstrumentation, SessionInstrumentation, UserActionInstrumentation, ViewInstrumentation, WebVitalsInstrumentation, } from '../instrumentations';\nexport function getWebInstrumentations(options = {}) {\n    const instrumentations = [\n        new UserActionInstrumentation(),\n        new ErrorsInstrumentation(),\n        new WebVitalsInstrumentation(),\n        new SessionInstrumentation(),\n        new ViewInstrumentation(),\n        new NavigationInstrumentation(),\n    ];\n    if (options.enablePerformanceInstrumentation !== false) {\n        // unshift to ensure that initialization starts before the other instrumentations\n        instrumentations.unshift(new PerformanceInstrumentation());\n    }\n    if (options.enableContentSecurityPolicyInstrumentation !== false) {\n        instrumentations.push(new CSPInstrumentation());\n    }\n    if (options.captureConsole !== false) {\n        instrumentations.push(new ConsoleInstrumentation());\n    }\n    return instrumentations;\n}\n//# sourceMappingURL=getWebInstrumentations.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { createInternalLogger, defaultBatchingConfig, defaultGlobalObjectKey, defaultInternalLoggerLevel, defaultLogArgsSerializer, defaultUnpatchedConsole, isBoolean, isEmpty, isObject, } from '@grafana/faro-core';\nimport { defaultEventDomain } from '../consts';\nimport { parseStacktrace } from '../instrumentations';\nimport { defaultSessionTrackingConfig } from '../instrumentations/session';\nimport { userActionDataAttribute } from '../instrumentations/userActions/const';\nimport { browserMeta } from '../metas';\nimport { k6Meta } from '../metas/k6';\nimport { createPageMeta } from '../metas/page';\nimport { FetchTransport } from '../transports';\nimport { getWebInstrumentations } from './getWebInstrumentations';\nexport function makeCoreConfig(browserConfig) {\n    var _a, _b, _c, _d, _e;\n    const transports = [];\n    const internalLogger = createInternalLogger(browserConfig.unpatchedConsole, browserConfig.internalLoggerLevel);\n    if (browserConfig.transports) {\n        if (browserConfig.url || browserConfig.apiKey) {\n            internalLogger.error('if \"transports\" is defined, \"url\" and \"apiKey\" should not be defined');\n        }\n        transports.push(...browserConfig.transports);\n    }\n    else if (browserConfig.url) {\n        transports.push(new FetchTransport({\n            url: browserConfig.url,\n            apiKey: browserConfig.apiKey,\n        }));\n    }\n    else {\n        internalLogger.error('either \"url\" or \"transports\" must be defined');\n    }\n    const { \n    // properties with default values\n    dedupe = true, eventDomain = defaultEventDomain, globalObjectKey = defaultGlobalObjectKey, instrumentations = getWebInstrumentations(), internalLoggerLevel = defaultInternalLoggerLevel, isolate = false, logArgsSerializer = defaultLogArgsSerializer, metas = createDefaultMetas(browserConfig), paused = false, preventGlobalExposure = false, unpatchedConsole = defaultUnpatchedConsole, url: browserConfigUrl, experimental } = browserConfig, \n    // Properties without default values or which aren't used to create derived config\n    restProperties = __rest(browserConfig, [\"dedupe\", \"eventDomain\", \"globalObjectKey\", \"instrumentations\", \"internalLoggerLevel\", \"isolate\", \"logArgsSerializer\", \"metas\", \"paused\", \"preventGlobalExposure\", \"unpatchedConsole\", \"url\", \"experimental\"]);\n    // Extract experimental features with defaults\n    const trackNavigation = (_a = experimental === null || experimental === void 0 ? void 0 : experimental.trackNavigation) !== null && _a !== void 0 ? _a : false;\n    // Extract user actions instrumentation with defaults\n    const userActionsInstrumentation = {\n        dataAttributeName: (_c = (_b = browserConfig.userActionsInstrumentation) === null || _b === void 0 ? void 0 : _b.dataAttributeName) !== null && _c !== void 0 ? _c : userActionDataAttribute,\n        excludeItem: (_d = browserConfig.userActionsInstrumentation) === null || _d === void 0 ? void 0 : _d.excludeItem,\n    };\n    return Object.assign(Object.assign({}, restProperties), { batching: Object.assign(Object.assign({}, defaultBatchingConfig), browserConfig.batching), dedupe: dedupe, globalObjectKey, instrumentations: getFilteredInstrumentations(instrumentations, browserConfig), internalLoggerLevel,\n        isolate,\n        logArgsSerializer,\n        metas,\n        parseStacktrace,\n        paused,\n        preventGlobalExposure,\n        transports,\n        unpatchedConsole,\n        eventDomain, ignoreUrls: [\n            ...((_e = browserConfig.ignoreUrls) !== null && _e !== void 0 ? _e : []),\n            // ignore configured cloud collector url by default\n            ...(browserConfigUrl ? [browserConfigUrl] : []),\n            // Try our best to exclude collector URLs form other Faro instances. By default these are URLs ending with /collect or /collect/ followed by alphanumeric characters.\n            /\\/collect(?:\\/[\\w]*)?$/,\n        ], sessionTracking: Object.assign(Object.assign(Object.assign({}, defaultSessionTrackingConfig), browserConfig.sessionTracking), crateSessionMeta({\n            trackGeolocation: browserConfig.trackGeolocation,\n            sessionTracking: browserConfig.sessionTracking,\n        })), userActionsInstrumentation, experimental: {\n            trackNavigation,\n        } });\n}\nfunction getFilteredInstrumentations(instrumentations, { experimental }) {\n    var _a;\n    const trackNavigation = (_a = experimental === null || experimental === void 0 ? void 0 : experimental.trackNavigation) !== null && _a !== void 0 ? _a : false;\n    return instrumentations.filter((instr) => {\n        if (instr.name === '@grafana/faro-web-sdk:instrumentation-navigation' && !trackNavigation) {\n            return false;\n        }\n        return true;\n    });\n}\nfunction createDefaultMetas(browserConfig) {\n    var _a, _b;\n    const { page, generatePageId } = (_a = browserConfig === null || browserConfig === void 0 ? void 0 : browserConfig.pageTracking) !== null && _a !== void 0 ? _a : {};\n    const initialMetas = [\n        browserMeta,\n        createPageMeta({ generatePageId, initialPageMeta: page }),\n        ...((_b = browserConfig.metas) !== null && _b !== void 0 ? _b : []),\n    ];\n    const isK6BrowserSession = isObject(window === null || window === void 0 ? void 0 : window.k6);\n    if (isK6BrowserSession) {\n        return [...initialMetas, k6Meta];\n    }\n    return initialMetas;\n}\nfunction crateSessionMeta({ trackGeolocation, sessionTracking, }) {\n    var _a;\n    const overrides = {};\n    if (isBoolean(trackGeolocation)) {\n        overrides.geoLocationTrackingEnabled = trackGeolocation;\n    }\n    if (isEmpty(overrides)) {\n        return {};\n    }\n    return {\n        session: Object.assign(Object.assign({}, ((_a = sessionTracking === null || sessionTracking === void 0 ? void 0 : sessionTracking.session) !== null && _a !== void 0 ? _a : {})), { overrides }),\n    };\n}\n//# sourceMappingURL=makeCoreConfig.js.map","import { initializeFaro as coreInit } from '@grafana/faro-core';\nimport { makeCoreConfig } from './config';\nexport function initializeFaro(config) {\n    const coreConfig = makeCoreConfig(config);\n    if (!coreConfig) {\n        return undefined;\n    }\n    return coreInit(coreConfig);\n}\n//# sourceMappingURL=initialize.js.map","import { type Environment } from '../getEnvironment';\nimport { type FaroEnvironment } from './getFaroEnvironment';\n\nexport const FARO_ENVIRONMENTS = new Map<Environment, FaroEnvironment>([\n  // Uncomment this map entry to test from your local machine\n  // [\n  //   'local',\n  //   {\n  //     environment: 'local',\n  //     appName: 'grafana-metricsdrilldown-app-local',\n  //     faroUrl: 'https://faro-collector-ops-eu-south-0.grafana-ops.net/collect/b854cd2319527968f415fd44ea01fe8a',\n  //   },\n  // ],\n  // Always keep the options below\n  [\n    'dev',\n    {\n      environment: 'dev',\n      appName: 'grafana-metricsdrilldown-app-dev',\n      faroUrl: 'https://faro-collector-ops-eu-south-0.grafana-ops.net/collect/8c57b32175ba39d35dfaccee7cd793c7',\n    },\n  ],\n  [\n    'ops',\n    {\n      environment: 'ops',\n      appName: 'grafana-metricsdrilldown-app-ops',\n      faroUrl: 'https://faro-collector-ops-eu-south-0.grafana-ops.net/collect/d65ab91eb9c5e8c51b474d9313ba28f4',\n    },\n  ],\n  [\n    'prod',\n    {\n      environment: 'prod',\n      appName: 'grafana-metricsdrilldown-app-prod',\n      faroUrl: 'https://faro-collector-ops-eu-south-0.grafana-ops.net/collect/0f4f1bbc97c9e2db4fa85ef75a559885',\n    },\n  ],\n]);\n","import { getWebInstrumentations, initializeFaro, type Faro } from '@grafana/faro-web-sdk';\nimport { config } from '@grafana/runtime';\n\nimport { getFaroEnvironment } from './getFaroEnvironment';\nimport { GIT_COMMIT } from '../../../version';\nimport { PLUGIN_BASE_URL, PLUGIN_ID } from '../../constants/plugin';\n\nlet faro: Faro | null = null;\n\nexport const getFaro = () => faro;\nexport const setFaro = (instance: Faro | null) => (faro = instance);\n\nconst errorsToIgnore = [\n  // Matches core Grafana config (see https://github.com/grafana grafana/pull/54824)\n  'ResizeObserver loop limit exceeded',\n  'ResizeObserver loop completed',\n  'Non-Error exception captured with keys',\n  'Failed sending payload to the receiver',\n];\nconst errorsToIgnoreSet = new Set(errorsToIgnore);\n/**\n * Determines if an error message is in the list of known non-critical errors that should not be reported to Faro.\n */\nexport const shouldIgnoreError = (errorMessage: string) => errorsToIgnoreSet.has(errorMessage);\n\nexport function initFaro() {\n  if (getFaro()) {\n    return;\n  }\n\n  const faroEnvironment = getFaroEnvironment();\n  if (!faroEnvironment) {\n    return;\n  }\n\n  const { environment, faroUrl, appName } = faroEnvironment;\n  const { apps, bootData } = config;\n  const appRelease = apps[PLUGIN_ID].version;\n  const userEmail = bootData.user.email;\n\n  setFaro(\n    initializeFaro({\n      url: faroUrl,\n      app: {\n        name: appName,\n        release: appRelease,\n        version: GIT_COMMIT,\n        environment,\n      },\n      user: {\n        email: userEmail,\n      },\n      ignoreErrors: errorsToIgnore,\n      instrumentations: [\n        ...getWebInstrumentations({\n          captureConsole: false,\n        }),\n      ],\n      isolate: true,\n      beforeSend: (event) => {\n        if ((event.meta.page?.url ?? '').includes(PLUGIN_BASE_URL)) {\n          return event;\n        }\n\n        return null;\n      },\n    })\n  );\n}\n","import { getEnvironment, type Environment } from '../getEnvironment';\nimport { FARO_ENVIRONMENTS } from './faro-environments';\n\nexport type FaroEnvironment = { environment: Environment; appName: string; faroUrl: string };\n\nexport function getFaroEnvironment() {\n  const environment = getEnvironment();\n\n  if (!environment || !FARO_ENVIRONMENTS.has(environment)) {\n    return;\n  }\n\n  return FARO_ENVIRONMENTS.get(environment) as FaroEnvironment;\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","__webpack_require__.amdO = {};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".js?_cache=\" + {\"2\":\"7101916049f818d58037\",\"14\":\"07f6f78ab45cabb01bf7\",\"64\":\"bfff71b84c3b67cff0fb\",\"70\":\"2d1e37c1233024806300\",\"74\":\"6a6cf4493168a4c4b2a0\",\"150\":\"a9eae9ab36b5aa3a2e33\",\"156\":\"dcd383229c5404d776bf\",\"190\":\"a6f6d81aca619dd3f85e\",\"206\":\"130901d6a2dcaa8e3dfe\",\"220\":\"f2309b411f0ae9855b9a\",\"290\":\"c655a966d0d783478b54\",\"327\":\"62ce92e00bf3f37cfb9f\",\"341\":\"8f9cffe8b5fc06dedcdc\",\"353\":\"00ac2f1a6a55baf37ac5\",\"377\":\"23f21b55cd8009b046ec\",\"494\":\"c08c93e5cce9bf750560\",\"503\":\"201b25c5f9822f473e7d\",\"509\":\"5219bd37cc1302880d7d\",\"549\":\"79f2b0fd3610c8ad03b7\",\"582\":\"a1556b2a2a05b8e0497f\",\"591\":\"72d8c50f59d75a36ab7e\",\"605\":\"596aa39d721e4859e1a5\",\"614\":\"c8daf176bb4a9973ba24\",\"644\":\"14d38f9a6e5a99fbf61f\",\"660\":\"b143f478b19fd3cf5886\",\"697\":\"d2ab3d5c44c5aa5add66\",\"767\":\"b4f9d973b92b7eab01ca\",\"782\":\"cbc8bcefc46d20d7f704\",\"792\":\"79c48dbde1c722d712fa\",\"851\":\"6cfdc72d68c2c3754b46\",\"876\":\"1a7696652a5f03389ba7\",\"944\":\"5da0375876db943a6756\",\"980\":\"655996be379e3e595023\"}[chunkId] + \"\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.p = \"public/plugins/grafana-metricsdrilldown-app/\";","\n__webpack_require__.sriHashes = {\"2\":\"*-*-*-CHUNK-SRI-HASH-KxNH5obYlaW+JIxVYXIF3l/pEoEIo=\",\"14\":\"*-*-*-CHUNK-SRI-HASH-dvQ7ukjlEwoz8inaKrMhF2Bd2sazE=\",\"64\":\"*-*-*-CHUNK-SRI-HASH-vvn0BuWiqRwTVtSNskzASY3JWWAmM=\",\"70\":\"*-*-*-CHUNK-SRI-HASH-xWY8doE1DeLaJIFCgLMPYsD8HihIE=\",\"74\":\"*-*-*-CHUNK-SRI-HASH-skm3VwtRP9NPbFQdsfQ/Uy4dHqxbE=\",\"150\":\"*-*-*-CHUNK-SRI-HASH-E+ZTFEbbKUgQemR1JnK804vNGQjkk=\",\"156\":\"*-*-*-CHUNK-SRI-HASH-WJmP/duASTPVeH/OvHeiWm+SND7Ec=\",\"190\":\"*-*-*-CHUNK-SRI-HASH-rcoc/4A13kdAxL9r9KoniYNj/vtcw=\",\"206\":\"*-*-*-CHUNK-SRI-HASH-7PNiM9mPFm6C4aghznMp1ZHWpqZeQ=\",\"220\":\"*-*-*-CHUNK-SRI-HASH-sfCYb85hcih1PMaboIql0g/Z3wGHI=\",\"290\":\"*-*-*-CHUNK-SRI-HASH-moY5rFKPt2HsdEwk31ylqcV/G3N2c=\",\"327\":\"*-*-*-CHUNK-SRI-HASH-9zMyS+diS2CyXaoRqNdc/NbCYv6oA=\",\"341\":\"*-*-*-CHUNK-SRI-HASH-siU9z7Fk8PJe2H4v/JPs960N+cKCk=\",\"353\":\"*-*-*-CHUNK-SRI-HASH-tgN5/QOMm8ifd8033CuZOHps9gF6A=\",\"377\":\"*-*-*-CHUNK-SRI-HASH-Zgn1vHNE3/WssCBD3JyphwR9I21uA=\",\"494\":\"*-*-*-CHUNK-SRI-HASH-eRr6s5RWq8lBXJTDFX2+PzG1Y5+wI=\",\"503\":\"*-*-*-CHUNK-SRI-HASH-IXouRjK2m3BXRMf0xkJlV/70Pof7M=\",\"509\":\"*-*-*-CHUNK-SRI-HASH-eknqhCNsIs1kja95EgpFuKajOJ/do=\",\"549\":\"*-*-*-CHUNK-SRI-HASH-YfO3ingByoiwIRIBQ3v9rdV0FEv2o=\",\"582\":\"*-*-*-CHUNK-SRI-HASH-EkDdVQ8/qjxubh09/7fUAzY9yI3uQ=\",\"591\":\"*-*-*-CHUNK-SRI-HASH-/aUWIiIMZrYPRXiBa3OdE25erA+k8=\",\"605\":\"*-*-*-CHUNK-SRI-HASH-8TKufQEPAhs/ZqWzmt8781dnfU1kc=\",\"614\":\"*-*-*-CHUNK-SRI-HASH-DhH7xwK5zAbBx8TVt8NSiIHBASDgo=\",\"644\":\"*-*-*-CHUNK-SRI-HASH-HLXY6EmvZRln0lQHo6omPffglC5AA=\",\"660\":\"*-*-*-CHUNK-SRI-HASH-1ly/20R4RqQr5zvwxTDMSaeS/XJTc=\",\"697\":\"*-*-*-CHUNK-SRI-HASH-WsrimxVu+QuwfDMblpzpy9Rfwm4x4=\",\"767\":\"*-*-*-CHUNK-SRI-HASH-jEdaJjIgLKHmuiiv6R1fFNJ1L0eGE=\",\"782\":\"*-*-*-CHUNK-SRI-HASH-odLPJerJpn4iC56V9j3CNWvDvPf1k=\",\"792\":\"*-*-*-CHUNK-SRI-HASH-7HG1O/LOKz+UC+hz0pF3F9g1MvUDY=\",\"851\":\"*-*-*-CHUNK-SRI-HASH-2Z8hSgIqQuKIVvX+ccym2XcKUrtoE=\",\"876\":\"*-*-*-CHUNK-SRI-HASH-mMbqRLoGPYdDBz0JZlF3EBhcttSgI=\",\"944\":\"*-*-*-CHUNK-SRI-HASH-9Nvrh568fe5XpRS5Cb19/W6QCSzAA=\",\"980\":\"*-*-*-CHUNK-SRI-HASH-zPx4fI1achF6v46my37UzjKWrbUts=\"};","__webpack_require__.b = (typeof document !== 'undefined' && document.baseURI) || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t231: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkgrafana_metricsdrilldown_app\"] = self[\"webpackChunkgrafana_metricsdrilldown_app\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","\nimport amdMetaModule from 'amd-module';\n\n__webpack_public_path__ =\n  amdMetaModule && amdMetaModule.uri\n    ? amdMetaModule.uri.slice(0, amdMetaModule.uri.lastIndexOf('/') + 1)\n    : 'public/plugins/grafana-metricsdrilldown-app/';\n","import React, { lazy, Suspense } from 'react';\n\nimport { type LabelBreakdownProps } from './LabelBreakdown';\n\nconst LabelBreakdown = lazy(() => import('./LabelBreakdown'));\n\nexport const LazyLabelBreakdown = (props: LabelBreakdownProps) => (\n  <Suspense fallback={<div>Loading...</div>}>\n    <LabelBreakdown {...props} />\n  </Suspense>\n);\n","import { type PluginExtensionExposedComponentConfig } from '@grafana/data';\n\nimport { type LabelBreakdownProps } from './LabelBreakdown';\nimport { LazyLabelBreakdown } from './LazyLabelBreakdown';\nimport pluginJson from '../../plugin.json';\n\nexport const labelBreakdownConfig = {\n  id: `${pluginJson.id}/label-breakdown-component/v1`,\n  title: 'Label Breakdown',\n  description: 'A metrics label breakdown view from the Metrics Drilldown app.',\n  component: LazyLabelBreakdown,\n} as const satisfies PluginExtensionExposedComponentConfig<LabelBreakdownProps>;\n","import { type PluginExtensionExposedComponentConfig } from '@grafana/data';\n\nimport { labelBreakdownConfig } from './LabelBreakdown/config';\n\ntype ExposedComponentConfigs = Array<PluginExtensionExposedComponentConfig<any>>;\n\n// When creating a new exposed component, add its config to this array\nexport const exposedComponentConfigs = [labelBreakdownConfig] satisfies ExposedComponentConfigs;\n\nexport type ExposedComponentName = (typeof exposedComponentConfigs)[number]['title'];\n","// CAUTION: Imports in this file will contribute to the module.tsx bundle size\nimport { PluginExtensionPoints, type PluginExtensionAddedLinkConfig } from '@grafana/data';\n\nimport { appendUrlParameters, createAppUrl, UrlParameters } from './links';\nimport { ROUTES } from '../shared/constants/routes';\nimport { isPrometheusDataSource } from '../shared/utils/utils.datasource';\n\nexport function createDatasourceUrl(datasourceUid: string, route: string = ROUTES.Drilldown): string {\n  const params = appendUrlParameters([[UrlParameters.DatasourceId, datasourceUid]]);\n  return createAppUrl(route, params);\n}\n\ninterface DataSourceConfigContext {\n  dataSource?: {\n    type: string;\n    uid: string;\n    name: string;\n  };\n}\n\nexport const EXTENSION_DESCRIPTION = `Browse metrics in Grafana Metrics Drilldown`;\n\nexport const datasourceConfigLinkConfigs: PluginExtensionAddedLinkConfig[] = [\n  {\n    title: 'Open in Metrics Drilldown',\n    description: EXTENSION_DESCRIPTION,\n    targets: [PluginExtensionPoints.DataSourceConfigActions, PluginExtensionPoints.DataSourceConfigStatus],\n    icon: 'drilldown',\n    category: 'metrics-drilldown',\n    path: createAppUrl(ROUTES.Drilldown),\n    configure: (context: DataSourceConfigContext | undefined) => {\n      // Validate context and datasource\n      if (!context?.dataSource?.type || !context?.dataSource?.uid) {\n        return undefined;\n      }\n\n      // Only show for Prometheus-compatible datasources\n      if (!isPrometheusDataSource(context.dataSource)) {\n        return undefined; // Hide the extension for non-compatible datasources\n      }\n\n      // Return dynamic path and description based on datasource type\n      return {\n        path: createDatasourceUrl(context.dataSource.uid),\n        description: EXTENSION_DESCRIPTION,\n      };\n    },\n  },\n];\n","import { AppPlugin, type AppRootProps } from '@grafana/data';\nimport { LoadingPlaceholder } from '@grafana/ui';\nimport React, { lazy, Suspense } from 'react';\n\nimport { exposedComponentConfigs } from 'exposedComponents/components';\nimport { datasourceConfigLinkConfigs } from 'extensions/datasourceConfigLinks';\nimport { linkConfigs } from 'extensions/links';\nimport { logger } from 'shared/logger/logger';\n\nconst LazyApp = lazy(async () => {\n  // Initialize i18n for scenes library\n  const { initPluginTranslations } = await import('@grafana/i18n');\n  const { loadResources } = await import('@grafana/scenes');\n  await initPluginTranslations('grafana-scenes', [loadResources]);\n\n  // Initialize WASM-based outlier detection\n  const { wasmSupported } = await import('./shared/services/sorting');\n  const { default: initOutlier } = await import('@bsull/augurs/outlier');\n\n  if (wasmSupported()) {\n    try {\n      await initOutlier();\n    } catch (e) {\n      logger.error(e as Error, { message: 'Error while initializing outlier detection' });\n    }\n  } else {\n    logger.warn('WASM not supported, outlier detection will not work');\n  }\n\n  return import('./App/App');\n});\n\nconst App = (props: AppRootProps) => (\n  <Suspense fallback={<LoadingPlaceholder text=\"\" />}>\n    <LazyApp {...props} />\n  </Suspense>\n);\n\nexport const plugin = new AppPlugin<{}>().setRootPage(App);\n\n// Register all extension types\nfor (const linkConfig of [...linkConfigs, ...datasourceConfigLinkConfigs]) {\n  plugin.addLink(linkConfig);\n}\n\nfor (const exposedComponent of exposedComponentConfigs) {\n  plugin.exposeComponent(exposedComponent);\n}\n"],"names":["leafPrototypes","getProto","inProgress","dataWebpackPrefix","module","exports","__WEBPACK_EXTERNAL_MODULE__211__","__WEBPACK_EXTERNAL_MODULE__1159__","__WEBPACK_EXTERNAL_MODULE__1269__","__WEBPACK_EXTERNAL_MODULE__1308__","__WEBPACK_EXTERNAL_MODULE__2007__","__WEBPACK_EXTERNAL_MODULE__3241__","ROUTES","Trail","Drilldown","interpolateQueryExpr","value","variable","multi","includeAll","config","featureToggles","prometheusSpecialCharsInLabelValues","test","replace","prometheusRegularEscape","prometheusSpecialRegexEscape","escapedValues","map","val","length","join","MATCHER_REGEX","RegExp","PRODUCT_NAME","linkConfigs","title","description","category","icon","path","createAppUrl","targets","PluginExtensionPoints","DashboardPanelMenu","ExploreToolbarAction","configure","context","pluginId","filter","isPromQuery","onClick","_","helpers","url","prometheusQuery","queries","templateSrv","getTemplateSrv","datasourceUid","datasource","uid","scopedVars","expr","metric","labels","hasErrors","errors","parsePromQLQuery","logger","warn","timeRange","undefined","params","buildNavigateToMetricsParams","createPromURLObject","from","to","error","Error","buildDrilldownUrlAsync","window","location","href","navigateToMetrics","datasource_uid","label_filters","start","end","parsedLabels","matcher","rawKey","rawOperator","rawValue","match","key","trim","operator","parseMatcher","label","op","parseFiltersToLabelMatchers","promURLObject","parser","tree","parse","iterate","enter","node","type","isError","name","errorText","slice","errorMsg","push","parent","labelData","processLabelMatcher","filterToUrlParameter","UrlParameters","Filters","escapeUrlPipeDelimiters","filters","appendUrlParameters","Metric","TimeRangeFrom","TimeRangeTo","DatasourceId","route","urlParams","urlParamsAsString","toString","PLUGIN_BASE_URL","initialParams","searchParams","URLSearchParams","forEach","append","query","Symbol","DS_HEALTH_CHECK_TIMEOUT_MS","DS_HEALTH_CHECK_TIMEOUT_S","toFixed","PROMETHEUS_DATA_SOURCE_REGEX","isPrometheusDataSource","input","DataSourceFetcher","limit","cachedDataSources","this","cache","get","pendingRequest","pendingRequests","fetchHealthyDataSources","finally","delete","set","dataSources","allDataSourcesOfType","getDataSourceSrv","getList","logs","ds","sort","a","b","isDefault","healthyDataSources","unhealthyDataSources","Promise","all","health","performHealthCheckWithTimeout","status","abortController","AbortController","timeoutId","setTimeout","abort","getBackendSrv","showSuccessAlert","showErrorAlert","abortSignal","signal","clearTimeout","DOMException","Map","dataSourceFetcherSingleton","getDataSourceFetcher","MATCHERS","regExp","environment","getEnvironment","host","found","find","GIT_COMMIT","LogLevel","defaultLogLevel","LOG","allLogLevels","TRACE","DEBUG","INFO","WARN","ERROR","__WEBPACK_EXTERNAL_MODULE__5959__","__WEBPACK_EXTERNAL_MODULE__6089__","extractMetricNames","promqlExpression","metricNames","Set","cursor","is","firstChild","processIdentifier","nextSibling","next","Array","metricName","add","labelName","child","FUNC_TYPE","UNDEF_TYPE","OBJ_TYPE","STR_TYPE","MAJOR","MODEL","NAME","TYPE","VENDOR","VERSION","ARCHITECTURE","CONSOLE","MOBILE","TABLET","SMARTTV","WEARABLE","EMBEDDED","AMAZON","APPLE","ASUS","BLACKBERRY","BROWSER","CHROME","FIREFOX","GOOGLE","HUAWEI","LG","MICROSOFT","MOTOROLA","OPERA","SAMSUNG","SHARP","SONY","XIAOMI","ZEBRA","FACEBOOK","CHROMIUM_OS","MAC_OS","SUFFIX_BROWSER","enumerize","arr","enums","i","toUpperCase","has","str1","str2","lowerize","indexOf","str","toLowerCase","len","substring","rgxMapper","ua","arrays","j","k","p","q","matches","regex","props","exec","call","strMapper","hasOwnProperty","windowsVersionMap","regexes","browser","cpu","device","engine","EDGE","os","UAParser","extensions","getResult","_navigator","navigator","_ua","userAgent","_uach","userAgentData","_rgxmap","mergedRegexes","concat","extend","_isSelfNav","getBrowser","version","_browser","split","brave","isBrave","getCPU","_cpu","getDevice","_device","mobile","standalone","maxTouchPoints","getEngine","_engine","getOS","_os","platform","getUA","setUA","CPU","DEVICE","ENGINE","OS","$","jQuery","Zepto","result","prop","__WEBPACK_EXTERNAL_MODULE__7781__","__WEBPACK_EXTERNAL_MODULE__8398__","__WEBPACK_EXTERNAL_MODULE__8531__","methodName","args","console","trace","getFaro","api","pushLog","level","debug","info","log","pushError","constructor","PLUGIN_ID","pluginJson","TransportItemType","transportItemTypeToBodyKey","EXCEPTION","MEASUREMENT","EVENT","isTypeof","isToString","Object","prototype","isInstanceOf","reference","_err","isNull","isString","isNumber","isNaN","isBoolean","isObject","isFunction","isArray","isEventDefined","Event","isErrorDefined","isEmpty","keys","stringifyExternalJson","json","JSON","stringify","valueSeen","WeakSet","_key","getCircularDependencyReplacer","stringifyObjectValues","obj","o","entries","String","dateNow","Date","now","getCurrentTimestamp","toISOString","timestampToIsoString","deepEqual","aIsArray","bIsArray","idx","aIsObject","bIsObject","aKeys","bKeys","aKey","includes","Observable","subscribers","subscribe","subscriber","unsubscribe","sub","notify","first","internalSubscriber","data","subscription","resultUnsubscribeFn","bind","withUnsubscribeOverride","takeWhile","predicate","merge","observables","mergerObservable","subscriptions","observable","originalUnsubscribeAll","unsubscribeAll","userActionStartByApiCallEventName","userActionStart","UserActionImportance","Normal","Critical","UserActionState","globalThis","g","self","faro","registerFaro","unpatchedConsole","internalLogger","metas","transports","instrumentations","pause","unpause","isolate","defineProperty","configurable","enumerable","writable","setInternalFaroOnGlobalObject","preventGlobalExposure","globalObjectKey","setFaroOnGlobalObject","alphabet","genShortID","Math","floor","random","ItemBuffer","buffer","addItem","item","flushBuffer","cb","size","UserAction","parentId","trigger","attributes","trackUserActionsExcludeItem","importance","super","id","_itemBuffer","_transports","_state","Started","_start","startTime","halt","Halted","cancel","Cancelled","endTime","duration","Ended","payload","isExcludeFromUserAction","execute","userActionItem","assign","action","pushEvent","userActionName","userActionStartTime","userActionEndTime","userActionDuration","userActionTrigger","userActionImportance","timestampOverwriteMs","customPayloadTransformer","getState","userActionsMessageBus","addItemToUserActionBuffer","userAction","defaultExceptionType","defaultErrorArgsSerializer","arg","stacktraceParser","initializeExceptionsAPI","tracesApi","userActionsApi","_a","lastPayload","parseStacktrace","changeStacktraceParser","newStacktraceParser","ignoreErrors","preserveOriginalError","getStacktraceParser","skipDedupe","stackFrames","spanContext","originalError","message","stack","patterns","msg","some","pattern","isErrorIgnored","ctx","cause","parseCause","meta","timestamp","trace_id","traceId","span_id","spanId","getTraceContext","frames","stacktrace","testingPayload","stackTrace","dedupe","getActiveUserAction","err","defaultLogArgsSerializer","initializeAPI","userActionsInstrumentation","excludeItem","activeUserAction","startUserAction","options","triggerName","v","initializeUserActionsAPI","_unpatchedConsole","_config","otel","getOTEL","getSpanContext","active","initOTEL","isOTELInitialized","pushTraces","initializeTracesAPI","metaSession","metaUser","metaView","metaPage","setUser","user","remove","setSession","session","newOverrides","overrides","getSession","getPage","page","resetUser","resetSession","setView","view","previousView","getView","setPage","pageMeta","initializeMetaAPI","logArgsSerializer","initializeLogsAPI","pushMeasurement","values","initializeMeasurementsAPI","domain","attrs","eventDomain","initializeEventsAPI","noop","InternalLoggerLevel","defaultInternalLogger","prefix","defaultInternalLoggerLevel","defaultUnpatchedConsole","createInternalLogger","internalLoggerLevel","OFF","VERBOSE","initializeInternalLogger","BatchExecutor","sendFn","_b","signalBuffer","itemLimit","sendTimeout","paused","flushInterval","document","addEventListener","visibilityState","flush","setInterval","clearInterval","groupItems","items","itemMap","metaKey","currentItems","initializeTransports","beforeSendHooks","applyBeforeSendHooks","filteredItems","hook","modified","Boolean","sanitizeItems","batchedSend","transport","isBatched","send","batchExecutor","batching","enabled","newTransports","newTransport","existingTransport","addBeforeSendHooks","newBeforeSendHooks","beforeSendHook","getBeforeSendHooks","every","filteredItem","instantSend","isPaused","transportsToRemove","transportToRemove","existingTransportIndex","splice","removeBeforeSendHooks","beforeSendHooksToRemove","initializeUnpatchedConsole","initializeFaro","listeners","getValue","reduce","acc","notifyListeners","listener","newItems","itemsToRemove","currentItem","addListener","removeListener","currentListener","initializeMetas","newInstrumentations","newInstrumentation","existingInstrumentation","initialize","instrumentationsToRemove","instrumentationToRemove","existingInstrumentationIndex","destroy","initializeInstrumentations","initial","sdk","app","bundleId","appName","sessionTracking","registerInitialMetas","beforeSend","registerInitialTransports","registerInitialInstrumentations","defaultGlobalObjectKey","defaultBatchingConfig","defaultEventDomain","newLineString","evalString","unknownSymbolString","atString","webkitLineRegex","webkitEvalRegex","webkitEvalString","webkitAddressAtString","webkitAddressAtStringLength","firefoxLineRegex","firefoxEvalRegex","firefoxEvalString","safariExtensionString","safariWebExtensionString","reactMinifiedRegex","buildStackFrame","filename","func","lineno","colno","stackFrame","function","getDataFromSafariExtensions","isSafariExtension","isSafariWebExtension","getStackFramesFromError","lines","_line","line","parts","startsWith","submatch","columnNumber","Number","STORAGE_KEY","SESSION_INACTIVITY_TIME","defaultSessionTrackingConfig","persistent","maxSessionPersistenceTime","userActionDataAttribute","unknownString","browserMeta","osName","osVersion","language","brands","getBrands","viewportWidth","innerWidth","viewportHeight","innerHeight","k6Meta","k6Properties","k6","isK6Browser","testRunId","currentHref","pageId","createPageMeta","generatePageId","initialPageMeta","locationHref","BaseExtension","logDebug","logInfo","logWarn","logError","BaseTransport","getIgnoreUrls","mergeResourceSpans","traces","resourceSpans","currentResource","currentSpans","scopeSpans","newSpans","throttle","callback","delay","lastPending","timeoutBehavior","webStorageType","isWebStorageAvailable","storage","testItem","setItem","removeItem","getItem","webStorageMechanism","isWebStorageTypeAvailable","_error","isLocalStorageAvailable","isSessionStorageAvailable","EVENT_SESSION_START","EVENT_SESSION_RESUME","EVENT_OVERRIDES_SERVICE_NAME","isSampled","_c","samplingRate","sampler","createUserSessionObject","sessionId","started","lastActivity","generateSessionId","isUserSessionValid","getUserSessionUpdater","fetchUserSession","storeUserSession","forceSessionExtend","sessionTrackingConfig","isPersistentSessions","sessionFromStorage","newSession","addSessionMetadataToNextSession","sessionMeta","onSessionChange","previousSession","_d","_e","_f","_g","sessionWithMeta","previousSessionId","getSessionMetaUpdateHandler","sessionFromSessionStorage","sessionAttributes","sessionOverrides","storedSessionMeta","storedSessionMetaOverrides","hasSessionOverridesChanged","hasAttributesChanged","userSession","storedSessionOverrides","serviceName","previousServiceName","sendOverrideEvent","PersistentSessionsManager","updateSession","updateUserSession","init","removeUserSession","storageTypeLocal","storedSession","VolatileSessionsManager","storageTypeSession","getSessionManagerByConfig","__awaiter","thisArg","_arguments","P","generator","resolve","reject","fulfilled","step","e","rejected","done","then","apply","__rest","s","t","getOwnPropertySymbols","propertyIsEnumerable","FetchTransport","disabledUntil","rateLimitBackoffMs","defaultRateLimitBackoffMs","getNow","promiseBuffer","concurrency","work","producer","shift","reason","promiseProducer","createPromiseBuffer","bufferSize","body","bk","signals","getTransportBody","requestOptions","apiKey","headers","restOfRequestOptions","fetch","method","keepalive","response","extendFaroSession","getRetryAfterDate","text","catch","ignoreUrls","retryAfterHeader","date","SessionExpiredString","BaseInstrumentation","arguments","MESSAGE_TYPE_HTTP_REQUEST_START","MESSAGE_TYPE_HTTP_REQUEST_END","domMutationObservable","domMutationObserver","monitorDomMutations","MutationObserver","_mutationsList","_observer","observe","childList","subtree","characterData","isUrlIgnored","flatMap","ignoredUrl","apiTypeFetch","apiTypeXhr","httpRequestObservable","originalXhrOpen","originalFetchFn","isInstrumented","monitorHttpRequests","emitStartMessage","requestProps","request","emitEndMessage","onRequestEnd","onRequestStart","resource","URL","isIgnoredUrl","requestId","apiType","monitorFetch","XMLHttpRequest","open","monitorXhr","NAVIGATION_ID_STORAGE_KEY","RESOURCE_ENTRY","w3cTraceparentFormat","getSpanContextFromServerTiming","serverTimings","serverEntry","includePerformanceEntry","performanceEntryJSON","allowProps","allowPropKey","allowPropValue","perfEntryPropVal","createFaroResourceTiming","resourceEntryRaw","connectEnd","connectStart","decodedBodySize","domainLookupEnd","domainLookupStart","encodedBodySize","fetchStart","initiatorType","nextHopProtocol","redirectEnd","redirectStart","renderBlockingStatus","rbs","requestStart","responseEnd","responseStart","responseStatus","secureConnectionStart","transferSize","workerStart","toFaroPerformanceTimingString","tcpHandshakeTime","dnsLookupTime","tlsNegotiationTime","redirectTime","requestTime","responseTime","fetchTime","serviceWorkerTime","cacheHitStatus","cacheType","getCacheType","protocol","ttfb","createFaroNavigationTiming","navigationEntryRaw","activationStart","domComplete","domContentLoadedEventEnd","domContentLoadedEventStart","domInteractive","loadEventEnd","loadEventStart","parserStart","performance","timing","domLoading","timeOrigin","getDocumentParsingTime","pageLoadTime","documentParsingTime","domProcessingTime","domContentLoadHandlerTime","onLoadTime","max","round","DEFAULT_TRACK_RESOURCES","performanceEntriesSubscription","PerformanceInstrumentation","handleReady","readyState","readyStateCompleteHandler","removeEventListener","onDocumentReady","faroNavigationId","faroNavigationEntryResolve","faroNavigationEntryPromise","PerformanceObserver","observedEntries","getEntries","navEntryJson","toJSON","serverTiming","faroPreviousNavigationId","faroNavigationEntry","buffered","getNavigationTimings","trackResources","resourceEntryJson","faroResourceEntry","faroResourceId","observeResourceTimings","performanceObservable","isSubscribed","isRequestEndMessage","UserActionController","http","dom","perf","isValid","runningRequests","attach","allMonitorsSub","isRequestStartMessage","endAction","scheduleFollowUp","stateSub","cleanup","clearTimer","followUpTid","haltAction","cancelAction","startHaltTimeout","haltTid","clear","getUserEventHandler","processUserActionStarted","processUserEvent","event","element","dataAttributeName","parsedDataAttributeName","withoutData","withUpperCase","char","convertDataAttributeName","dataset","getUserActionNameFromElement","target","UserActionInstrumentation","ev","_userActionSub","valueTypeRegex","getErrorDetails","evt","isDomErrorRes","isEventRes","isErrorEvent","isDomError","isDomException","isEvent","getDetailsFromErrorArgs","source","eventIsString","initialStackFrame","groups","getValueAndTypeFromMessage","getDetailsFromConsoleErrorArgs","serializer","registerOnunhandledrejection","detail","isPrimitive","ErrorsInstrumentation","oldOnerror","onerror","registerOnerror","u","hadRecentInput","n","at","getEntriesByType","nodeName","nodeType","classList","parentNode","r","WeakMap","c","f","persisted","timeStamp","delta","rating","d","requestAnimationFrame","l","h","prerendering","wasDiscarded","navigationType","m","supportedEntryTypes","y","isFinite","M","firstHiddenTime","onHidden","T","E","D","disconnect","reportAllChanges","L","F","B","interactionId","min","C","O","interactionCount","I","A","entryType","W","requestIdleCallback","once","capture","x","processingEnd","abs","renderTime","processingStart","generateTarget","interactionTarget","interactionType","interactionTime","nextPaintTime","processedEventEntries","longAnimationFrameEntries","inputDelay","processingDuration","presentationDelay","loadState","longestScript","totalScriptDuration","totalStyleAndLayoutDuration","totalPaintDuration","totalUnattributedDuration","styleAndLayoutStart","scripts","forcedStyleAndLayoutDuration","entry","subpart","intersectingDuration","attribution","PerformanceEventTiming","durationThreshold","takeRecords","N","H","U","V","loadStateKey","timeToFirstByteKey","WebVitalsWithAttribution","corePushMeasurement","webVitalConfig","measureCLS","measureFCP","measureINP","measureLCP","measureTTFB","sources","largestShiftTarget","largestShiftTime","largestShiftValue","largestShiftSource","largestShiftEntry","buildInitialValues","addIfPresent","buildInitialContext","timeToFirstByte","firstByteToFCP","navigationEntry","fcpEntry","isTrusted","resourceLoadDelay","resourceLoadDuration","elementRenderDelay","lcpEntry","lcpResourceEntry","waitingDuration","cacheDuration","dnsDuration","connectionDuration","requestDuration","indicator","navigationEntryId","navigation_type","navigation_entry_id","WebVitalsInstrumentation","webVitalsInstrumentation","SessionInstrumentation","sendSessionStartEvent","notifiedSession","createInitialSession","SessionManager","sessionsConfig","lifecycleType","initialSession","storedUserSession","storedUserSessionMeta","createSession","registerBeforeSendHook","newItem","newAttributes","initialSessionMeta","ViewInstrumentation","sendViewChangedEvent","notifiedView","fromView","toView","ActivityWindowTracker","eventsObservable","_tracking","_options","inactivityMs","drainTimeoutMs","isOperationStart","isOperationEnd","_initialize","_lastEventTime","_currentEvents","startKey","_activeOperations","endKey","_scheduleInactivityCheck","startTracking","_startTime","stopTracking","_clearTimer","_inactivityTid","_drainTid","hasActiveOperations","events","_startDrainTimeout","interactionObservable","registeredEventNames","eventNameToHandler","urlChangeObservable","lastHref","originalPushState","originalReplaceState","onPopStateHandler","onHashChangeHandler","onNavigateHandler","originalNavigateEventIntercept","NavigationInstrumentation","httpMonitor","domMutationsMonitor","urlMonitor","emit","toOverride","destination","sameDocument","navigation","NavigateEventConstructor","NavigateEvent","intercept","canIntercept","history","pushState","replaceState","monitorUrlChanges","interactionMonitor","eventNames","eventName","handler","activityWindowTracker","urlChange","fromUrl","toUrl","CSPInstrumentation","securitypolicyviolationHandler","ConsoleInstrumentation","errorSerializer","instrumentationOptions","consoleInstrumentation","serializeErrors","disabledLevels","defaultDisabledLevels","consoleErrorAsLog","consoleErrorPrefix","getWebInstrumentations","enablePerformanceInstrumentation","unshift","enableContentSecurityPolicyInstrumentation","captureConsole","getFilteredInstrumentations","experimental","trackNavigation","instr","createDefaultMetas","browserConfig","pageTracking","initialMetas","crateSessionMeta","trackGeolocation","geoLocationTrackingEnabled","coreConfig","browserConfigUrl","restProperties","makeCoreConfig","FARO_ENVIRONMENTS","faroUrl","setFaro","instance","errorsToIgnore","errorsToIgnoreSet","shouldIgnoreError","errorMessage","initFaro","faroEnvironment","getFaroEnvironment","apps","bootData","appRelease","userEmail","email","release","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","loaded","__webpack_modules__","amdO","getter","__esModule","getPrototypeOf","mode","ns","create","def","current","getOwnPropertyNames","definition","chunkId","promises","Function","script","needAttach","getElementsByTagName","getAttribute","createElement","charset","nc","setAttribute","src","origin","crossOrigin","integrity","sriHashes","onScriptComplete","prev","onload","timeout","doneFns","removeChild","fn","head","appendChild","toStringTag","nmd","paths","children","baseURI","installedChunks","installedChunkData","promise","errorType","realSrc","webpackJsonpCallback","parentChunkLoadingFunction","chunkIds","moreModules","runtime","chunkLoadingGlobal","lastIndexOf","LabelBreakdown","lazy","exposedComponentConfigs","component","Suspense","fallback","div","createDatasourceUrl","EXTENSION_DESCRIPTION","datasourceConfigLinkConfigs","DataSourceConfigActions","DataSourceConfigStatus","dataSource","LazyApp","initPluginTranslations","loadResources","wasmSupported","default","initOutlier","plugin","AppPlugin","setRootPage","LoadingPlaceholder","linkConfig","addLink","exposedComponent","exposeComponent"],"sourceRoot":""}